 var ifmd=0,ot=0,ifgs=0,dragpagex=0; var ui={upd:[],'ui':{a:{maxr:42,modifyd:1405868639640,x:1},all:{photo:{cid:"photo",ctn:"newvs|7",sx:0,galx:7,w:120,h:0,x:0,y:0,z:-1,s:7,marg:0,ncheck:0,cfun:"",ca:"立刻拍张图|takepht()`从手机中选择|takepic()`压缩并上传|uploadimg(0,this)",class0:"cent wei20 bd5 r5 x_gray",class1:"",class2:"",padd:6,cta:"",ccl:"",cret:"",ftxt:0,checksj:"",idpg:0,cxy:"",op:0},gxpic:{cid:"gxpic",ctn:"newvs|7",sx:0,galx:7,w:409,h:339,x:0,y:0,z:-1,s:0,marg:0,ncheck:0,cfun:"",ca:"||gx1`||gx2`||gx3`||gx4`||gx5",class0:"",class1:"",class2:"",padd:0,cta:"",ccl:"",cret:"append",ftxt:0,checksj:"",idpg:0,cxy:"x",op:0},logout:{cid:"logout",ctn:"newvs|7",sx:0,galx:7,w:104,h:44,x:0,y:0,z:-2,s:0,marg:0,ncheck:1,cfun:"",ca:"退出登录|dl.logouta()|`上传管理|showimg(1)|",class0:"x_noy cent yaheif wei20 x_btnfb",class1:"",class2:"",padd:0,cta:"",ccl:"",cret:"html",ftxt:0,checksj:"",idpg:0,cxy:"1",op:0},loginok:{cid:"loginok",ctn:"newvs|7",sx:0,galx:7,w:98,h:48,x:0,y:0,z:0,s:0,marg:0,ncheck:0,cfun:"",ca:"登录||x_btnhs",class0:"x_noy cent yaheif wei20",class1:"",class2:"",padd:0,cta:"",ccl:"",cret:"html",ftxt:0,checksj:"",idpg:0,cxy:"",op:0},btnzhuce:{cid:"btnzhuce",ctn:"newvs|7",sx:0,galx:7,w:98,h:48,x:0,y:0,z:0,s:0,marg:0,ncheck:0,cfun:"",ca:"注册||x_btnhs",class0:"x_noy cent yaheif wei20",class1:"",class2:"",padd:0,cta:"",ccl:"",cret:"html",ftxt:0,checksj:"",idpg:0,cxy:"",op:0},fhsyb:{cid:"fhsyb",ctn:"newvs|7",sx:0,galx:7,w:164,h:67,x:0,y:0,z:0,s:0,marg:0,ncheck:0,cfun:"dl.builddl()",ca:"返回上一步||x_btnbg",class0:"x_noy yaheif wei25 cent",class1:"",class2:"",padd:0,cta:"",ccl:"",cret:"html",ftxt:0,checksj:"",idpg:0,cxy:"",op:0},fpnav:{cid:"fpnav",ctn:"7|newvs",sx:0,galx:7,w:92,h:42,x:0,y:0,z:-1,s:0,marg:2,ncheck:1,cfun:"",ca:"通用",class0:"x_noy cent yaheif wei20 x_qdjl",class1:"",class2:"",padd:0,cta:"",ccl:"",cret:"html",ftxt:0,checksj:"",idpg:0,cxy:"",op:0},msgb:{cid:"msgb",ctn:"7|newvs",sx:0,galx:7,w:60,h:54,x:0,y:0,z:-2,s:0,marg:0,ncheck:0,cfun:"j().cls()",ca:"||x_btnclose",class0:"x_noy",class1:"",class2:"",padd:0,cta:"",ccl:"",cret:"html",ftxt:0,checksj:"",idpg:0,cxy:"",op:0},allui:{cid:"allui",ctn:"newvs",sx:0,galx:8,w:0,h:0,x:0,y:0,z:0,s:0,marg:0,ncheck:0,cfun:"",ca:"",class0:"",class1:"",class2:"",padd:0,cta:"",ccl:"",cret:"html",ftxt:0,checksj:"",idpg:0,cxy:"",op:0},sngsle:{cid:"sngsle",ctn:"newvs",sx:0,galx:8,w:0,h:0,x:0,y:0,z:0,s:0,marg:0,ncheck:1,cfun:"",ca:"",class0:"rr5l nr x_gray bdc",class1:"x_check_radio leftm",class2:"",padd:0,cta:"",ccl:"",cret:"html",ftxt:0,checksj:"",idpg:0,cxy:"",op:0},multisle:{cid:"multisle",ctn:"newvs",sx:0,galx:8,w:0,h:0,x:0,y:0,z:0,s:0,marg:0,ncheck:99,cfun:"",ca:"",class0:"x_gray bdc",class1:"x_check leftt",class2:"",padd:0,cta:"",ccl:"",cret:"html",ftxt:0,checksj:"",idpg:0,cxy:"",op:0}}}};sq={sq:{}}; var imgp=(imgp||('css/')); if((window.location+'').indexOf('http:')==0&&imgp=='css/')imgp='/css/'; jqueryex={sclick:"onclick", ifmd:0,dragpagex:0, cssls:',', white:['','c','fff','fff','a7a7a7','fff','f2f2f2','555'], brown: ['', 'c', 'a67337', '8a5520', 'fff', '8a5520', '5c3a19', 'fff'], gray: ['', 'c', 'fafafa', 'f1f1f1', '2f3e46', 'e1e1e1', 'ccc', '222'], yellow: ['', 'c', 'd1d744', 'bbbf39', 'fff', 'dadd50', 'c0c442', 'fff'], blue: ['', 'c', '4db5fe', '3c9be2', 'fff', '3795D8', '002F50', 'fff'], blue2: ['', 'c', '46cad9', '46cad9', 'fff', '007483', '008696', 'fff'], blue3: ['', 'c', 'fff', 'fff', '46cad9', '46cad9', '46cad9', 'fff'], black: ['', 'c', '3c3c3c', '111', 'fff', '272727', '585858', 'fff'], red: ['', 'c', 'd74444', 'c43a3a', 'fff', 'e25c5c', 'cc4646', 'fff'], red2: ['', 'c', 'ff7878', 'ff7878', 'fff', 'ea5c5c', 'ea5c5c', 'fff'], rede: ['', 'c', '', '', 'ff7878', 'ff7878', 'ff7878', 'fff'], orange: ['','c','f79f1c','D68635','fff','C4811E','8D5706','fff'], orange2: ['','c','f08a62','f08a62','fff','e85521','e85521','fff'], orange3: ['','c','c33e02','c33e02','fff','e85521','e85521','fff'], orange4: ['','c','fff','fff','FB8C47','FB8C47','FB8C47','fff'], green:['','c','8dd845','6fbb31','fff','fb6334','A03414','fff'], pink:['','c','d745a4','bd368d','fff','ea6abd','bd368d','fff'], purple:['','c','9246d7','8339c2','fff','a35de6','7733be','fff'], empty:['','c','','','fff','fff','f2f2f2','555'], emptywx:['','c','','','fff','','','555'] }; jQuery.fn.extend({ strlen:function(str){ return str.replace(/[^\x00-\xff]/g,"rr").length; }, getall:function(s,pid,cid,sjjson,tablename,st,sid,dragdiv,isappend,nowrite){ var gjson; if(typeof(s)=="object"){ gjson={ s:s.s||'', pid:s.pid||'', cid:s.cid||{}, sjjson:s.sjjson||{}, tablename: s.tablename||'', st: s.st||'', sid: s.sid||'', dragdiv: s.dragdiv||'', isappend: s.isappend||false, nowrite: s.nowrite || false, }; }else{ gjson={ s:s||'', pid:pid||'', cid:cid||{}, sjjson:sjjson||{}, tablename: tablename||'', st: st||'', sid: sid||'', dragdiv: dragdiv||'', isappend: isappend||false, nowrite: nowrite||false, }; } if(gjson.sjjson.sqajax){ db.sqajax(gjson.sjjson.sqajax, "", gjson.sjjson.swhe||"", function (k, jsona) { var sfunc=''; if(gjson.sjjson.func)sfunc=gjson.sjjson.func; gjson.sjjson=jsona; if(!gjson.nowrite)jQuery().getalls(gjson); if(sfunc)db.dofunc(sfunc,{}); },gjson.sjjson.option||'&option=011'); }else{ if(!gjson.nowrite)jQuery().getalls(gjson); } }, getalls:function(gjson){ var tempjson={ "cid": gjson.cid,"w": 0, "h": 0, "x": 0, "y": 0, "z": 0, "s": 0, "marg": 3, "ncheck": -2, "cfun": "", "ca":[], "class0": " ", "class1": "", "class2": "", "padd": 0, "cta": "", "ccl": "", "cret": "html",cxy:(gjson.dragdiv)?'y0':'' }; if(typeof(gjson.cid)=='string'){ ui.ui.all[gjson.cid] = tempjson; }else{ ui.ui.all[gjson.cid.cid]=jQuery().jcopy(ui.ui.all[gjson.cid.fid]||tempjson); jQuery.each(gjson.cid,function(i,n){ ui.ui.all[gjson.cid.cid][i]=n; }); gjson.cid=gjson.cid.cid; } var s=(gjson.s+''); var sind=s.indexOf('{'); if(sind>0&&s.indexOf('function')==0){s=s.substring(sind+1);s=s.substring(0,s.length-1);} var sida=gjson.sid.split(','); jQuery.each(gjson.tablename.split(','),function (itable, tn) { var ind=0; jQuery.each(gjson.sjjson[tn].all, function (i, n) { var str=s; jQuery.each(n,function(ii,nn){ var strii=ii.replace(/\(/gi,'\\(').replace(/\)/gi,'\\)').replace(/\*/gi,'\\*'); var reg=new RegExp("#"+strii+"#","g"); str=str.replace(reg,nn); reg=new RegExp("\{"+strii+"\}","g"); str=str.replace(reg,grid.inp(tn,ii,'',i,nn+'')); }); var reg=new RegExp("#i#","g"); str=str.replace(reg,ind); ind++; jQuery.each(gjson.st.split(','),function(ii,ta){ if(gjson.sjjson[ta]){ var strid='idus'; if(ta.indexOf('us')!=0&&ta.indexOf('vs')!=0)strid='id'+tn; if(sida[ii])strid=sida[ii]; if(tn=='cm')if(n.idus==db.idus&&n.usid>1000&&n.typ==2)strid='usid'; var ns=gjson.sjjson[ta].all[n[strid]]; if(ta=='fi') ns=jQuery(gjson.sjjson[ta].all).jgrep(strid,i,'json0'); if(ns) jQuery.each(ns,function(iii,nnn){ var reg=new RegExp("#"+ta+'.'+iii+"#","g"); str=str.replace(reg,nnn); reg=new RegExp("{"+ta+'.'+iii+"}","g"); str=str.replace(reg,grid.inp(ta,iii,'',ns.id,nnn+'')); }); } }); ui.ui.all[gjson.cid].ca.push(jQuery().gv(str)); }); }); var sstr= jQuery().geta(ui.ui.all[gjson.cid]); if(gjson.isappend=='prepend'){ jQuery('#'+gjson.cid).prepend(sstr); }else if(gjson.isappend){ jQuery('#'+gjson.cid).append(sstr); }else{ jQuery('#'+gjson.pid).html( '<div dragf='+(gjson.dragdiv||'0')+' id='+gjson.cid+' class="tablestyle">'+'</div>'); jQuery().getaa(gjson.cid); } }, ui:function(json,noreturn){ var json1={"w": 120, "h": 40, "x": 0, "y": 0, "z": -1, "s": 5, "marg": 0, "ncheck": 1, "cfun": "", "class0": "x_c_gray _f_22 cent _r_5__bbb", "cret": "html"}; if(json.w<=80&&json.w>10){ if(!json.h){json1.h=30;} json1.class0="x_c_gray _f_18 cent _r_5__ccc"; } json.cid=json.cid||'btn'+db.getrd(4); ui.ui.all[json.cid]=jQuery().jcopy(ui.ui.all[json.fid]||json1); jQuery.each(json,function(i,n){ ui.ui.all[json.cid][i]=n; }); if(noreturn)return; return jQuery('#'+json.cid).geta(ui.ui.all[json.cid]); }, jcopy:function(json){ var rjson={}; jQuery.each(json,function(i,n){ rjson[i]=n; }); return rjson; }, gv:function(str,mrz){ var aa=mrz||"。"; try{ aa=eval(str); }catch(ex){ aa=str.substring(1,str.length-1); } return aa; }, recss:function(cssn){ jQuery.each(cssn.split(','),function(i,n){ jQuery().recssa(n); }); }, recssa:function(cssn){ if(jqueryex.cssls.indexOf(','+cssn+',')>-1){return} jqueryex.cssls+=cssn+','; var json={}; var cca=cssn.split('_'); var ifpre=[]; var cssyz=''; if(cssn.indexOf('x_')==0)cssyz=',.'+cssn.replace('x_','y_')+',.'+cssn.replace('x_','z_'); var cn='.'+cssn+cssyz; if(cca[1]=='s'){ var ss=''; if(cca[2])ss=(cca[4]||'0')+' '+(cca[5]||'3px')+' '+(cca[6]||'6px')+' #'+cca[2]; if(cca[3])if(cca[3].indexOf('in')==0)ss+=(ss.length>0?',':' ')+'inset '+(cca[4]||'0')+' '+(cca[5]||'2px')+' '+(cca[6]||'4px')+' #'+cca[3].substring(2); json[cn]={'box-shadow':ss}; if(navig_pre)ifpre=[navig_pre]; }else if(cca[1]=='f'){ json[cn]={'font-size':(cca[2].indexOf('vw')>-1?(cca[2].substring(0,cca[2].length-2)+'vw'):(cca[2]+'px')),'font-weight':cca[3]=='b'?'bold':'normal'}; if(cca[4])json[cn]['line-height']=cca[4].indexOf('p')>0?(cca[4]+'x'):(cca[4]+'%'); }else if(cca[1]=='w'){ json[cn]={'display':'block','width':cca[2]+'px','height':cca[3]+'px'}; }else if(cca[1]=='sk'){ json[cn]={'transform':'skew('+cca[2]+'deg)'}; if(navig_pre)ifpre=[navig_pre]; }else if(cca[1]=='ro'){ json[cn]={'transform':'rotate('+cca[2]+'deg)'}; if(navig_pre)ifpre=[navig_pre]; }else if(cca[1]=='r'){ json[cn]={}; var ss=''; if(cca[4]){ if(cca[3]){ if(cca[3].indexOf('t')>-1)json[cn]['border-top']='solid #'+cca[4]+' '+(cca[5]||'1')+'px'; if(cca[3].indexOf('b')>-1)json[cn]['border-bottom']='solid #'+cca[4]+' '+(cca[5]||'1')+'px'; if(cca[3].indexOf('r')>-1)json[cn]['border-right']='solid #'+cca[4]+' '+(cca[5]||'1')+'px'; if(cca[3].indexOf('l')>-1)json[cn]['border-left']='solid #'+cca[4]+' '+(cca[5]||'1')+'px'; }else{ json[cn]['border']='solid #'+cca[4]+' '+(cca[5]||'1')+'px'; } } var rav=cca[2].length>3?(cca[2].substring(0,2)+'%'):(cca[2]+'px'); if(cca[2].indexOf('p')>0)rav=cca[2].replace(/p/g,'px '); if(cca[2])json[cn]['border-radius' ]=rav; if(cssyz!=''){ json[cssyz.substring(1)]={}; if(cca[7]){ if(cca[6].indexOf('t')>-1)json[cssyz.substring(1)]['border-top']='solid #'+cca[7]+' '+(cca[5]||'1')+'px'; if(cca[6].indexOf('b')>-1)json[cssyz.substring(1)]['border-bottom']='solid #'+cca[7]+' '+(cca[5]||'1')+'px'; if(cca[6].indexOf('r')>-1)json[cssyz.substring(1)]['border-right']='solid #'+cca[7]+' '+(cca[5]||'1')+'px'; if(cca[6].indexOf('l')>-1)json[cssyz.substring(1)]['border-left']='solid #'+cca[7]+' '+(cca[5]||'1')+'px'; }else{ json[cssyz.substring(1)]['border']='solid #'+cca[7]+' '+(cca[5]||'1')+'px'; } } if(navig_pre)ifpre=[navig_pre]; } else if(cca[1]=='b'||cca[1]=='bl'||cca[1]=='c'){ if(cca[1]=='c')cca=jqueryex[cca[2]]; var qzs='linear-gradient('+(cca[1]=='bl'?'left,':''); var va=[qzs+'#'+cca[2]+',#'+cca[3]+')']; if(navig_pre) va[1]='-'+navig_pre+'-'+qzs+'#'+cca[2]+',#'+cca[3]+')'; json[cn]={'background-color':'#'+cca[3],'background-image':va,'color':'#'+cca[4]}; if(navig_pre=='ms')json[cn]={'background-color':'#'+cca[3],'color':'#'+cca[4]}; if(cssyz!=''){ va=[qzs+'#'+cca[5]+',#'+cca[6]+')']; if(navig_pre) va[1]='-'+navig_pre+'-'+qzs+'#'+cca[5]+',#'+cca[6]+')'; json[cssyz.substring(1)]={'background-color':'#'+cca[6],'background-image':va,'color':'#'+cca[7]}; if(navig_pre=='ms')json[cssyz.substring(1)]={'background-color':'#'+cca[6],'color':'#'+cca[7]}; } } else if(cca[1]=='d'){ json[cn]={}; json[cn]['animation-iteration-count']=cca[2] || 'infinite'; json[cn]['animation-duration']=(cca[3] || '2')+'s'; json[cn]['animation-timing-function']=cca[4] || 'ease'; json[cn]['animation-delay']=(cca[5] || '0')+'s'; if(navig_pre)ifpre=[navig_pre]; } if(window.restyle)restyle(json,ifpre); }, getaa:function(strid){ var strt=''; jQuery.each(strid.split(','),function(i,n){ strt=jQuery('#'+n).geta(ui.ui.all[n]); }); return strt; }, geta:function(json){ if(!json){return;} var stra=new Array(); var ifyh=''; var cid=json.cid; if(json.cta){stra=json.csj[json.cta].all;ifyh="'";} if(json.ca)stra=json.ca; stra=(typeof(stra)=="string")?stra.split('`'):stra; if(json.ftxt){ if(jQuery(this).children().length==(json.s?2:1)*stra.length){ jQuery.each(stra,function(i,n){ var na=(typeof(n)=="string")?n.split('|'):n; jQuery("#"+cid+"_"+i+"_0").text(na[0]); }); return; } } var tag=json.tag||'div'; if(cid.indexOf("td")==0)tag="td"; var bg=json.cbg||''; var strdivs="",s1="",sleft="",sright=""; var w=json.w||0; var hh=json.h||0; if(w==0&&cid.indexOf('week')>-1)w=Math.max(66,Math.floor(jQuery(this).width()/7)-3); if(w!=0)if(w<-1){s1+=" width:"+(-w)+"%;";}else{s1+=" width:"+w+"px;";} if(hh!=0)if(hh<-1){s1+=" height:"+(-hh)+"%;";}else{s1+=" height:"+hh+"px;";} var z=json.z||0; var y=json.y||0; var x=json.x||0; var s = json.s || 0; var op = json.op || 1; var marg=json.marg||0; var class0=json.class0||''; var class1=json.class1||''; var class2=json.class2||''; if((class0+' '+class1+' '+class2).indexOf('_')>-1){ jQuery.each((class0+' '+class1+' '+class2).split(' '),function(i,n){ jQuery().recss(n); }); } var maxi=-2; if(json.maxi!=undefined)maxi=json.maxi; var cxy=json.cxy||''; var yclass0=class0.replace(/x_/gi,"y_"); var yclass1=class1.replace(/x_/gi,"y_"); var yclass2=class2.replace(/x_/gi,"y_"); if(z>0||z<-2){ if(x<0 && y<0){ s1+="right:"+(-(x+1))+((x+'').indexOf('%')>0?"":"px")+";bottom:"+(y+1)+((y+'').indexOf('%')>0?"":"px")+";"; }else{ s1+="left:"+x+((x+'').indexOf('%')>0?"":"px")+";top:"+y+((y+'').indexOf('%')>0?"":"px")+";"; } s1+="z-index:"+z+";position:absolute;"; }else{ if(z!=0)s1+="float:"+(z==-1?"left":"right")+";"; s1 += "position:relative;"; } var padd=json.padd||0; if(padd>0) s1+="padding:"+padd+"px;"; if(padd<0) s1+="margin-right:"+padd+"px;"; if(marg)s1+="margin:"+marg+"px;"; if(class1){ if(class1.indexOf('topc')>-1){s1+="padding-top:27px;";} if(class1.indexOf('top2c')>-1){s1+="padding-top:23px;";} if(class1.indexOf('top')==-1){s1+="padding-left:27px;";} if(class1.indexOf('_check_radio')>-1){ class1=json.ncheck==1?class1.replace(/_check_radio/,"_radio"):class1.replace(/_check_radio/,"_check"); } } if (op != 1) { s1 += "alpha(opacity = " + 100 * op + ");opacity:" + op + ";" }; var idx=0; if(json.cret=='append'){idx=this.children('[id^="'+cid+'"]').length;} var sfunc=json.cfun||''; var tgt=''; var shref=''; if(sfunc.indexOf('[')==0){ if(cid.indexOf("aa")==0)tag="a"; tgt=sfunc.split(']')[0].substring(1); shref=sfunc.split(']')[1]; if(windowjs||jQuery().getv('aid','')!=''){}else{ if(tgt.indexOf("_")!=0 )if(document.getElementById(tgt)==null)tgt="_blank"; shref=shref.replace('file:\/\/\/sdcard\/.cyt7\/','http:\/\/'+window.domain+"\/") } } var sclicktt=jqueryex.sclick; if(cxy!="")sclicktt="onclick"; var ifignore=0; jQuery.each(stra,function(i,n){ if(ifignore==0){ var nclass0=class0;nclass1=class1;nclass2=class2; if(json.checksj){ if(json.checksj.all[i]){ nclass0=yclass0;nclass1=yclass1;nclass2=yclass2;} } if(class0.indexOf('{')>-1){ fieldn=	class0.split('{')[1].split('}')[0]; var reg=new RegExp("{"+fieldn+"}","g"); nclass0=nclass0.replace(reg,n[fieldn]); } if(nclass0.indexOf('rr')>-1){ if(idx==0)nclass0=nclass0.replace(/rr/gi,"r"); if(nclass0.indexOf('rr5t')>-1){ if(idx==stra.length-1)nclass0=nclass0+(z==-1?" r5tr":" r5tl"); }else{ if(idx==stra.length-1)nclass0=nclass0+(z==-1?" r5r":" r5l"); } } if(idx==stra.length-1)nclass0=nclass0.replace(/nr/gi,"").replace(/nl/gi,""); var s2="",sattr=''; var na=(typeof(n)=="string")?n.split('|'):(typeof(n)=="number")?(i+'['+n+']').split('|'):n; var ncid=cid+'_'+i; var strtemp='<'+tag+' id="'+ncid+'" i="'+i+'" '; var na0=(na[0]||na['inhtml']||'&nbsp;')+''; if(na0.indexOf('<bR>')>-1){ strtemp="<div style='height:"+json.h+"px;padding:"+(padd+1)+"px;' id=br_"+cid+"_"+idx+">"+na0+"</div>"; }else{ if(json.cta)sattr+=" t='"+json.cta+"' "; if(json.ccl)sattr+=" en='"+json.ccl+"' "; if(na.length>1||json.cfun){ if(!iftouch){sattr+=" onmouseover=\"jQuery(this).ccss(this,"+x+",'"+bg+"')\""; } na1=na[1]||''; if(sfunc||na1){ if(sfunc.indexOf('[')==0){ sshref=shref+(na.length>1?na[1]:(ifyh+i+ifyh)); if((windowjs||jQuery().getv('aid','')!='')&&lurl.indexOf('http:')!=0){ sattr+=" "+sclicktt+"=\"if(jQuery().funmd('"+ncid+"')){jqueryex.ifmd='"+ncid+"';window.js.httpurl('"+tgt+"','"+sshref +"');setTimeout('jqueryex.ifmd=0',500)}\""; }else{ sattr+=' target="'+tgt+ '" href="'+sshref+'"'; } } if((na1+'').indexOf('(')>0||sfunc.indexOf('(')>0) sattr+=" "+sclicktt+"=\"if(jQuery().funmd('"+ncid+"')){jQuery(this).mdown(event,this,"+json.ncheck+");"+((na1+'').indexOf('(')>0?na1:'')+";"+(sfunc.indexOf('[')==0?"":sfunc)+"}\" "; if(sclicktt=='onclick'&&jQuery().iftouch()) sattr+=" ontouchend=\"javascript:jQuery('#"+cid+"').attr('touchid','"+ncid+"');\" "; } s2+="cursor:pointer;"; }else{ s2+='cursor:default;'; } if(na.length>2&&na[2]!=''){ if(json.class1&&nclass0.indexOf(' 2 ')==-1){ nclass1=nclass1+" "+na[2]; }else{ nclass0=nclass0+" "+na[2]; } } var na3=''; if(na.length>3){ na3=na[3]; } if(na.length>4){ s2+=" background-image:url("+na[4]+");"; } if(bg.indexOf('-')>0){ na0=grid.rb(cid,i,bg,json.h,na0,class0); } if(bg.indexOf('x/')==0){ s2+=" background-image:url("+bg+imgext+");"; } if(class0.indexOf('numimg')>-1){ na0=jQuery().getnum(na0); } if(json.w||json.h){na0='<span id='+cid+'_'+i+'_0 class=b style="overflow:hidden;white-space: nowrap;'+(json.h>700?'height:100%;':'')+'">'+na0+'</span>'; }else{ na0='<span id='+cid+'_'+i+'_0>'+na0+'</span>'; } if(json.class1){sleft='<span id='+cid+'_'+i+'_1 class=" '+(nclass1.indexOf('ic_')==-1?'x_ic ':'')+nclass1+'" ></span>';} if(json.class2){sright='<span style="line-height:100%;'+(json.class2.indexOf('topl')>-1?"":"padding:2px;")+'" class="'+nclass2+'" id='+cid+'_'+i+'_2>'+na3+'</span>';} strtemp+=' class="'+nclass0+'" style="overflow:visible;'+s1+s2+'" '+sattr+' >'+sleft+na0+sright+"</"+tag+">"; } strdivs+=strtemp; if(s>0){ if(z==-1||z==-2){ strdivs+='<div style="width:'+json.s+'px;'+(json.h>0?"height:"+json.h+"px;":"")+' float:'+(z==-1?"left":"right")+'" id=s_'+cid+'_'+i+'>&nbsp;</div>'; } if(z==0){ strdivs+='<div style="height:'+json.s+'px;'+(json.w>0?"width:"+json.w+"px;":"")+'" id=s_'+cid+'_'+i+'></div>'; } } idx=idx+1; } if(maxi!=-2){if(maxi==i)ifignore=1;} }); if(jQuery(this).length>0){ if(json.cret=='html')if(this.html()!=strdivs)this.html(strdivs); if(json.cret=='append')this.append(strdivs); if(cxy.indexOf("x")==0 || cxy.indexOf("y")==0 ) jQuery(this).drags(cxy); jQuery(this).attr('n',idx); } return strdivs; }, funmd: function(did){ if(jqueryex.ifmd==did||jqueryex.ifmd=='msgb_0') return 0; return 1; }, drags:function(xy,func){ var oxy=xy; xy=xy.substring(0,1); var sp=0; var ssd=0; var lt=(xy=="x")?"left":"top"; var id=jQuery(this).attr('id'); var oldp=0; if(windowjs&&xy=="x"){ var tpix=jQuery("#"+id).offset()['top']; } jQuery(this).draggable({ axis: xy.substring(0,1), start: function(event, ui) { ssd = new Date().getTime(); sp=jQuery("#"+id).position()[lt]; oldp=jQuery("#"+id).vali(lt); if(jQuery(this).attr('dragf')!='')	jqueryex.dragpagex=event.pageX; }, drag:function(event, ui){ if(jqueryex.dragpagex!=0){ var jobj=jQuery('#'+jQuery(this).attr('dragf')); if(jobj.length>0){ if((event.pageX-jqueryex.dragpagex)>100){jqueryex.dragpagex=0;jobj.anim(jobj.vali()-1,1);} if((event.pageX-jqueryex.dragpagex)<-100){jqueryex.dragpagex=0;jobj.anim(jobj.vali()+1,1);} } } }, stop: function() { var esd = new Date().getTime(); var ep=jQuery("#"+id).position()[lt]; var touchid=jQuery('#'+id).attr('touchid'); var p=jQuery("#"+id).vali(lt); var v = (ep - sp)/(esd - ssd); if(Math.abs(v)>1 && Math.abs(ep - sp)>100)p-=Math.round(v*2); if(oldp==p){p=(v>0)?(p-1):(p+1)} var iffunc=1; if((esd - ssd)<150&&(Math.abs(ep - sp))<50&&jQuery('#'+touchid).length==1){ if(touchid.indexOf('_')>0)p=parseInt(touchid.split('_')[1]); }else{ if(ui.ui.all[id].cfun.indexOf('jpn()')==-1)iffunc=0; } jQuery("#"+id).anim(p,iffunc,lt,(oxy.indexOf('0')==1?2:0)); } }); }, anim:function(i,iffunc,lto,iftb){ var maxn=jQuery(this).son().length; if(i>maxn-1)i=maxn-1; if(i<0)i=0; if(iftb)if(i!=0&&i!=(maxn-1))return; var pw=jQuery(this).parent().width()*0.5; var jobj=jQuery(jQuery(this).son()[i]); var sw=(jobj.outerWidth()*0.5+ui.ui.all[jQuery(this).attr('id')].marg); var lt='top'; if(jobj.css('float')=='left'||jobj.css('float')=='right')lt='left'; if(lto)lt=lto; if(lt=='top'){ pw=jQuery(this).parent().height()*0.5; sw=(jobj.outerHeight()*0.5+ui.ui.all[jQuery(this).attr('id')].marg); } var ixy=jobj.position()[lt]; if(Math.round(pw/sw)%2==0)ixy=ixy-sw; var ltpx=pw-ixy-sw; var jobjmax=jQuery(jQuery(this).son()[maxn-1]); var maxnpx=jobjmax.position()[lt]+(lt=='top'?jobjmax.outerHeight():jobjmax.outerWidth()); if(ltpx<-( maxnpx )+1*pw)ltpx=-(maxnpx )+1*pw; if(ltpx>0) ltpx=0; ltpx=parseInt(ltpx); var aniJson=eval("({"+lt+":"+ltpx+"})"); if(iffunc){ jQuery(this).animate(aniJson,500,function(){ jobj.click(); }); }else{ jQuery(this).animate(aniJson,500); } }, alphable: function (op) { jQuery(this).animate({ opacity: op }, 0); }, cls:function(clas){ clas=clas||'mishu'; jQuery('#mishudiv,#msgdiv,#guide'+clas).hide(); setTimeout(function(){ jQuery('#divzhezao,#divzhezao1,#divzhezao2,#divzhezao3,#divdianwo').hide(); },100); }, gettx:function(cidus,usid,ifurl,ifr,w){ if(cidus==db.idus&&usid>1000)cidus=usid; var pathd=Math.floor(cidus/1000); var oidvs=db.sj.vs.all[cidus]; var w=w||50; if(oidvs){ if(oidvs.ps>0){ str= 'url(http:\/\/' + domain +'/pg/us/'+pathd+'/'+cidus+'.png) no-repeat center'; if(galx==9)str= 'url(http:\/\/' + domain +'/pg/us/'+pathd+'/'+cidus+'.png) no-repeat center'; }else{ str= 'url('+(imgp)+'face'+oidvs.sex+oidvs.role+'.png) no-repeat center'; if(galx==9)str='url('+(imgp)+'testtx.png) no-repeat center'; } if(ifurl)return str; if(galx==9){ return '<div class="r5 x_gray" onclick="ga.showUserInfo()" id="'+cidus+'" style="background: '+str+';width: 100%;height: 0px;border-radius: 50%;background-size: contain;padding-bottom: 100%;"></div>'; }else{ return '<div class="'+((cidus==db.idus&&ifr)?'fright':'fleft')+' r5 x_gray fleft" onclick=xxex_go('+cidus+') id=pp'+cidus+' style="border:1px solid #fff;background:'+str+';width:'+w+'px;height:'+w+'px;"></div>'; } } return ''; }, jaler: function (res, topy, btn, ifgb, clas, json) { var cjson=json||{}; var cbdcol=cjson.bdcol||"",cembg=cjson.embg||""; if (btn) if (btn != '' && btn.indexOf('javascript') == -1) { btn = jQuery().ui({ "cid": "tempbtn",w:130,h:36, ca: btn,class0:'_f_18__200 cent _r_5__ff7878_1 x_c_rede',cxy:'1' }); } if (clas == 0) { var msg=''; if(galx==8)msg+='<div id="divalertop" style="position: fixed;z-index: 999;left: 50%;top:0px;margin-left: -270px; height: 68px; background-color: rgb(241, 91, 92);width: 540px;"><div style="border-radius: 50%; width: 100px; height: 90px; position: absolute; left: 220px; top: 2px; background-color: rgb(241, 91, 92);"></div><span onClick="jQuery(\'#guide'+clas+'\').hide()" style="position:absolute;left:20px;top:17px;background-image:url(/css8/p-btn.png?1);width:89px;height:30px;background-size:100%;'+(ifgb?'':'display:none;')+'"></span><span id="backht" onClick="backht()" style="position:absolute;right:15px;top:3px;width:60px;height:60px;cursor: pointer;display:none;" class="yaheif f27"><img src="/css8/61c-houtai.png" width="100%"/></span></div><div id="divalertopb" style="height:80px;width:0px;"></div>'; msg += res + (btn ? '<div style="clear:both;height:45px;width:' + (btn.split('mdown').length > 2 ? (btn.split('mdown').length > 3 ?324:284) : 145) + 'px">' + btn + '</div>' : ''); jQuery().getdiv('guide' + clas, null, '#fff', -jQuery().getcw(), jQuery().getch(), 0, 0, 99997, msg, '', 0); } else { jQuery().jalert(res + (btn ? '<div style="clear:both;height:45px;width:' + (btn.split('mdown').length > 2 ? (btn.split('mdown').length > 3 ?324:284) : 145) + 'px">' + btn + '</div>' : ''), null, { clas: clas || 'ggk', ifgb: ifgb, ifms: '-2', bdcol:cbdcol, embg:cembg,ifclick:1}, (jQuery().getcw() - (clas=="blackclas"?471:461)) * 0.5, jQuery(document).scrollTop() + (topy || (res.length < 300 ? 290 : 180))); } }, inpstyle: function(json){ var cjson = json || {}; var sw = cjson.w || 100; var sh = cjson.h || 36; var simg = cjson.img || ""; var stip = cjson.tip || ""; var sid = cjson.id || ""; var conid = cjson.conid || ""; var col = cjson.col || "#000"; var type = cjson.type || "text"; var clas = cjson.clas || ""; var clasinp = cjson.clasinp || ""; var evnt = cjson.evnt || "if(j(this).val()==\'"+stip+"\'){j(this).val(\'\')}"; var evnt1 = cjson.evnt1 || ""; var evnt2 = cjson.evnt2 || ""; var cproperty = cjson.cproperty || ""; var str = '<div class="'+clas+'" style="width:'+sw+'px;height:'+sh+'px;'+(simg!=""?"background-image:url("+simg+");":"")+'background-size: contain;"><'+(type=="textarea"?type:"input")+' id="'+sid+'" class="'+clasinp+'" type="'+type+'" '+cproperty+' onfocus="'+evnt+'" onchange="'+evnt1+'" onblur="'+evnt2+'" style="width:'+(sw*.95)+'px;height:'+(sh*.9)+'px;font-size: 16px;font-weight: bold;'+((simg==""&&clas=="")?"":"background:transparent;border: none;-webkit-border: none;outline: none;")+'color:'+col+'" value="'+stip+'"'+(type=="textarea"?">"+stip+"</textarea>":" />")+'</div>'; if(conid!=""){ j("#"+conid).html(str); }else{ return str; } }, jalert:function(msg,ifzz,json,xx,yy){ json=json||{}; msg=msg.replace(/erxxror/gi,'出错了'); var msgid=json.msgid||''; var ifgb=json.ifgb||1; var ifms=json.ifms||1; var clas=json.clas||(galx==7?'mishu':'ggk'); var titl=json.titl||''; var alerw=json.alerw||'433px'; var alerh=json.alerh||'100%'; var bdcol=json.bdcol||'#6B6B6B'; var embg=json.embg||'url(/css/opa11.png)'; var ifclick=json.ifclick||0; var strgb=""; var sfd=jQuery().cookie.get('bzxs'+msgid); if(sfd=='1')return; var x=xx||(jQuery().getsl()+(jQuery().getcw()-(clas=='mishu'?407:(clas=='blackclas'?470:461)))*0.5); if(xx==0) x=xx; var y=yy||(jQuery().getst()+(jQuery().getch()-173)*0.5); if(jQuery(this).length>0){ jQuery().zhezao(jQuery(this).attr('id')); x=jQuery(this).mtx()+jQuery(this).width()-130; y=jQuery(this).mty()+jQuery(this).height()-130; if(y>420)y=jQuery(this).mty()-360; if(x>100)x=100; } if(ifzz)jQuery().zhezao('1'); if(ifgb==1){ ui.ui.all['msgb'].cfun="jQuery().stoppp();jQuery().cls('"+clas+"');"; if(json.gbfun)ui.ui.all['msgb'].cfun+=json.gbfun; strgb='<div style="width:3px;'+((clas!="mishu")?"margin-top:-45px":"margin-top:-35px")+';overflow:visible">'+jQuery().ui({ca: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||x_btnclose"+clas,ccl: "",cfun: ui.ui.all['msgb'].cfun,checksj: "",cid: "msgb",class0: "x_noy",ftxt: 0,h: 54,w: 60,z: -2,cxy:(ifclick==1?"-2":"")})+'</div>'; } var did='msgdiv'; if(clas!='mishu') did='msgdiv_'+clas; var fons=json.fons||'yaheif wei18'; var titlcol=json.titlcol||'#fff'; if(clas=='ggk') fons='f22 cent'; if(clas=='ui3b') { fons='f22 cent'; titlcol='#ff7878'; } if(clas=='emp'){ msg='<div id="'+did+'" style="width:'+alerw+';height:'+alerh+';background:'+embg+';border:4px solid '+bdcol+';-webkit-border:4px solid '+bdcol+';border-radius:10px;-webkit-border-radius:10px;color:'+titlcol+';padding:41px 10px 20px;position:relative;background-size: cover;">'+(ifgb==1?"<div class='cent' style='position:absolute;top:0px;right:8px;width:60px;height:50px;cursor: pointer;font-weight: bold;color:#FF5454;font-size: 35px;' "+(ifclick==1?"onclick":sclick)+"=j().cls('emp')>ㄨ</div>":"")+'<div style="font-size:20px;margin-top:-27px;" class="cent">'+titl+'</div><div id="msg_'+clas+'" style="min-width: 240px;" class="cent">'+msg+'</div></div>'; }else{ msg='<div id='+did+' style="position:absolute; line-height:20%"><div class="cent yaheif _f_20" style="margin-bottom:-48px;z-indexof:1;position:relative;color:'+titlcol+'">'+titl+'</div><img src="'+imgp+clas+'top.png" style="top:1px;position:relative;"><table width="'+(navig.ie?'480px':'100%')+'" border="0" cellspacing="0" cellpadding="0"><tr><td width=4px style="background:url('+imgp+clas+'kl.png) 0%;"></td><td style="background:url('+imgp+clas+'.jpg) " ><div id=msg_'+clas+' style="min-width: 240px;" class="'+fons+' ">'+msg+'</div></td><td style="background:url('+imgp+clas+'kr.png) 100%;" width=4px valign=top>'+strgb+'</td></tr></table><img src="'+imgp+clas+'bot.png"></div>'; } var yjh=33; if(ifms==1){ var fse='1'; var yj='<div id=yanjing style="background:url('+imgp+'kp/xs07.png);margin-top:80px;margin-left:97px;height:33px;width:53px;"></div>'; if(db.vs)if(db.vs.all[db.idus])if(db.vs.all[db.idus].sex==0){ fse='';yjh=25; yj='<div id=yanjing style="background:url('+imgp+'kp/xs08.png);margin-top:37px;overflow:hidden;margin-left:85px;height:25px;width:48px;"></div>'; } if(galx!=7)yj=''; msg='<div id=mishudiv class="mishu'+fse+'" style="position:absolute;margin-left:105px;margin-top:-58px;" >'+yj+'</div><div style="position:absolute;top:230px;">'+msg+'</div>'; } var z=99999; jQuery().getdiv('guide'+clas,null,'',407,0,x,y,z,msg,'',0); if(json.jobj)json.jobj.appendTo("#msg_"+clas); }, vali:function(lt){ lt=lt||'left'; var pw=jQuery(this).parent().width()*0.5; if(lt=='top'){ pw=jQuery(this).parent().height()*0.5; } var ixy=jQuery(this).position()[lt]; var marg=ui.ui.all[jQuery(this).attr('id')].marg; if(ixy>pw&&ixy<2*pw) return -1; var jsobj= jQuery(this).children('[id^="'+jQuery(this).attr('id')+'"]'); var jg=jsobj.length; jsobj.each(function(i,n){ var dtemp=jQuery(this).position()[lt]; var sw=jQuery(this).outerWidth(); if(lt=='top'){ sw=jQuery(this).outerHeight(); } if(Math.round(pw*2/sw)%2==0){ if((dtemp+ixy<=pw+sw*0.5+marg)) jg= i; }else{ if((dtemp+ixy<=pw)) jg= i; } }); return jg; }, stoppp:function(e){ var evt = e|| window.event; if(evt) evt.stopPropagation ?evt.stopPropagation() : (evt.cancelBubble=true); }, ccss:function(obj,cx,bg){ var classno=obj.className,bg=bg||''; if(classno.indexOf('-noz')>-1){return;} if(classno.indexOf('x_')>-1){ obj.className=obj.className.replace(/x_/gi,"z_"); var jobjs=jQuery(obj).children(); jobjs.each(function(){ this.className=this.className.replace(/x_/gi,"z_"); }); obj.onmouseout=function(){ if(this.className.indexOf('y_')==-1)this.className=this.className.replace(/z_/gi,"x_"); jobjs.each(function(){ if(this.className.indexOf('y_')==-1)this.className=this.className.replace(/z_/gi,"x_"); }); } } }, jgrepa:function(fn,fv,ret,fn2,fv2,fn3,fv3,fn4,fv4){ return this.jgrep(fn,fv,ret,fn2,fv2,fn3,fv3,fn4,fv4).split(','); }, topr:function(n){ var rn=0; var retn=this[0]; if(this[0].sx){ if(this[0].sx[n]==0){ retn= this[0]['d']||{}; }else{ retn= this[0][this[0].sx[n]];} }else{ j.each(this[0],function(iii,nnn){ if(rn==n){retn=nnn;} rn++ }); } return retn; }, jsortj:function ( sk, st) { var arrJson = new Array(); j.each(this[0], function (k, v) { arrJson.push(v); if(v['id']==undefined)v['id']=k; }); function AscSort(n1, n2) { return n1[sk] == n2[sk] ? 0 : (n1[sk] > n2[sk] ? 1 : -1); }; function DescSort(n1, n2) { return n1[sk] == n2[sk] ? 0 : (n1[sk] > n2[sk] ?-1: 1 ); }; if (st == 0) { arrJson= arrJson.sort(AscSort); } else { arrJson= arrJson.sort(DescSort); } var sxArr=[]; for(var i=0;i<arrJson.length;i++){ sxArr.push(arrJson[i].id); } this[0].sx=sxArr; }, jsort:function (sk, st) { function AscSort(n1, n2) { return n1[sk] == n2[sk] ? 0 : (n1[sk] > n2[sk] ? 1 : -1); }; function DescSort(n1, n2) { return n1[sk] == n2[sk] ? 0 : (n1[sk] > n2[sk] ? -1 : 1); }; if (st == 0) { return this.sort(AscSort); } else { return this.sort(DescSort); } }, jjoin:function(ja,jb){ var retjson={}; jQuery.each(ja,function(iii,nnn){ retjson[iii]=nnn; }); j.each(jb,function(iii,nnn){ retjson[iii]=nnn; }); retjson['sx']=ja.sx.concat(jb.sx); return retjson; }, ifequ:function(njson,fn,fv){ if(njson[fn]==fv){ if(njson[fn]===""&&fv==0){ return 0; }else{ return 1; } } fv=(fv+''); if(fv.indexOf('>')==0||fv.indexOf('<')==0||fv.indexOf('!')==0){ if(eval(njson[fn]+''+fv)){return 1;}else{return 0;} } if(fn==fv)return 1; return 0; }, jgrep:function(fn,fv,ret,fn2,fv2,fn3,fv3,fn4,fv4){ var str="";renumb=0; var retjson={}; j.each(this[0],function(iii,nnn){ var f2=1; var f3=1; var f4=1; if(fn2)if(jQuery().ifequ(nnn,fn2,fv2)==0)f2=0; if(fn3)if(jQuery().ifequ(nnn,fn3,fv3)==0)f3=0; if(fn4)if(jQuery().ifequ(nnn,fn4,fv4)==0)f4=0; if(jQuery().ifequ(nnn,fn,fv)&&f2&&f3&&f4){ if(ret){ if(ret=='json0'){ retjson= nnn; return false; }else if(ret=='json'){ retjson[iii]=nnn; if(retjson['sx']==null)retjson['sx']=[]; retjson['sx'].push(iii); }else{ if(typeof(nnn[ret])=='number'){renumb=renumb+nnn[ret]} str+=','+nnn[ret]; } }else{ str+=','+iii; } } }); if(ret=='json'||ret=='json0'){ return retjson; } return renumb+str; }, ifcheck:function(){ if(this.attr('class').indexOf('y_')>-1)return 1; return 0; }, mdown:function(e,obj,ncheck){ jqueryex.ifmd=jQuery(obj).attr('id'); setTimeout('jqueryex.ifmd=0',500); var classno=obj.className;this.blur(); ncheck=ncheck||(classno.indexOf('radio')>-1?1:99); if(ncheck==-1)return; if(jQuery(obj).attr('menuqx')=='no'){ alert('您无权使用本功能！');return;} if(jQuery().mye(e).button==2){ document.oncontextmenu=function(){return false;}; if(obj.title=='')return; } var cobjid=this.parent().children('[class*="y_"]').vale('id'); if(ncheck==1||ncheck==-2){ if(cobjid!='')jQuery('#'+cobjid).uncheckd(); this.checkd(); } if(ncheck==-2){ setTimeout(function(){ var cobjid=jQuery(obj).parent().children('[class*="y_"]').vale('id'); jQuery('#'+cobjid).uncheckd();},500); } if(ncheck>1){ if(obj.className.indexOf('y_')>-1){ this.uncheckd(); }else{ if(cobjid.split(',').length>=ncheck){j().jalert('最多只能选择'+ncheck+'个！');return;} this.checkd(); } } }, uncheckd:function(){ if(this.attr('class'))this.attr('class',this.attr('class').replace(/y_/gi,"x_").replace(/z_/gi,"x_")); this.find("[class*='_']").each(function(){ this.className=this.className.replace(/y_/gi,"x_").replace(/z_/gi,"x_"); }); }, checkd:function(){ var oclass=this.attr('class'); if(oclass){ if(oclass.indexOf('_noy')>-1){ this.attr('class',this.attr('class').replace(/x_/gi,"z_")); this.attr('class',this.attr('class').replace("x_noy","y_noy").replace("z_noy","y_noy")); this.find("[class*='_']").each(function(){ this.className=this.className.replace("x_noy","y_noy").replace("z_noy","y_noy").replace(/x_/gi,"z_"); }); }else{ this.attr('class',this.attr('class').replace(/z_/gi,"y_").replace(/x_/gi,"y_")); this.find("[class*='_']").each(function(){ this.className=this.className.replace(/z_/gi,"y_").replace(/x_/gi,"y_"); }); } } }, week:function(s,bn,rn,cid){ var dat0=dat=new Date(db.gett()); if(s){ dat=new Date(parseFloat(s)); }else{s=dat.getTime()} var bd=dat; if(bn){bd=new Date((parseFloat(s)+bn*7*24*3600*1000)); }else{ bd=new Date((parseFloat(s)-(dat.getDate()+7)*24*3600*1000)); } var day=bd.getDay(); var bs=0,es=0; var cajson={}; var sf=-1; for(var r=1;r<rn;r++){ for(var i=0;i<7; i++){ var news=bd.getTime()-(day-i-7*r)*24*3600*1000; var cd=new Date(news); var strd=cd.getFullYear()+'-'+(cd.getMonth()+1)+'-'+cd.getDate(); if(es==0)bs=news-24*3600*1000; es=news+24*3600*1000; strc=""; if(cd.getFullYear()==dat.getFullYear()&&cd.getMonth()==dat.getMonth()){ if(cd.getDate()==dat.getDate()){ strc=(galx==9?"hd hdlk hdtbx":'hd hdlk yaheif'); }else{ strc=(galx==9?"hdtbx":'yaheif'); } sf=0; }else{ if (sf == 0) sf = 1; strc = 'hdtb'; } var na0=cd.getDate(); cajson[strd]=[na0,'jQuery(this).dclk(\''+news+'\',\''+cid+'\','+rn+','+sf+')',strc]; } } if(es!=0)jQuery('#'+cid).attr('bs',bs).attr('es',es); return cajson; }, dclk:function(s,cid,rn,sf){ ui.ui.all[cid].ca=jQuery('#').week(s,null,rn,cid); var dat=new Date(parseFloat(s)); var sdat=dat.getFullYear()+'-'+(dat.getMonth()+1)+'-'; var firstd=jQuery('#'+cid).children()[0]; var curm=parseInt(jQuery('#'+cid).attr('month')); if(curm!=dat.getMonth()+1){ jQuery('#'+cid).children('.x_yellow,.z_yellow').removeClass('x_yellow').removeClass('z_yellow'); } var mfd=0; if(sf!=-1)mfd=jQuery('[i="'+sdat+'1"]').offset().top-jQuery(firstd).offset().top-jQuery(firstd).height(); if(sf==0){ if(curm!=dat.getMonth()+1)jQuery('#'+cid).children('[i^="'+sdat+'"]').addClass('x_yellow'); jQuery("#"+cid).animate({'top':-mfd},400); }else{ jQuery('#'+cid).children('[i^="'+sdat+'"]').addClass('x_yellow'); } if(sf==-1){ jQuery('#'+cid).prepend(jQuery('#'+cid).geta(ui.ui.all[cid])); jQuery("#"+cid).css({'top':-jQuery(firstd).offset().top}); jQuery("#"+cid).animate({'top':0},400,function(){ }); } if(sf==1){ jQuery('#'+cid).append(jQuery('#'+cid).geta(ui.ui.all[cid])); jQuery("#"+cid).animate({'top':-mfd},400,function(){ }); } jQuery('#'+cid).attr('month',(dat.getMonth()+1)); this.checkd(); }, fix:function(p){ if(this.length!=1)return false; var d = document, dd = d.documentElement, db = d.body, w = window, o = jQuery(this).get(0), ie6 = /msie 6/i.test(navigator.userAgent), style, timer; if (o) { cssPub = ";position:fixed;"+(p.t!=undefined?'top:'+p.t+'px;':'bottom:0;'); if (p.r != undefined && p.l == undefined) { o.style.cssText += cssPub + ('right:'+p.r+'px;'); if(o.style.left!=null)o.style.left=null; } else { o.style.cssText += cssPub + ('left:'+p.l+'px;'); } } }, showa:function(){ jQuery(this).css('width','240px').show(); if(document.getElementById('ltd3')==null)return; var wt=26; if(document.getElementById('ltd1').style.display!='none')wt+=240; if(document.getElementById('ltd2').style.display!='none')wt+=240; if(document.getElementById('ltd3').style.display!='none'){wt+=280; if(tk.cityxn>2)wt+=220; } jQuery('#rtable').css({'width':wt+'px'}); jQuery('#rtable').fix({ r:0, t:49, f:1}); }, hidea:function(){ var wt=26; jQuery(this).css({width:'0px'}).hide(); jQuery('#rtable').css({'width':wt+'px'}); jQuery('#rtable').fix({ r:0, t:49, f:1}); }, vale:function(attrn,c,sep){ if(this.length==0)return ''; if(this.length>1){ var se=''; var sen=0; this.each(function(){if(attrn){ if(c){ sen+=parseFloat(jQuery(this).attr(attrn));}else{ if(jQuery(this).attr(attrn))se+=(sep||',')+(jQuery(this).attr(attrn)); } }else{ se+=(sep||',')+jQuery(this).vale(); if(c){ sen+=parseFloat(jQuery(this).vale()); } } }); if(c)return sen; return se.substring(1); }else{ if(attrn)return this.attr(attrn); if(this.val()||this.is('input')||this.is('textarea')){ var d=this.val(); if(this.attr('v')){d=this.attr('v');} return jQuery.trim(d); }else{ return this.html(); }; } }, mtsetid:function(){ if(jQuery(this).attr('id')==''){ var tid='mt'+(Math.random()*99999999+'').split('.')[0]; jQuery(this).attr('id',tid); } return jQuery(this).attr('id'); }, mtx:function(){ return jQuery(this).offset().left; }, mty:function(){ return jQuery(this).offset().top; }, mtxr:function(){ return jQuery(this).offset().left+jQuery(this).outerWidth(); }, mtyb:function(){ return jQuery(this).offset().top+jQuery(this).outerHeight(); }, heightsum:function(){ var w=0; jQuery(this).children().each(function(){ w+=jQuery(this).outerHeight(); }); return w; }, widthsum:function(){ var w=0; jQuery(this).children().each(function(){ w+=jQuery(this).outerWidth(); }); return w; }, delev:function(strv,strd){ var s=""; j.each(strv.split("，"),function(i,n){ if(n!=strd) s+="，"+n; }); if(s!='')s=s.substring(1); return s; }, getv:function(name,mrz,source) { var shref=source||(window.location+"").replace(/;amp;/g,'&'); if(shref.indexOf(name+'=')==-1&&jQuery('#jg-0').attr('uri')){ shref=jQuery('#jg-0').attr('uri'); } shref=shref.replace(/&amp;/gi,'&'); if(shref.indexOf('#')>0){ var shrefa=shref.split('#'); if(shrefa[1].indexOf('=')==-1)shref=shrefa[0]; if(shref.indexOf('#rd')>0)shref=shref.replace(/#rd/g,"&"); } var reg = new RegExp("(^|\\?|&)"+ name +"=([^&]*)(\\s|&|$)", "i"); if (reg.test(shref)){ress=RegExp.$2;if(ress!=""&&ress!="null"&&ress!='undefined') return RegExp.$2; } return mrz; }, getas:function(n,uictn){ ui.ui.all[uictn].ca=''; for (var i = 0; i < n; i++) { ui.ui.all[uictn].ca+=(i>0?'`||':'||'); } return	jQuery().geta(ui.ui.all[uictn]); }, getnum:function(n,marg1,marg2){ var cmarg1=marg1||18; var cmarg2=marg2||-5; var cnum = n + ""; var strt=''; for (var i = 0; i < cnum.length; i++) { var nums = cnum.charAt(i); strt+=('<span class="num num' + nums + ' fleft" style="margin-left:'+(i>0?cmarg2:(cnum.length==2?0:cmarg1))+'px;"></span>'); } return strt; }, getUrl:function(refername,v,source) { var shref=window.location+''; if(source) shref=source; if(refername.indexOf("||")>0){ refernamea=refername.split("||"); shref=refernamea[0]; refername=refernamea[1]; } myArray = refername.split(","); vArray = (v+'').split(","); if(myArray.length==1){vArray[0]=v} jQuery.each(myArray,function(i,n){ var bc = shref.indexOf(n+"="); if (bc > 0){ band =shref.indexOf("&", bc) ; shref = shref.substring(0, bc) + n + "=" + vArray[i] + (band>0?shref.substring(band, shref.length):""); }else{ var jh=''; if(shref.indexOf('#')>-1){var shrefa=shref.split('#'); shref=shrefa[0]; jh='#'+shrefa[1];} shref += (shref.indexOf("?") > -1?"&":"?") + n + "=" + vArray[i]+jh; } }); return shref; }, getcw:function(){ var rv=document.documentElement.clientWidth; return rv; }, getcwd:function(){ var rv=Math.min(540,j().getcw()); return rv; }, getSM:function(typ){ var w=j().getcwd(); if(j().isMobile()||w<540){ if(typ==1){ return cc.ResolutionPolicy.FIXED_HEIGHT; }else if(typ==2){ return egret.StageScaleMode.SHOW_ALL; } }else{ if(typ==1){ return cc.ResolutionPolicy.FIXED_HEIGHT; }else if(typ==2){ return egret.StageScaleMode.SHOW_ALL; } } }, getch:function(){return document.documentElement.clientHeight;}, getsl:function(){return jQuery(document).scrollLeft();}, getst:function(){return jQuery(document).scrollTop();}, strzm:'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789', eachs:function(func){ var id=jQuery(this).attr('id'); if(func!=undefined)jQuery(this).children('[id^="'+id+'_"]').each(func); return jQuery(this).children('[id^="'+id+'_"]'); }, son:function(){ var id=jQuery(this).attr('id'); return jQuery(this).children('[id^="'+id+'_"]'); }, sson:function(){ var id=jQuery(this).attr('id'); return jQuery(this).children('[id^="s_'+id+'_"]'); }, son0:function(){ var id=jQuery(this).attr('id'); return jQuery(this).son().children('[id^="'+id+'_"][id$="_0"]'); }, son1:function(){ var id=jQuery(this).attr('id'); return jQuery(this).son().children('[id^="'+id+'_"][id$="_1"]'); }, son2:function(){ var id=jQuery(this).attr('id'); return jQuery(this).son().children('[id^="'+id+'_"][id$="_2"]'); }, chdate:function(sdate){ var newsdate=sdate.replace(/-0/gi,'-'); var da1=newsdate.split(/[-\s:]/); if(da1.length>3){ if(da1.length>5){ return new Date(da1[0],parseInt(da1[1])-1,da1[2],da1[3],da1[4],da1[5]); }else{ return new Date(da1[0],parseInt(da1[1])-1,da1[2],da1[3],da1[4],"00"); } }else{ return new Date(da1[0],parseInt(da1[1])-1,da1[2],"00","00","00"); } }, datedel:function(sdate,s){ var dat= new Date(Date.parse(jQuery().chdate(sdate))-s*1000); return dat.getFullYear()+'-'+(dat.getMonth()+1)+'-'+ dat.getDate(); }, getshenyu:function(sec, op){ var sec = Math.floor(sec); var op = op||0; if(op==0){ if(sec>60&&sec<3600)return Math.floor(sec/60)+'分'+(sec%60)+'秒'; if(sec>3600&&sec<3600*24)return Math.floor(sec/3600)+'小时'+Math.floor((sec%3600)/60)+'分'; if(sec>3600*24)return Math.floor(sec/(24*3600))+'天'+Math.floor((sec%(24*3600))/3600)+'小时'; return sec+'秒'; } if(op>0){ return Math.floor((sec)/3600)+'小时'+Math.floor((sec%3600)/60)+'分'+Math.floor(sec%60)+'秒'; } }, setRightBar:function(condiv, json){ var barJson = {1:{code:"0",url:"http:\/\/shang.qq.com/wpa/qunwpa?idkey=907dbc3457cd88c4555c8d1aa9197a1819f78bc2a4b8221a39a7f23e8b023b76",pic1:"/css/kx01.jpg",pic2:"/css/kxx01.jpg",func:"",id:"sidebar1"},2:{code:"1",url:"",pic1:"/css/kx02.jpg",pic2:"/css/kxx02.jpg",func:"",id:"sidebar2"},3:{code:"0",url:"http:\/\/tieba.baidu.com/f?kw=%E5%BC%80%E5%BF%83%E6%8E%A8&qq-pf-to=pcqq.c2c",pic1:"/css/kx03.jpg",pic2:"/css/kxx03.jpg",func:"",id:"sidebar3"},4:{code:"0",url:"",pic1:"/css/kx04.jpg",pic2:"/css/kxx04.jpg",func:"j('html,body').animate({scrollTop:0},600);",id:"sidebar4"}}; if(typeof(json)!="undefined"){ barJson = json; } var barStr = "<ul style='margin:0;padding:0;'>"; j.each(barJson,function(k, n){ if(n.code=="1"){ barStr += '<li class="sideBarli"><a style="height: 49px;float: right;display: block;min-width: 47px;max-width: 131px;" target="_blank" class="weixin" '+(n.url.length>0?'href="'+n.url+'"':'')+' '+(typeof(n.func)!="undefined"?('onclick='+n.func):'')+'><img id="'+n.id+'_1" width="47" height="49" class="b" style="float:right;"><img id="'+n.id+'_2" width="145" height="240" class="h" style="float: right; display: none;"></a></li>'; }else{ barStr += '<li class="sideBarli"><a style="height: 49px;float: right;display: block;min-width: 47px;max-width: 131px;" target="_blank" '+(n.url.length>0?'href="'+n.url+'"':'')+' '+(typeof(n.func)!="undefined"?('onclick='+n.func):'')+'><img id="'+n.id+'_1" width="131" height="49" class="h" style="margin-right: -143px; float: right; display: none;"><img id="'+n.id+'_2" width="47" height="49" class="b" style="float: right; display: block;"></a></li>'; } }); barStr += "</ul>"; j("#"+condiv).html(barStr); j("#"+condiv+" a").hover(function(){ if(j(this).prop("className")=="weixin"){ j(this).children("img.h").show(); }else{ j(this).children("img.h").show(); j(this).children("img.b").hide(); j(this).children("img.h").animate({marginRight:'0px'},'slow'); } },function(){ if(j(this).prop("className")=="weixin"){ j(this).children("img.h").hide('slow'); }else{ j(this).children("img.h").animate({marginRight:'-143px'},'slow',function(){j(this).hide();j(this).next("img.b").show();}); } }); }, setRightService:function(){ var curtime=db.gett(); var today=curtime-(curtime%86400000); var is911=((today+36000000)<curtime&&(today+54000000)>curtime)?1:0; var serviceStr = '<div id="serviceBox" class="service-box" style="font-size: 14px; width: 180px;position: fixed;top: 50%;margin-top: -270px; right: -180px;z-index: 214748364643;transition:right 1s;-webkit-transition: right 1s; text-align: center;background: #fff;box-shadow: inset 0px 0px 4px #999;box-sizing: border-box;padding:20px 20px;">'+ '<div id="btnService" class="btn-consult" style="cursor: pointer; width: 40px;height: 120px;background: #fff;box-sizing: border-box;box-shadow: inset 0px 0px 2px #999 ;color: #f39800;position: absolute;left: -40px;top:0;">'+ '<p style="font-size:14px;line-height:20px; text-align: center;width: 20px;margin: 6px 0 0 10px;">在线咨询</p>'+ '<i class="arrow-left" style="position: absolute;left: 15px;bottom: 10px;width:0; height:0; border-top:8px solid transparent;border-bottom:8px solid transparent; border-right:8px solid #f39800;"></i>'+ '</div>'+ '<div id="btnService2" class="btn-consult" style="cursor: pointer; width: 40px;height: 120px;background: #fff;box-sizing: border-box;box-shadow: inset 0px 0px 2px #999 ;color: #f39800;position: absolute;left: -40px;top:130px;">'+ '<p style="font-size:14px;line-height:19px; text-align: center;width: 20px;margin: 2px 0 0 10px;">付费定制服务</p>'+ '</div>'+ '<div id="detail1" class="h1"><img src="img/ico-dh.png"><br>'+ '<p style="font-size:14px;background: #fff;color: #f39800;line-height: 30px;height: 30px;margin: 3px 0;">&nbsp;'+(is911?"18818804183":"020-28133830")+'&nbsp;</p>'+ '<p style="font-size:14px;color: #f39800;margin: 3px 0;">09:00~23:00</p><br>'+ '<p style="font-size:14px;background: #fff;color: #f39800;line-height: 30px;height: 30px;margin: 3px 0;">QQ：1452668373</p>'+ '<p style="font-size:14px;background: #fff;color: #f39800;line-height: 30px;height: 30px;margin: 3px 0;">QQ：568427768</p>'+ '<br>'+ '<a style="font-size:14px;display: inline-block;width: 100%;height: 30px;line-height: 30px;background: #f39800;color: #fff;margin-top: 10px;" class="btn-service" target="_blank" href="http:\/\/jingyan.baidu.com\/article\/63f2362820e7120208ab3de7.html?qq-pf-to=pcqq.c2c">制作教程</a>'+ '<div class="serviceCode"></div></div>'+ '<div id="detail2" class="h1"><img src="img/ico-dh.png"><br>'+ '<p style="font-size:14px;background: #fff;color: #f39800;line-height: 30px;height: 30px;margin: 3px 0;">'+(is911?"18818804183":"020-28133830")+'</p><br>'+ '<p style="margin-top: 10px;"><img src="img/ico-qq.png"></p>'+ '<p style="font-size:14px;background: #fff;color: #f39800;line-height: 30px;margin: 3px 0;">QQ：1452668373<br>QQ：568427768<br>QQ：2778940123<br></p>'+ '</div>'+ '</div>'; j("body").append(serviceStr); j("#btnService").click(function(){ if(j("#serviceBox").css("right")=="0px" && j("#detail1").css("display")!="none"){ j("#serviceBox").css("right","-180px"); }else{ j("#serviceBox").css("right","0px"); j("#detail1").show(); j("#detail2").hide(); } }); j("#btnService2").click(function(){ if(j("#serviceBox").css("right")=="0px" && j("#detail2").css("display")!="none"){ j("#serviceBox").css("right","-180px"); }else{ j("#serviceBox").css("right","0px"); j("#detail2").show(); j("#detail1").hide(); } }); }, gettimestamp:function(dt){ var dt = dt || j().getdatetime(); if(dt.indexOf("T", "")>-1) dt = dt.replace("T", " "); return new Date(dt).getTime(); }, getdatetime:function(s,msf,ifz){ var dta=new Date(); if(s){ if((s+'').length<9)s=dta.getTime()+s*1000; s=parseInt(s); dta=new Date(s); } var sss=''; if(msf)sss=':'+dta.getSeconds(); if(ifz){ return dta.getFullYear()+'-'+(dta.getMonth()+1)+'-'+ dta.getDate()+' '+dta.getHours()+':'+dta.getMinutes()+sss; } var month = dta.getMonth() + 1 < 10 ? "0" + (dta.getMonth() + 1) : dta.getMonth() + 1; var currentDate = dta.getDate() < 10 ? "0" + dta.getDate() : dta.getDate(); var currentHours = dta.getHours() < 10 ? "0" + dta.getHours() : dta.getHours(); var currentMinutes = dta.getMinutes() < 10 ? "0" + dta.getMinutes() : dta.getMinutes(); if(msf)sss = ':'+(dta.getSeconds() < 10 ? "0" + dta.getSeconds() : dta.getSeconds()); return dta.getFullYear() + "-" + month + "-" + currentDate+' '+currentHours+':'+currentMinutes+sss; }, getDayOfWeek:function(dt){ var dt=dt||db.gett(); return new Date(dt).getDay(); }, getWeekStartDate:function(dt){ var dt=dt||db.gett(); var dta=new Date(dt); if(dta.getDay()==0){ return new Date(dta.getFullYear(), dta.getMonth(), (dta.getDate()-7-dta.getDay())).getTime()+24*60*60*1000; }else{ return new Date(dta.getFullYear(), dta.getMonth(), (dta.getDate() - dta.getDay())).getTime()+24*60*60*1000; } }, getMonthStartDate:function(dt){ var dt=dt||db.gett(); var dta=new Date(dt); return new Date(dta.getFullYear(), dta.getMonth(),1).getTime(); }, getMonthEndDate:function(dt){ var dt=dt||db.gett(); var dta=new Date(dt); return new Date(dta.getFullYear(), dta.getMonth()+1,1).getTime()-24*60*60*1000; }, getWeekEndDate:function(dt){ var dt=dt||db.gett(); var dta=new Date(dt); if(dta.getDay()==0){ return new Date(dta.getFullYear(), dta.getMonth(), (dta.getDate()-dta.getDay())).getTime()+24*60*60*1000; }else{ return new Date(dta.getFullYear(), dta.getMonth(), (dta.getDate()+7-dta.getDay())).getTime()+24*60*60*1000; } }, getdatetimeago:function(ts,isdayd){ var nts = db.gett(); var dfts=nts-ts; if(dfts<0)return ""; var ye=dfts/(86400000*30*12); var mc=dfts/(86400000*30); var wc=dfts/(86400000*7); var dc=dfts/86400000; var hc=dfts/3600000; var mic=dfts/60000; var result=""; if(isdayd){ if(ye>=3){ result=parseInt(ye) + "周岁"; var v=dfts%(86400000*30*12)/(86400000*30); if(v>1){ result+=parseInt(v) + "个月"; } }else if(mc>1){ result=parseInt(mc) + "个月"; var v=dfts%(86400000*30)/(86400000); if(v>10){ result+=parseInt(v) + "天"; }else{ result+="零"+parseInt(v) + "天"; } } else{ if(dc>=1){ result="出生"+parseInt(dc) + "天"; }else{ result="0天"; } } }else{ if(mc>=1){ result=parseInt(mc) + "个月前"; } else if(wc>=1){ result= parseInt(wc) + "周前"; } else if(dc>=1){ result=parseInt(dc) +"天前"; } else if(hc>=1){ result=parseInt(hc) +"小时前"; } else if(mic>=1){ result=parseInt(mic) +"分钟前"; }else{ result="刚刚"; } } return result; }, mye:function(e){return e ? e: (window.event ? window.event : null);}, e$:function(e){return mye(e).srcElement ? mye(e).srcElement : mye(e).target;}, getex:function(e){return mye(e).clientX+getsl();}, getey:function(e){return mye(e).clientY+getst();}, getiframe:function(id,src,h){ h=h||'648px'; return '<iframe id='+id+' name='+id+' src="'+src+'" scrolling="no" frameborder="0" marginheight="0" marginwidth="0" style="width:100%; height:'+h+'" ></iframe>'; }, getdiv:function(divid,p,bg,w,h,xx,yy,z,innerh,classn,pad){ var newdiv; if(document.getElementById(divid)){ newdiv=document.getElementById(divid); }else{ newdiv= document.createElement("div"); newdiv.id=divid; if(p==null)document.body.appendChild(newdiv); } if(p!=null){if(newdiv.parentNode!=p)p.appendChild(newdiv);} with(newdiv.style){ if(w==0&&h==0){ overflow='visible'; }else{ if(w<0){w=-w;overflow='hidden';} if(w>0)width=w+'px'; if(h>0)height=h+'px'; } var position='absolute'; if(xx!=-1)left=xx+'px'; if(yy!=-1)top=yy+'px'; if(zIndex!=z)zIndex=z; if(pad>0)paddingTop=paddingLeft=pad+'px'; if(newdiv.innerHTML!=innerh&&innerh!='keep')newdiv.innerHTML=innerh; if(display=='none')display='block'; if(classn)newdiv.className=classn; bg=bg+''; if(bg!=""){ if(bg.substring(0,1)=="#"){ background=bg; }else{ if(bg.substring(0,1)!='_'&&bg.substring(0,1)!='-'){ backgroundImage='url('+imgp+bg+')'; }else{ backgroundImage='url('+imgp+'_'+bg.substring(1)+'.gif)'; newdiv.onmouseover=function(){ if(backgroundImage.indexOf('-')==-1)backgroundImage='url('+imgp+bg.substring(1)+'.png)'; this.onmouseout=function(){ if(backgroundImage.indexOf('-')==-1)backgroundImage='url('+imgp+'_'+bg.substring(1)+'.png)'; }; if(bg.substring(0,1)=='-'){ this.onmouseup=function(){ backgroundImage='url('+imgp+(backgroundImage.indexOf('-')>0?'_':'-')+bg.substring(1)+'.png)'; } } } } } } } return newdiv; }, zhezao:function(objid){ var w=Math.max(jQuery().getcw(),jQuery(document).width())-3; var h=Math.max(jQuery().getch(),jQuery(document).height()); var jobj=jQuery('#'+objid); if(jobj.length>0){ var skw=jobj.outerWidth();skh=jobj.outerHeight();skx=jobj.mtx();sky=jobj.mty(); if(skx<0||sky<0)return; if(skx==0)skx=1; jQuery().getdiv('divzhezao',null,'',w,sky,0,0,99990,'','opa11',0); jQuery().getdiv('divzhezao1',null,'',Math.max(1,w-skx-skw),skh,skx+skw,sky,99990,'','opa11',0); jQuery().getdiv('divzhezao2',null,'',w,Math.max(1,h-sky-skh),0,sky+skh,99990,'','opa11',0); jQuery().getdiv('divzhezao3',null,'',skx,skh,0,sky,99990,'','opa11',0); jQuery().getdiv('skdiv0',null,'#f00',skw,3,skx,sky,99990,'','opa11',0); jQuery().getdiv('skdiv2',null,'#f00',skw,3,skx,sky+skh-3,99990,'','opa11',0); jQuery('#divzhezao1').css('border-left','#f00 2px solid'); jQuery('#divzhezao3').css('border-right','#f00 2px solid'); }else{ if(objid=='1') jQuery().getdiv('divzhezao',null,'',w,h,0,0,99995,'','opa11',0,''); } }, anima:function (cid,x){ jQuery('#'+cid).css('display','block').addClass(x + ' animated').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){ jQuery(this).removeClass(x + ' animated'); }); }, unselect:function(tg){ if(tg){ jQuery("#"+tg).bind("contextmenu",function(){return false;}); jQuery("#"+tg).bind("selectstart",function(){return false;}); }else{ jQuery(document).bind("contextmenu",function(){return false;}); jQuery(document).bind("selectstart",function(){return false;}); } }, iftouch:function(){ var bool = "orientation" in window || "orientation" in window.screen || "mozOrientation" in window.screen || "ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch || "ontouchstart" in document.documentElement; if (bool) { bool = bool && this.isMobile(); } return bool || window.location.search.indexOf("touch") >= 0; }, resizeWinow:{ resizer:null, init:function(gjson){ var gjson={ el:gjson.el||"viewport2", delay:gjson.delay||50, bw:gjson.bw||480, bh:gjson.bh||800, }; this.resizer=new Resizer({ element:document.getElementById(gjson.el), delay: gjson.delay, baseWidth: gjson.bw, baseHeight: gjson.bh, onResize: function() { window.scrollTo(0, 1); } }); }, bind:function(el,evt){ var el=document.getElementById(el)||window; var evt=evt||"resize orientationchange"; var splits = evt.split(" "); for (var i in splits) { el.addEventListener(split[i], jQuery().resizeWinow.getDimensionsAndResize, false) } }, getDimensionsAndResize:function(){ var w = window.innerWidth; var h = window.innerHeight; if (jQuery().iftouch()) { w *= .85; h *= .85 } this.resizer.needsResize(w, h) } }, _agent:navigator.userAgent.toLowerCase(), isTizen:function(){ return this._agent.indexOf("tizen") >= 0; }, isWindowsMobile: function() { return this._agent.indexOf("windows") >= 0 && this._agent.indexOf("mobile") >= 0 || this._agent.indexOf("iemobile") >= 0; }, isIOS:function() { return this._agent.indexOf("ios") >= 0 || this._agent.indexOf("ipod") >= 0 || this._agent.indexOf("ipad") >= 0 || this._agent.indexOf("iphone") >= 0; }, isIPAD:function(){ return this._agent.indexOf("ipad") >= 0; }, isFirefoxOS:function() { return !this.isAndroid() && this._agent.indexOf("firefox") >= 0 && this._agent.indexOf("mobile") >= 0; }, isAndroid: function() { return this._agent.indexOf("android") >= 0; }, isMobile: function() { return this.isAndroid() || this.isFirefoxOS() || this.isWindowsMobile() || this.isIOS(); }, isWeixin:function(){ return (this._agent.match(/MicroMessenger/i)=="micromessenger"?true:false); }, isCardNo: function(code) { var city=[11,12,13,14,15,21,22,23,31,32,33,34,35,36,37,41,42,43,44,45,46,50,51,52,53,54,61,62,63,64,65,71,81,82,91]; var tip = ""; var pass= true; if(!code || !/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(code)){ pass = false; } else if(!city.indexOf(code.substr(0,2))){ pass = false; } else{ if(code.length == 18){ code = code.split(''); var factor = [ 7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2 ]; var parity = [ 1, 0, 'X', 9, 8, 7, 6, 5, 4, 3, 2 ]; var sum = 0; var ai = 0; var wi = 0; for (var i = 0; i < 17; i++) { ai = code[i]; wi = factor[i]; sum += ai * wi; } var last = parity[sum % 11]; if(parity[sum % 11] != code[17]){ pass =false; } } } return pass; }, IsMobileNum: function(text){ var _emp=/^\s*|\s*$/g; var text=text||""; text=text.replace(_emp,""); var _d=/^1(3[3])|(8[019])\d{8}$/; var _l=/^1(3[0-2]|5[56]|8[56]|4[5]|7[6])\d{8}$/; var _y=/^1(3[4-9]|5[012789]|8[23478]|4[7]|7[8])\d{8}$/; if(_d.test(text)){ return 3; }else if(_l.test(text)){ return 2; }else if(_y.test(text)){ return 1; } if(text.length==11){ if(text.indexOf("153")==0||text.indexOf("177")==0)return 3; } return 0; }, IsMobileNumSer:function(jsons){ var ctel=jsons.ctel||""; var iflx=jsons.lx||0; var cma=jsons.cma||""; if(ctel.length<7){ alert("手机号码不正确"); return; } var querCtel=ctel.substring(0,7); db.sajax("mobiles|mobilessp","all|all","cmb='"+querCtel+"'|mb="+querCtel+" or mb="+ctel,"",function(i,json){ var result=-1; var presult=-1; if(json['mobilessp']&&json['mobilessp'].a.maxr>0){ presult=json['mobilessp'].a.maxr; } if(json['mobiles']&&json['mobiles'].a.maxr>0){ var idmobile=json['mobiles'].all.sx[0]; var obj=json['mobiles'].all[idmobile]; if(cma!=""){ if(obj.cma.indexOf(cma)>-1){ result=1; }else{ result=0; } } if(iflx!=-1){ var newlx=0; var cmt=obj.cmt; if(cmt.indexOf("电信")>-1){ newlx=3; }else if(cmt.indexOf("联通")>-1){ newlx=2; }else if(cmt.indexOf("移动")>-1){ newlx=1; } if(iflx>0){ if(result==1||result==-1){ if(iflx==newlx){ result=1; }else{ result=0; } } } } db.dofunc(jsons.func,{result:result,presult:presult,lx:newlx,data:obj}); }else{ db.dofunc(jsons.func,{result:-1,lx:0,presult:presult,data:{}}); } }); }, getWeekNumber:function(d){ d = new Date(d); d.setHours(0,0,0); d.setDate(d.getDate() + 4 - (d.getDay()||7)); var yearStart = new Date(d.getFullYear(),0,1); var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7); var getFullYear = d.getFullYear(); var getWeekNo = weekNo; return getWeekNo; }, pagelistov:function(index,page_count,totalrecord,theLink){ var page=index||0; var theLink=theLink||"/gset.jsp"; var fuhao = theLink.indexOf("?")>-1?"&":"?"; var page_offset	=(page==1)?0:(page-1)*page_count; var prvPage =(page_offset==0)?0:(page*1-1); var nxtPage =(page_offset + page_count >= totalrecord)?page:(page*1+1); var TotalPage	=Math.ceil(totalrecord/page_count); TotalPage	=(TotalPage==0)?1:TotalPage; var pageHTML=""; if(prvPage<1) { tmpLink = theLink; } else { tmpLink = theLink+fuhao+"pn="+prvPage; } if(page==0 || 1==TotalPage) pageHTML+="上一页"; else pageHTML+="<a title='上一页' href='"+theLink+fuhao+"pn="+(page*1-1)+"'>上一页</a>"; if(TotalPage<=6) { var offset_left=1; var offset_right=TotalPage; } else { if(page-3<1) { var offset_left=1; var offset_right=6; } else { if((page*1+2)>TotalPage) { var offset_left=TotalPage-5; var offset_right=TotalPage; } else { var offset_left=page-3; var offset_right=page*1+2; } } } for(var i=offset_left;i<=offset_right;i++) { jc=i-1; if(0==jc) { tmpLink = theLink; } else { tmpLink = theLink+fuhao+"pn="+jc; } if(page==jc) pageHTML+='<a href="#" class="current" >'+i+'</a>'; else pageHTML+="<a href='"+tmpLink+"'>"+i+"</a>"; } tempPage = nxtPage; if(TotalPage==nxtPage || TotalPage==1) pageHTML+="下一页"; else pageHTML+="<a title='下一页' href='"+theLink+fuhao+"pn="+(page*1+1)+"'>下一页</a>"; tempPage = TotalPage-1; if(TotalPage==page || TotalPage==1) pageHTML+="最后一页"; else pageHTML+="<a href='"+theLink+fuhao+"pn="+(TotalPage*1-1)+"'>最后一页</a>"; return pageHTML; }, delParam:function(url,paramKey){ var urlParam = url.substr(url.indexOf("?")+1); var beforeUrl = url.substr(0,url.indexOf("?")); var nextUrl = ""; var arr = new Array(); if(urlParam!=""){ var urlParamArr = urlParam.split("&"); for(var i=0;i<urlParamArr.length;i++){ var paramArr = urlParamArr[i].split("="); if(paramArr[0]!=paramKey){ arr.push(urlParamArr[i]); } } } if(arr.length>0){ nextUrl = "?"+arr.join("&"); } if(beforeUrl!='')url = beforeUrl+nextUrl; return url; }, randombt:function(min,max){ return Math.floor(min+Math.random()*(max-min)); }, cookie:{ set: function(name, value, ttl) { if (ttl == undefined) ttl = 1e3 * 3600 * 24 * 365; document.cookie = name + "=;path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT"; var expires = new Date; expires.setTime(expires.getTime() + ttl); document.cookie = [name + "=" + value + "; ", "expires=" + expires.toGMTString() + "; ", "path=/"].join(""); }, get: function(name) { var cookie = document.cookie.split("; "); for (var i in cookie) { if(typeof(cookie[i])=='string'){ var spl = cookie[i].split("="); if (spl.length == 2 && spl[0] == name) { return spl[1]; } } } return undefined; }, remove:function(name){ var expires = new Date; expires.setTime(expires.getTime() -1); document.cookie = name + "=;path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT"; } }, storage: window.localStorage ? { getItem: function(item) { try { return window.localStorage.getItem(item) } catch (e) { return null; } }, setItem: function(item, value) { try { window.localStorage.setItem(item, value); } catch (e) { console.log("Local storage issue: " + e); } }, removeItem:function(item){ window.localStorage.removeItem(item); } } : { getItem: function(item) { return jQuery().cookie.get(item); }, setItem: function(item, value) { jQuery().cookie.set(item, value); }, removeItem:function(item){ jQuery().cookie.remove(item); } }, arrayUnique: function(a) { for (var i = 0; i < a.length; i++) { var j1 = i + 1; while (a[j1]) { if (a[i] == a[j1]) { a.splice(j1, 1); } else { j1++; } } } }, replaceAll:function(s,s1,s2){ return s.replace(new RegExp(s1, "gm"), s2); }, setStars:function(num){ var num = num || 0; var starStr = ''; for(var i = 1;i <= num;i ++){ starStr += '<img src="/css/xing.png" width="16%" style="margin:0 2%;"/>'; } return starStr; }, html_decode:function(str)	{ var s = ""; if (str.length == 0) return ""; s = str.replaceAll("&lt;", "<"); s = s.replaceAll("&gt;", ">"); s = s.replaceAll("&amp;", "&"); s = s.replaceAll("&nbsp;", ""); return s; } }); function Resizer(options) { this.delay = options.delay || 0; this.element = options.element || null; this.baseWidth = options.baseWidth; this.baseHeight = options.baseHeight; this.onResize = options.onResize; this.enabled = true; this.scale = 1; this.resizeTimeout = null } Resizer.prototype = { needsResize: function(maxWidth, maxHeight) { clearTimeout(this.resizeTimeout); if (this.enabled) { this.maxWidth = maxWidth; this.maxHeight = maxHeight; this.resizeTimeout = setTimeout(this.resize.bind(this), this.delay) } }, resize: function() { this.resizeTimeout = null; var dimensions = this.getFittingDimensions(this.maxWidth, this.maxHeight); this.element.style.width = dimensions.width + "px"; this.element.style.height = dimensions.height + "px"; if (this.onResize) { this.onResize.call(this) } }, scaleX: function() { var rect = this.element.getBoundingClientRect(); return rect.width / this.baseWidth || 1 }, scaleY: function() { var rect = this.element.getBoundingClientRect(); return rect.height / this.baseHeight || 1 }, getFittingDimensions: function(maxWidth, maxHeight) { var availableRatio = maxWidth / maxHeight; var baseRatio = this.baseWidth / this.baseHeight; var ratioDifference = Math.abs(availableRatio - baseRatio); var width, height; if (ratioDifference <= .17) { width = maxWidth; height = maxHeight } else if (availableRatio <= baseRatio) { width = maxWidth; height = width / baseRatio } else { height = maxHeight; width = height * baseRatio } return { width: width, height: height } } }; var sclick="onclick"; if(jQuery().iftouch()) jqueryex.sclick=sclick="onclick"; 
/**
  * CopperCube player implemented using the CopperLicht 3D Engine, (c) by Nikolaus Gebhardt, Ambiera e.U.
  * http://www.ambiera.com/coppercube
  */
function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function k(a){return function(){return this[a]}}function l(a){return function(){return a}}var n,q={};function da(a,b){this.fi=this.zd=null;a=document.getElementById(a);if(a==null)q.Hk=false;else{if(this.zd=a.parentNode){this.Lg=document.createElement("div");this.zd.appendChild(this.Lg);this.Ym=a=document.createTextNode("Loading...");this.Lg.appendChild(a)}b&&ea(this)}}function ea(a){if(a.fi==null){a.fi=document.createElement("div");a.zd.appendChild(a.fi);var b=document.createTextNode("FPS: 0");a.hl=b;a.fi.appendChild(b);a.frames=0;a.Nk=(new Date).getTime()}}
da.prototype.print=function(a){q.Hk!=false&&fa(this,a,false)};function ga(a,b){if(a.Lg)if(b==null)a.Lg.style.display="none";else{a.Lg.style.display="block";a.Ym.nodeValue=b}}function ha(a,b,c){fa(a,b,true,c)}function ia(a,b){setTimeout(function(){throw new Error(b);},0)}
function fa(a,b,c,d){if(!(q.Hk==false&&c!=true))if(d){a.zd.appendChild(document.createElement("br"));c=document.createElement("div");a.zd.appendChild(c);c.innerHTML=b}else{a.zd.appendChild(document.createElement("br"));b=document.createTextNode(b);a.zd.appendChild(b)}}q.Hk=true;q.ja=null;function ja(a){this.gi=a;this.sb=false;if(!this.sb&&typeof XMLHttpRequest!="undefined")try{this.sb=new XMLHttpRequest}catch(b){this.sb=false}if(!this.sb&&window.In)try{this.sb=window.In()}catch(c){this.sb=false}this.load=function(d){if(this.sb==false)ha(q.ja,"Your browser doesn't support AJAX");else{var e=this;try{this.sb.open("GET",this.gi,true)}catch(f){ha(q.ja,"Could not open file "+this.gi+": "+f.message);var g=navigator.appVersion;g!=null&&g.indexOf("Trident")!=-1&&ha(q.ja,"<i>Use a web server to run files in IE. Or start them from CopperCube.</i>",
true);return}this.sb.onreadystatechange=function(){if(e.sb.readyState==4){e.sb.status!=200&&e.sb.status!=0&&e.sb.status!=null&&ha(q.ja,"Could not open file "+e.gi+" (status:"+e.sb.status+")");d(e.sb.responseText)}};try{this.sb.send(null)}catch(i){ha(q.ja,"Could not open file "+e.gi)}}};this.No=function(d){alert("loaded :"+d)}};q.PI=3.14159265359;q.Co=1/3.14159265359;q.xo=1.570796326795;q.Bo=3.141592653589793;q.$c=3.14159265359/180;q.Ld=57.29577951307855;q.un=1.0E-8;q.Hh=function(a){return a*q.Ld};q.cm=function(a){return a*q.$c};q.la=function(a){return a<1.0E-8&&a>-1.0E-8};q.Ud=function(a){return a+1.0E-8>=1&&a-1.0E-8<=1};q.P=function(a,b){return a+1.0E-8>=b&&a-1.0E-8<=b};q.Wb=function(a,b,c){if(a<b)return b;if(a>c)return c;return a};q.Kn=function(a){return a-Math.floor(a)};
q.Tn=function(a,b,c){if(a>b){if(a>c)return a;return c}if(b>c)return b;return c};q.Oo=function(a,b,c){if(a<b){if(a<c)return a;return c}if(b<c)return b;return c};q.Ye=function(a){return(a&4278190080)>>>24};q.af=function(a){return(a&16711680)>>16};q.$e=function(a){return(a&65280)>>8};q.Ze=function(a){return a&255};q.bm=function(a,b,c,d){a&=255;b&=255;c&=255;d&=255;return a<<24|b<<16|c<<8|d};
q.gm=function(a,b,c){var d=1-c;return q.bm(q.Ye(a)*c+q.Ye(b)*d,q.af(a)*c+q.af(b)*d,q.$e(a)*c+q.$e(b)*d,q.Ze(a)*c+q.Ze(b)*d)};function ka(){this.wd=this.Cd=this.Kd=this.Ph=1}n=ka.prototype;n.e=function(){var a=new la;a.Ph=this.Ph;a.Kd=this.Kd;a.Cd=this.Cd;a.wd=this.wd;return a};n.Ph=1;n.Kd=1;n.Cd=1;n.wd=1;function t(){return(new Date).getTime()};function v(a,b,c){if(a!=null){this.c=a;this.b=b;this.d=c}}n=v.prototype;n.c=0;n.b=0;n.d=0;n.set=function(a,b,c){this.c=a;this.b=b;this.d=c};n.e=function(){return new v(this.c,this.b,this.d)};n.ya=function(a){a.c=this.c;a.b=this.b;a.d=this.d};n.substract=function(a){return new v(this.c-a.c,this.b-a.b,this.d-a.d)};function ma(a,b){a.c-=b.c;a.b-=b.b;a.d-=b.d}v.prototype.add=function(a){return new v(this.c+a.c,this.b+a.b,this.d+a.d)};v.prototype.ra=function(a){this.c+=a.c;this.b+=a.b;this.d+=a.d};
function na(a,b){a.c+=b.c;a.b+=b.b;a.d+=b.d;return a}v.prototype.normalize=function(){var a=this.c*this.c+this.b*this.b+this.d*this.d;if(!(a>-1.0E-7&&a<1.0E-7)){a=1/Math.sqrt(a);this.c*=a;this.b*=a;this.d*=a}};function x(a,b){var c=a.c*a.c+a.b*a.b+a.d*a.d;if(!(c>-1.0E-7&&c<1.0E-7)){c=b/Math.sqrt(c);a.c*=c;a.b*=c;a.d*=c}}function oa(a,b){a.c=b.c;a.b=b.b;a.d=b.d}v.prototype.P=function(a){return q.P(this.c,a.c)&&q.P(this.b,a.b)&&q.P(this.d,a.d)};
function pa(a){return q.la(a.c)&&q.la(a.b)&&q.la(a.d)}v.prototype.getLength=function(){return Math.sqrt(this.c*this.c+this.b*this.b+this.d*this.d)};v.prototype.qb=function(a){var b=a.c-this.c,c=a.b-this.b;a=a.d-this.d;return Math.sqrt(b*b+c*c+a*a)};function qa(a,b){var c=b.c-a.c,d=b.b-a.b;a=b.d-a.d;return c*c+d*d+a*a}function ra(a){return a.c*a.c+a.b*a.b+a.d*a.d}function y(a,b){return new v(a.c*b,a.b*b,a.d*b)}function z(a,b){a.c*=b;a.b*=b;a.d*=b}function sa(a,b){a.c*=b;a.b*=b;a.d*=b;return a}
function ta(a,b){a.c*=b.c;a.b*=b.b;a.d*=b.d}function ua(a,b){return new v(a.c*b.c,a.b*b.b,a.d*b.d)}function va(a,b){return new v(a.c/b.c,a.b/b.b,a.d/b.d)}function wa(a,b){return new v(a.b*b.d-a.d*b.b,a.d*b.c-a.c*b.d,a.c*b.b-a.b*b.c)}v.prototype.ea=function(a){return this.c*a.c+this.b*a.b+this.d*a.d};
function xa(a){var b=new v;b.b=q.Hh(Math.atan2(a.c,a.d));if(b.b<0)b.b+=360;if(b.b>=360)b.b-=360;var c=Math.sqrt(a.c*a.c+a.d*a.d);b.c=q.Hh(Math.atan2(c,a.b))-90;if(b.c<0)b.c+=360;if(b.c>=360)b.c-=360;return b}function ya(a,b){b*=q.$c;var c=Math.cos(b);b=Math.sin(b);a.c=a.c*c-a.d*b;a.d=a.c*b+a.d*c}function za(a,b,c){var d=1-c;return new v(b.c*d+a.c*c,b.b*d+a.b*c,b.d*d+a.d*c)}v.prototype.toString=function(){return"(x: "+this.c+" y:"+this.b+" z:"+this.d+")"};function Aa(){this.R=new v;this.K=new v}
Aa.prototype.R=null;Aa.prototype.K=null;function Ba(a){return a.K.substract(a.R)}Aa.prototype.getLength=function(){return Ba(this).getLength()};function Ca(a,b){if(a==null)this.b=this.c=0;else{this.c=a;this.b=b}}Ca.prototype.c=0;Ca.prototype.b=0;Ca.prototype.set=function(a,b){this.c=a;this.b=b};function A(){this.I=new v;this.J=new v}A.prototype.I=null;A.prototype.J=null;A.prototype.e=function(){var a=new A;a.I=this.I.e();a.J=this.J.e();return a};function Da(a){a=a.I.add(a.J);z(a,0.5);return a}function Ea(a){return a.J.substract(a.I)}
function Fa(a){var b=Da(a);a=b.substract(a.J);var c=[];c.push(new v(b.c+a.c,b.b+a.b,b.d+a.d));c.push(new v(b.c+a.c,b.b-a.b,b.d+a.d));c.push(new v(b.c+a.c,b.b+a.b,b.d-a.d));c.push(new v(b.c+a.c,b.b-a.b,b.d-a.d));c.push(new v(b.c-a.c,b.b+a.b,b.d+a.d));c.push(new v(b.c-a.c,b.b-a.b,b.d+a.d));c.push(new v(b.c-a.c,b.b+a.b,b.d-a.d));c.push(new v(b.c-a.c,b.b-a.b,b.d-a.d));return c}
function Ga(a,b,c){var d=c.substract(b),e=d.getLength();d.normalize();b=y(b.add(c),0.5);c=e*0.5;e=y(Ea(a),0.5);a=Da(a).substract(b);if(Math.abs(a.c)>e.c+c*Math.abs(d.c)||Math.abs(a.b)>e.b+c*Math.abs(d.b)||Math.abs(a.d)>e.d+c*Math.abs(d.d))d=false;else{b=e.b*Math.abs(d.d)+e.d*Math.abs(d.b);if(Math.abs(a.b*d.d-a.d*d.b)>b)d=false;else{b=e.c*Math.abs(d.d)+e.d*Math.abs(d.c);if(Math.abs(a.d*d.c-a.c*d.d)>b)d=false;else{b=e.c*Math.abs(d.b)+e.b*Math.abs(d.c);d=Math.abs(a.c*d.b-a.b*d.c)>b?false:true}}}return d}
function B(a,b){var c=b.c,d=b.b;b=b.d;if(c>a.J.c)a.J.c=c;if(d>a.J.b)a.J.b=d;if(b>a.J.d)a.J.d=b;if(c<a.I.c)a.I.c=c;if(d<a.I.b)a.I.b=d;if(b<a.I.d)a.I.d=b}function Ha(a,b){return a.I.c<=b.J.c&&a.I.b<=b.J.b&&a.I.d<=b.J.d&&a.J.c>=b.I.c&&a.J.b>=b.I.b&&a.J.d>=b.I.d}A.prototype.Dh=function(a){return a.c>=this.I.c&&a.c<=this.J.c&&a.b>=this.I.b&&a.b<=this.J.b&&a.d>=this.I.d&&a.d<=this.J.d};A.prototype.reset=function(a,b,c){this.J.set(a,b,c);this.I.set(a,b,c)};function Ia(){this.k=new v(0,1,0);this.Va=-(new v(0,0,0)).ea(this.k)}Ia.prototype.Va=0;Ia.prototype.k=null;Ia.prototype.e=function(){var a=new Ia(false);a.k=this.k.e();a.Va=this.Va;return a};Ia.prototype.normalize=function(){var a=1/this.k.getLength();this.k=y(this.k,a);this.Va*=a};
function Ja(a,b,c,d){var e=new v,f=new v;var g=a.k.getLength(),i=a.k.ea(b.k),j=b.k.getLength(),m=g*j-i*i;if(Math.abs(m)<1.0E-8)b=false;else{m=1/m;j=(j*-a.Va+i*b.Va)*m;g=(g*-b.Va+i*a.Va)*m;wa(a.k,b.k).ya(f);a=y(a.k,j);b=y(b.k,g);a.add(b).ya(e);b=true}if(b)return c.Jk(e,f,d);return false}Ia.prototype.Jk=function(a,b,c){var d=this.k.ea(b);if(d==0)return false;d=-(this.k.ea(a)+this.Va)/d;a.add(y(b,d)).ya(c);return true};Ia.prototype.qb=function(a){return a.ea(this.k)+this.Va};
function Ka(a,b){return a.k.ea(b)<=0};function G(a,b,c){this.M=a?a:new v;this.V=b?b:new v;this.X=c?c:new v}G.prototype.M=null;G.prototype.V=null;G.prototype.X=null;G.prototype.e=function(){return new G(this.M,this.V,this.X)};function La(a){var b=new Ia(false),c=a.M,d=a.X;b.k=wa(a.V.substract(c),d.substract(c));b.k.normalize();b.Va=-c.ea(b.k);return b}G.prototype.Dh=function(a){return Ma(this,a,this.M,this.V,this.X)&&Ma(this,a,this.V,this.M,this.X)&&Ma(this,a,this.X,this.M,this.V)};
function Ma(a,b,c,d,e){a=e.substract(d);b=wa(a,b.substract(d));c=wa(a,c.substract(d));return b.ea(c)>=0}function Na(a){return wa(a.V.substract(a.M),a.X.substract(a.M))}G.prototype.Jk=function(a,b){var c=Na(this);c.normalize();var d=c.ea(b);if(q.la(d))a=null;else{var e=this.M.ea(c);c=-(c.ea(a)-e)/d;a=a.add(y(b,c))}if(a==null)return null;if(this.Dh(a))return a;return null};G.prototype.ya=function(a){this.M.ya(a.M);this.V.ya(a.V);this.X.ya(a.X)};function H(a){if(a==null)a=true;this.H=this.G=this.F=this.D=this.C=this.q=this.w=this.v=this.B=this.u=this.p=this.t=this.A=this.s=this.r=this.o=0;this.Da=false;if(a){this.H=this.q=this.p=this.o=1;this.Da=true}}function Oa(a){if(a.Da)return true;a.Da=q.Ud(a.o)&&q.la(a.r)&&q.la(a.s)&&q.la(a.A)&&q.la(a.t)&&q.Ud(a.p)&&q.la(a.u)&&q.la(a.B)&&q.la(a.v)&&q.la(a.w)&&q.Ud(a.q)&&q.la(a.C)&&q.la(a.D)&&q.la(a.F)&&q.la(a.G)&&q.Ud(a.H);return a.Da}
function Pa(a){if(a.Da)return true;return q.Ud(a.o)&&q.la(a.r)&&q.la(a.s)&&q.la(a.A)&&q.la(a.t)&&q.Ud(a.p)&&q.la(a.u)&&q.la(a.B)&&q.la(a.v)&&q.la(a.w)&&q.Ud(a.q)&&q.la(a.C)&&q.Ud(a.H)}H.prototype.P=function(a){return q.P(this.o,a.o)&&q.P(this.r,a.r)&&q.P(this.s,a.s)&&q.P(this.A,a.A)&&q.P(this.t,a.t)&&q.P(this.p,a.p)&&q.P(this.u,a.u)&&q.P(this.B,a.B)&&q.P(this.v,a.v)&&q.P(this.w,a.w)&&q.P(this.q,a.q)&&q.P(this.C,a.C)&&q.P(this.D,a.D)&&q.P(this.F,a.F)&&q.P(this.G,a.G)&&q.P(this.H,a.H)};
function Qa(a){return new v(a.o,a.p,a.q)}function Ra(a,b){var c=b.e();b.c=c.c*a.o+c.b*a.t+c.d*a.v;b.b=c.c*a.r+c.b*a.p+c.d*a.w;b.d=c.c*a.s+c.b*a.u+c.d*a.q}function Sa(a,b,c){b.c=c.c*a.o+c.b*a.t+c.d*a.v;b.b=c.c*a.r+c.b*a.p+c.d*a.w;b.d=c.c*a.s+c.b*a.u+c.d*a.q}function Ta(a,b){return new v(b.c*a.o+b.b*a.t+b.d*a.v+a.D,b.c*a.r+b.b*a.p+b.d*a.w+a.F,b.c*a.s+b.b*a.u+b.d*a.q+a.G)}function Ua(a,b){var c=b.c*a.r+b.b*a.p+b.d*a.w+a.F,d=b.c*a.s+b.b*a.u+b.d*a.q+a.G;b.c=b.c*a.o+b.b*a.t+b.d*a.v+a.D;b.b=c;b.d=d}
function Va(a,b){return new v(b.c+a.D,b.b+a.F,b.d+a.G)}
function I(a,b){var c=new H(false);if(a.Da){b.ya(c);return c}if(b.Da){a.ya(c);return c}c.o=a.o*b.o+a.t*b.r+a.v*b.s+a.D*b.A;c.r=a.r*b.o+a.p*b.r+a.w*b.s+a.F*b.A;c.s=a.s*b.o+a.u*b.r+a.q*b.s+a.G*b.A;c.A=a.A*b.o+a.B*b.r+a.C*b.s+a.H*b.A;c.t=a.o*b.t+a.t*b.p+a.v*b.u+a.D*b.B;c.p=a.r*b.t+a.p*b.p+a.w*b.u+a.F*b.B;c.u=a.s*b.t+a.u*b.p+a.q*b.u+a.G*b.B;c.B=a.A*b.t+a.B*b.p+a.C*b.u+a.H*b.B;c.v=a.o*b.v+a.t*b.w+a.v*b.q+a.D*b.C;c.w=a.r*b.v+a.p*b.w+a.w*b.q+a.F*b.C;c.q=a.s*b.v+a.u*b.w+a.q*b.q+a.G*b.C;c.C=a.A*b.v+a.B*b.w+
a.C*b.q+a.H*b.C;c.D=a.o*b.D+a.t*b.F+a.v*b.G+a.D*b.H;c.F=a.r*b.D+a.p*b.F+a.w*b.G+a.F*b.H;c.G=a.s*b.D+a.u*b.F+a.q*b.G+a.G*b.H;c.H=a.A*b.D+a.B*b.F+a.C*b.G+a.H*b.H;return c}
function Wa(a,b){if(a.Da){a.ya(b);return true}var c=(a.o*a.p-a.r*a.t)*(a.q*a.H-a.C*a.G)-(a.o*a.u-a.s*a.t)*(a.w*a.H-a.C*a.F)+(a.o*a.B-a.A*a.t)*(a.w*a.G-a.q*a.F)+(a.r*a.u-a.s*a.p)*(a.v*a.H-a.C*a.D)-(a.r*a.B-a.A*a.p)*(a.v*a.G-a.q*a.D)+(a.s*a.B-a.A*a.u)*(a.v*a.F-a.w*a.D);if(c>-1.0E-7&&c<1.0E-7)return false;c=1/c;b.o=c*(a.p*(a.q*a.H-a.C*a.G)+a.u*(a.C*a.F-a.w*a.H)+a.B*(a.w*a.G-a.q*a.F));b.r=c*(a.w*(a.s*a.H-a.A*a.G)+a.q*(a.A*a.F-a.r*a.H)+a.C*(a.r*a.G-a.s*a.F));b.s=c*(a.F*(a.s*a.B-a.A*a.u)+a.G*(a.A*a.p-a.r*
a.B)+a.H*(a.r*a.u-a.s*a.p));b.A=c*(a.r*(a.B*a.q-a.u*a.C)+a.s*(a.p*a.C-a.B*a.w)+a.A*(a.u*a.w-a.p*a.q));b.t=c*(a.u*(a.v*a.H-a.C*a.D)+a.B*(a.q*a.D-a.v*a.G)+a.t*(a.C*a.G-a.q*a.H));b.p=c*(a.q*(a.o*a.H-a.A*a.D)+a.C*(a.s*a.D-a.o*a.G)+a.v*(a.A*a.G-a.s*a.H));b.u=c*(a.G*(a.o*a.B-a.A*a.t)+a.H*(a.s*a.t-a.o*a.u)+a.D*(a.A*a.u-a.s*a.B));b.B=c*(a.s*(a.B*a.v-a.t*a.C)+a.A*(a.t*a.q-a.u*a.v)+a.o*(a.u*a.C-a.B*a.q));b.v=c*(a.B*(a.v*a.F-a.w*a.D)+a.t*(a.w*a.H-a.C*a.F)+a.p*(a.C*a.D-a.v*a.H));b.w=c*(a.C*(a.o*a.F-a.r*a.D)+
a.v*(a.r*a.H-a.A*a.F)+a.w*(a.A*a.D-a.o*a.H));b.q=c*(a.H*(a.o*a.p-a.r*a.t)+a.D*(a.r*a.B-a.A*a.p)+a.F*(a.A*a.t-a.o*a.B));b.C=c*(a.A*(a.p*a.v-a.t*a.w)+a.o*(a.B*a.w-a.p*a.C)+a.r*(a.t*a.C-a.B*a.v));b.D=c*(a.t*(a.q*a.F-a.w*a.G)+a.p*(a.v*a.G-a.q*a.D)+a.u*(a.w*a.D-a.v*a.F));b.F=c*(a.v*(a.s*a.F-a.r*a.G)+a.w*(a.o*a.G-a.s*a.D)+a.q*(a.r*a.D-a.o*a.F));b.G=c*(a.D*(a.s*a.p-a.r*a.u)+a.F*(a.o*a.u-a.s*a.t)+a.G*(a.r*a.t-a.o*a.p));b.H=c*(a.o*(a.p*a.q-a.u*a.w)+a.r*(a.u*a.v-a.t*a.q)+a.s*(a.t*a.w-a.p*a.v));b.Da=a.Da;return true}
function Xa(a){var b=new H(false);if(Wa(a,b)){b.ya(a);return true}return false}function Ya(a){var b=new H(false);b.o=a.o;b.r=a.t;b.s=a.v;b.A=a.D;b.t=a.r;b.p=a.p;b.u=a.w;b.B=a.F;b.v=a.s;b.w=a.u;b.q=a.q;b.C=a.G;b.D=a.A;b.F=a.B;b.G=a.C;b.H=a.H;b.Da=a.Da;return b}
function Za(a,b,c){a.Da=false;switch(b){case 0:a.o=c;break;case 1:a.r=c;break;case 2:a.s=c;break;case 3:a.A=c;break;case 4:a.t=c;break;case 5:a.p=c;break;case 6:a.u=c;break;case 7:a.B=c;break;case 8:a.v=c;break;case 9:a.w=c;break;case 10:a.q=c;break;case 11:a.C=c;break;case 12:a.D=c;break;case 13:a.F=c;break;case 14:a.G=c;break;case 15:a.H=c;break}}H.prototype.e=function(){var a=new H(false);this.ya(a);return a};
H.prototype.ya=function(a){a.o=this.o;a.r=this.r;a.s=this.s;a.A=this.A;a.t=this.t;a.p=this.p;a.u=this.u;a.B=this.B;a.v=this.v;a.w=this.w;a.q=this.q;a.C=this.C;a.D=this.D;a.F=this.F;a.G=this.G;a.H=this.H;a.Da=this.Da};function $a(a,b,c,d,e){b=1/Math.tan(b/2);a.o=b/c;a.r=0;a.s=0;a.A=0;a.t=0;a.p=b;a.u=0;a.B=0;a.v=0;a.w=0;a.q=e/(e-d);a.C=1;a.D=0;a.F=0;a.G=-d*e/(e-d);a.H=0;a.Da=false}
function ab(a,b){var c=y(b,q.$c);b=Math.cos(c.c);var d=Math.sin(c.c),e=Math.cos(c.b),f=Math.sin(c.b),g=Math.cos(c.d);c=Math.sin(c.d);a.o=e*g;a.r=e*c;a.s=-f;var i=d*f;f=b*f;a.t=i*g-b*c;a.p=i*c+b*g;a.u=d*e;a.v=f*g+d*c;a.w=f*c-d*g;a.q=b*e;a.Da=false}
function bb(a){var b=-Math.asin(a.s),c=Math.cos(b);b*=q.Ld;var d,e;if(Math.abs(c)>1.0E-8){var f=1/c;d=a.q*f;e=a.u*f;c=Math.atan2(e,d)*q.Ld;d=a.o*f;e=a.r*f}else{c=0;d=a.p;e=-a.t}a=Math.atan2(e,d)*q.Ld;if(c<0)c+=360;if(b<0)b+=360;if(a<0)a+=360;return new v(c,b,a)}function cb(a,b){a.D=b.c;a.F=b.b;a.G=b.d;a.Da=false}function db(a,b){a.o=b.c;a.p=b.b;a.q=b.d;a.Da=false}function eb(a,b){var c=Fa(b),d;for(d=0;d<8;++d)Ua(a,c[d]);a=c[0];b.I=a.e();b.J=a.e();for(d=1;d<8;++d)B(b,c[d])}
H.prototype.toString=function(){return this.o+" "+this.r+" "+this.s+" "+this.A+"\n"+this.t+" "+this.p+" "+this.u+" "+this.B+"\n"+this.v+" "+this.w+" "+this.q+" "+this.C+"\n"+this.D+" "+this.F+" "+this.G+" "+this.H};function K(a,b,c,d){this.d=this.b=this.c=0;this.qa=1;if(a!=null)this.c=a;if(b!=null)this.b=b;if(c!=null)this.d=c;if(d!=null)this.qa=d}n=K.prototype;n.c=0;n.b=0;n.d=0;n.qa=0;n.e=function(){var a=new K;this.ya(a);return a};n.ya=function(a){a.c=this.c;a.b=this.b;a.d=this.d;a.qa=this.qa};function fb(a,b){return new K(a.c*b,a.b*b,a.d*b,a.qa*b)}K.prototype.ra=function(a){this.c+=a.c;this.b+=a.b;this.d+=a.d;this.qa+=a.qa;return this};
function gb(a,b,c,d){var e=b.ea(c);if(e<0){b=fb(b,-1);e*=-1}if(e+1>0.05)if(1-e>=0.05){var f=Math.acos(e),g=1/Math.sin(f);e=Math.sin(f*(1-d))*g;d=Math.sin(f*d)*g}else{e=1-d;d=d}else{c=new K(-b.b,b.c,-b.qa,b.d);e=Math.sin(q.PI*(0.5-d));d=Math.sin(q.PI*d)}b=fb(b,e).ra(fb(c,d));a.c=b.c;a.b=b.b;a.d=b.d;a.qa=b.qa}K.prototype.ea=function(a){return this.c*a.c+this.b*a.b+this.d*a.d+this.qa*a.qa};
function hb(a){var b=new H(false),c=a.c,d=a.b,e=a.d;a=a.qa;b.o=1-2*d*d-2*e*e;b.t=2*c*d+2*e*a;b.v=2*c*e-2*d*a;b.D=0;b.r=2*c*d-2*e*a;b.p=1-2*c*c-2*e*e;b.w=2*e*d+2*c*a;b.F=0;b.s=2*c*e+2*d*a;b.u=2*e*d-2*c*a;b.q=1-2*c*c-2*d*d;b.G=0;b.A=0;b.B=0;b.C=0;b.H=1;b.Da=false;return b}function ib(a,b){var c=a.qa*a.qa,d=a.c*a.c,e=a.b*a.b,f=a.d*a.d;b.d=Math.atan2(2*(a.c*a.b+a.d*a.qa),d-e-f+c);b.c=Math.atan2(2*(a.b*a.d+a.c*a.qa),-d-e+f+c);b.b=Math.asin(q.Wb(-2*(a.c*a.d-a.b*a.qa),-1,1))}
function jb(a,b,c,d){var e=b*0.5;b=Math.sin(e);var f=Math.cos(e);e=c*0.5;c=Math.sin(e);var g=Math.cos(e);e=d*0.5;d=Math.sin(e);var i=Math.cos(e);e=g*i;i=c*i;g=g*d;c=c*d;a.c=b*e-f*c;a.b=f*i+b*g;a.d=f*g-b*i;a.qa=f*e+b*c;a.normalize()}K.prototype.normalize=function(){var a=this.c*this.c+this.b*this.b+this.d*this.d+this.qa*this.qa;if(a!=1){a=a=1/Math.sqrt(a);this.c*=a;this.b*=a;this.d*=a;this.qa*=a}};K.prototype.toString=function(){return"(x: "+this.c+" y:"+this.b+" z:"+this.d+" w:"+this.qa+")"};function kb(){this.Pa=[];for(var a=0;a<lb;++a)this.Pa.push(new Ia)}kb.prototype.Pa=null;var lb=6;
kb.prototype.jj=function(a){var b;b=this.Pa[2];b.k.c=a.A+a.o;b.k.b=a.B+a.t;b.k.d=a.C+a.v;b.Va=a.H+a.D;b=this.Pa[3];b.k.c=a.A-a.o;b.k.b=a.B-a.t;b.k.d=a.C-a.v;b.Va=a.H-a.D;b=this.Pa[5];b.k.c=a.A-a.r;b.k.b=a.B-a.p;b.k.d=a.C-a.w;b.Va=a.H-a.F;b=this.Pa[4];b.k.c=a.A+a.r;b.k.b=a.B+a.p;b.k.d=a.C+a.w;b.Va=a.H+a.F;b=this.Pa[0];b.k.c=a.A-a.s;b.k.b=a.B-a.u;b.k.d=a.C-a.q;b.Va=a.H-a.G;b=this.Pa[1];b.k.c=a.s;b.k.b=a.u;b.k.d=a.q;b.Va=a.G;for(a=a=0;a<lb;++a){b=this.Pa[a];var c=-(1/b.k.getLength());b.k=y(b.k,c);b.Va*=
c}};function mb(a){var b=new v;Ja(a.Pa[0],a.Pa[5],a.Pa[2],b);return b}function nb(a){var b=new v;Ja(a.Pa[0],a.Pa[5],a.Pa[3],b);return b}function ob(a){var b=new v;Ja(a.Pa[0],a.Pa[4],a.Pa[3],b);return b}function pb(a){var b=new v;Ja(a.Pa[0],a.Pa[4],a.Pa[2],b);return b}kb.prototype.gb=function(a){var b=new A;b.reset(a.c,a.b,a.d);B(b,mb(this));B(b,nb(this));B(b,pb(this));B(b,ob(this));return b};function L(a){if(a){this.f=new v;this.k=new v;this.za=4294967295;this.ua=new Ca;this.Pf=new Ca}}n=L.prototype;n.f=null;n.k=null;n.za=0;n.ua=null;n.Pf=null;function qb(){this.l="";this.ec=false;this.$j=this.ak=this.Wh=this.Xh=this.bb=this.ad=null}qb.prototype.Zb=function(){if(this.ad)return this.ad.width;if(this.Xh!=null)return this.Xh;return 0};qb.prototype.Yb=function(){if(this.ad)return this.ad.height;if(this.Wh!=null)return this.Wh;return 0};function rb(){this.Sa="";this.Gb=null;this.U=false;this.i="SetOverlayText"}rb.prototype.h=function(a,b){var c=new rb;c.Sa=this.Sa;c.Gb=this.Gb;c.U=this.U;if(c.Gb==a)c.Gb=b;return c};
rb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.U)c=a;else if(this.Gb!=-1)c=M(b,this.Gb);if(c&&c.Uk){var d=this.Sa.indexOf("$");if(d!=-1){a=this.Sa;for(var e=0,f=true;f;){f=false;d=a.indexOf("$",e);if(d!=-1){e=d+1;var g=a.indexOf("$",d+1);if(g!=-1){f=true;var i=a.substr(d+1,g-(d+1));if(i=sb(i,false,b)){d=a.substr(0,d);d+=tb(i);e=d.length+1;d+=a.substr(g+1,a.length-g);a=d}}}}c.Uk(a)}else c.Uk(this.Sa)}}};
function ub(){this.mi=0;this.De=null;this.U=false;this.i="MakeSceneNodeInvisible"}ub.prototype.h=function(a,b){var c=new ub;c.mi=this.mi;c.De=this.De;c.U=this.U;if(c.De==a)c.De=b;return c};ub.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.U)c=a;else if(this.De!=-1)c=M(b,this.De);if(c)switch(this.mi){case 0:c.T=false;break;case 1:c.T=true;break;case 2:c.T=!c.T;break}}};function vb(){this.wc=this.ld=false;this.i="ChangeSceneNodePosition"}
vb.prototype.h=function(a,b){var c=new vb;c.Jd=this.Jd;c.tc=this.tc;c.sc=this.sc;c.U=this.U;c.ye=this.ye;c.da=this.da?this.da.e():null;c.Rh=this.Rh?this.Rh.e():null;c.ld=this.ld;c.wc=this.wc;if(c.tc==a)c.tc=b;if(c.sc==a)c.sc=b;return c};
vb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.U)c=a;else if(this.tc!=-1)c=M(b,this.tc);if(c){var d=null;switch(this.Jd){case 0:d=this.da.e();break;case 1:d=c.f.add(this.da);break;case 2:var e=null;if(this.ye)e=a;else if(this.sc!=-1)e=M(b,this.sc);if(e)d=e.f.add(this.da);break;case 3:d=this.da.getLength();a=c.Z;b=new v(1,0,0);Ra(a,b);if(c.n()=="camera")b=c.fa.substract(c.f);x(b,d);d=c.f.add(b);break;case 4:a=new A;a.reset(this.da.c,this.da.b,this.da.d);B(a,this.Rh);d=new v;d.c=a.I.c+
Math.random()*(a.J.c-a.I.c);d.b=a.I.b+Math.random()*(a.J.b-a.I.b);d.d=a.I.d+Math.random()*(a.J.d-a.I.d);break;case 5:d=b.Gj.add(this.da);break}if(d!=null)if(this.ld&&this.wc>0){a=new wb;a.R=c.f.e();a.K=d;a.Qc=this.wc;a.wg=true;xb(a);yb(c,a)}else c.f=d}}};function zb(){this.i="ChangeSceneNodeRotation"}zb.prototype.h=function(a,b){var c=new zb;c.mk=this.mk;c.Gf=this.Gf;c.U=this.U;c.da=this.da?this.da.e():null;c.Ii=this.Ii;c.xk=this.xk;if(c.Gf==a)c.Gf=b;return c};
zb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.U)c=a;else if(this.Gf!=-1)c=M(b,this.Gf);if(c){b=null;switch(this.mk){case 0:b=this.da.e();break;case 1:b=c.Q.add(this.da);break}if(b)if(this.Ii){a=new Ab;b=b;var d=c.Q,e=this.xk;a.Fl=true;a.Ae=b.e();a.cl=d.e();a.lk=a.Ba+e;yb(c,a)}else c.Q=b}}};function Bb(){this.i="ChangeSceneNodeScale"}Bb.prototype.h=function(a,b){var c=new Bb;c.ok=this.ok;c.Hf=this.Hf;c.U=this.U;c.da=this.da?this.da.e():null;if(c.Hf==a)c.Hf=b;return c};
Bb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.U)c=a;else if(this.Hf!=-1)c=M(b,this.Hf);if(c)switch(this.ok){case 0:c.oa=this.da.e();break;case 1:c.oa=ua(c.oa,this.da);break}}};function Cb(){this.i="ChangeSceneNodeTexture"}Cb.prototype.h=function(a,b){var c=new Cb;c.Oc=this.Oc;c.Gb=this.Gb;c.U=this.U;c.Sf=this.Sf;c.Aj=this.Aj;if(c.Gb==a)c.Gb=b;return c};
Cb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.U)c=a;else if(this.Gb!=-1)c=M(b,this.Gb);if(c)if(c.n()=="2doverlay")c.bb=this.Sf;else{a=c.Ac();if(this.Oc==0)for(b=0;b<a;++b){var d=c.lc(b);d.ab=this.Sf}else if(this.Oc==1){d=c.lc(this.Aj);d.ab=this.Sf}}}};function Db(){this.i="ExecuteJavaScript"}Db.prototype.h=function(){var a=new Db;a.Dj=this.Dj;return a};Db.prototype.execute=function(){eval(this.Dj)};function Eb(){this.i="OpenWebpage"}
Eb.prototype.h=function(){var a=new Eb;a.zk=this.zk;a.fa=this.fa;return a};Eb.prototype.execute=function(){window.open(this.zk,this.fa)};function Fb(){this.i="SetSceneNodeAnimation"}Fb.prototype.h=function(a,b){var c=new Fb;c.Ff=this.Ff;c.U=this.U;c.Bb=this.Bb;c.oj=this.oj;if(c.Ff==a)c.Ff=b;return c};Fb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.U)c=a;else if(this.Ff!=-1)c=M(b,this.Ff);if(c){a=c;a.n()=="animatedmesh"&&Gb(a,this.oj,this.Bb)}}};
function Hb(a){this.Ha=a;this.i="SwitchToScene"}Hb.prototype.h=function(){var a=new Hb;a.Ce=this.Ce;return a};Hb.prototype.execute=function(){this.Ha&&Ib(this.Ha,this.Ce,true)};function Jb(a){this.Ha=a;this.i="SetActiveCamera"}Jb.prototype.h=function(a,b){var c=new Jb;c.df=this.df;if(c.df==a)c.df=b;return c};Jb.prototype.execute=function(a,b){if(a&&b){a=null;if(this.df!=-1)a=M(b,this.df);a!=null&&a.n()=="camera"&&this.Ha&&Kb(this.Ha,a)}};
function Lb(){this.ld=false;this.wc=0;this.i="SetCameraTarget"}Lb.prototype.h=function(){var a=new Lb;a.Jd=this.Jd;a.tc=this.tc;a.sc=this.sc;a.U=this.U;a.ye=this.ye;a.da=this.da?this.da.e():null;a.ld=this.ld;a.wc=this.wc;return a};
Lb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.U)c=a;else if(this.tc!=-1)c=M(b,this.tc);var d=c;if(d.n()=="camera"){var e=d.fa.e();switch(this.Jd){case 0:e=this.da.e();break;case 1:e=c.f.add(this.da);break;case 2:var f=null;if(this.ye)f=a;else if(this.sc!=-1)f=M(b,this.sc);if(f)e=f.f.add(this.da);break}if(e!=null)if(this.ld&&this.wc>0){a=new wb;a.R=d.fa.e();a.K=e;a.Qc=this.wc;a.wg=true;a.kg=true;xb(a);yb(c,a)}else{Mb(d,e);c=N(d,"camerafps");c!=null&&Nb(c,e)}}}};
function Ob(){this.Vh=this.yd=this.jh=0;this.Fe=-1;this.xc=100;this.i="Shoot";this.Ee=-1;this.Qi=false;this.gg=this.jg=null;this.Pi=new v}Ob.prototype.h=function(a,b){var c=new Ob;c.jh=this.jh;c.yd=this.yd;c.Vh=this.Vh;c.Fe=this.Fe;c.xc=this.xc;c.Ee=this.Ee;c.Qi=this.Qi;c.jg=this.jg;c.gg=this.gg?this.gg.h(a,b):null;c.Pi=this.Pi.e();if(c.Fe==a)c.Fe=b;if(c.Ee==a)c.Ee=b;return c};
Ob.prototype.execute=function(a,b){if(a&&b){var c=new Aa,d=false,e=null,f=null,g=Pb(b,"gameai");if(this.Ee!=-1){var i=M(b,this.Ee);if(i!=null){d=true;e=i;c.R=Da(i.gb());c.R.ra(this.Pi);Ua(i.Z,c.R);f=b.ga;if(this.Qi&&f){i=new Aa;i.R=O(f);i.K=f.fa;f=Ba(i);x(f,this.xc);i.K=i.R.add(f);Qb(this,i,g,this.xc,b);Rb(this,i,g,this.xc,e,b);c.K=i.K}else{f=i.Z;if(this.jg){i=new H;ab(i,this.jg);f=I(f,i)}c.K.set(1,0,0);Ra(f,c.K);c.K.ra(c.R)}}}else if(a!=null){e=a;if((f=N(a,"gameai"))&&f.sj){c=f.tj;d=true}}if(!d)if(f=
b.ga){e=f;c.R=O(f);c.K=f.fa;d=true}if(d){d=Ba(c);x(d,this.xc);c.K=c.R.add(d);Qb(this,c,g,this.xc,b);if(this.jh==1){e=null;if(this.Fe!=-1)e=M(b,this.Fe);if(e){e=e.h(b.Ma,-1,-1);P(b.Ma,e);if(e!=null){e.f=c.R;Q(e);e.T=true;e.Qa=-1;e.l="";b=Ba(c);b=xa(b);e.Q=b;b=this.Vh;if(b==0)b=1;g=new wb;g.R=c.R;g.K=c.K;g.Qc=c.getLength()/b;g.wg=true;xb(g);g.Pl=true;g.Il=a;g.Hl=this.yd;g.ci=true;g.cf=this.gg;g.Ag=this.xc/b;yb(e,g)}}}else if(this.jh==0){a=Rb(this,c,g,this.xc,e,b);if(a!=null){b.Gj=c.K.e();(c=N(a,"gameai"))&&
Sb(c,this.yd,a)}}}}};function Qb(a,b,c,d,e){if(c.length!=0)if(a=N(c[0],"gameai"))if(a=a.ia){e=Tb(Ub.prototype,e,b.R,b.K,a,true);if(e<d){d=Ba(b);x(d,e);b.K=b.R.add(d)}}}function Rb(a,b,c,d,e,f){a=d;d=null;for(var g=0;g<c.length;++g)if(c[g]!==e){var i=N(c[g],"gameai");if(!(i&&!(i.zb>0))){i={};i.Aa=0;if(Vb(Ub.prototype,f,c[g],b,false,false,null,i))if(i.Aa<a){a=i.Aa;d=c[g]}}}if(d){c=Ba(b);x(c,a);b.K=b.R.add(c)}return d}function Wb(){this.i="SetOrChangeAVariable"}
Wb.prototype.h=function(){var a=new Wb;a.vb=this.vb;a.Zj=this.Zj;a.Oe=this.Oe;a.md=this.md;return a};
Wb.prototype.execute=function(a,b){if(a&&b)if(this.vb!=null){a=sb(this.vb,true,b);if(a!=null){var c=null;if(this.Oe==1){c=sb(this.md,false,b);if(c==null)return}if(c==null){c=new Xb;Yb(c,this.md)}switch(this.Zj){case 0:c=c;if(c!=null){a.Hb=c.Hb;a.vc=c.vc;a.Nb=c.Nb;a.Mb=c.Mb}break;case 1:Zb(a,R(a)+R(c));break;case 2:Zb(a,R(a)-R(c));break;case 3:c=R(c);Zb(a,c!=0?R(a)/c:0);break;case 4:c=R(c);$b(a,c!=0?Math.floor(R(a)/c):0);break;case 5:Zb(a,R(a)*R(c));break;case 6:$b(a,Math.floor(R(a)*R(c)));break}ac(a,
b)}}};function bc(){this.i="IfVariable"}bc.prototype.h=function(a,b){var c=new bc;c.vb=this.vb;c.Yh=this.Yh;c.Oe=this.Oe;c.md=this.md;c.m=this.m?this.m.h(a,b):null;c.ph=this.ph?this.ph.h(a,b):null;return c};
bc.prototype.execute=function(a,b){if(a&&b)if(this.vb!=null){var c=sb(this.vb,true,b);if(c!=null){var d=null;if(this.Oe==1){d=sb(this.md,false,b);if(d==null)return}if(d==null){d=new Xb;Yb(d,this.md)}b=false;switch(this.Yh){case 0:case 1:b=c.Hb==0&&d.Hb==0?tb(c)==tb(d):q.P(R(c),R(d));if(this.Yh==1)b=!b;break;case 2:b=R(c)>R(d);break;case 3:b=R(c)<R(d);break}if(b)this.m&&this.m.execute(a);else this.ph&&this.ph.execute(a)}}};function cc(){this.ih=null;this.U=false;this.i="RestartBehaviors"}
cc.prototype.h=function(a,b){var c=new cc;c.ih=this.ih;c.U=this.U;if(c.U==a)c.U=b;return c};cc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.U)c=a;else if(this.ih!=-1)c=M(b,this.ih);if(c)for(a=0;a<c.ha.length;++a){b=c.ha[a];b!=null&&b.reset()}}};function dc(){this.i="PlaySound"}dc.prototype.h=function(a,b){var c=new dc;c.Ni=this.Ni;c.rl=this.rl;c.ck=this.ck?this.ck.e():null;c.Fd=this.Fd;c.Ng=this.Ng;c.bk=this.bk;c.Vf=this.Vf;c.Bf=this.Bf;c.Pc=this.Pc;if(c.Ni==a)c.Ni=b;return c};
dc.prototype.execute=function(a,b){if(!(b==null||this.Pc==null))this.pc=ec(q.We,this.Pc,this.bk,this.Vf)};function fc(){this.i="StopSound"}fc.prototype.h=function(){var a=new fc;a.Ll=this.Ll;a.sn=this.sn;return a};fc.prototype.execute=function(){for(var a=q.We,b=0;b<a.Tb.length;++b){var c=a.Tb[b];c.Lk=true;c.src.kc.pause()}a.Tb=[]};function gc(){this.i="StoreLoadVariable"}gc.prototype.h=function(){var a=new gc;a.ri=this.ri;a.vb=this.vb;return a};
function hc(a,b,c,d){a=new Date;a.setDate(a.getDate()+d);c=escape(c)+("; expires="+a.toUTCString());document.cookie=b+"="+c}function ic(a,b){a=document.cookie.split(";");for(var c=0;c<a.length;++c){var d=a[c],e=d.indexOf("="),f=d.substr(0,e);f=f.replace(/^\s+|\s+$/g,"");if(f==b)return unescape(d.substr(e+1))}return null}gc.prototype.execute=function(a,b){if(!(this.vb==null||this.vb=="")){a=sb(this.vb,this.ri,b);if(a!=null)try{this.ri?Yb(a,ic(this,a.getName())):hc(this,a.getName(),tb(a),99)}catch(c){}}};
function jc(a){this.be=[];this.wa=a}jc.prototype.execute=function(a){for(var b=0;b<this.be.length;++b)this.be[b].execute(a,this.wa)};function kc(a,b){b!=null&&a.be.push(b)}function lc(a,b){for(var c=0;c<a.be.length;++c){var d=a.be[c];if(d.i==b)return d}return null}jc.prototype.h=function(a,b){for(var c=new jc(this.wa),d=0;d<this.be.length;++d){var e=this.be[d];e.h!=null&&kc(c,e.h(a,b))}return c};function mc(a){this.Ha=a;this.i="RestartScene"}mc.prototype.h=function(){var a=new mc;a.Ce=this.Ce;return a};
mc.prototype.execute=function(){this.Ha&&this.Ha.Sk(this.Ce)};function nc(){this.i="ActionDeleteSceneNode"}nc.prototype.h=function(a,b){var c=new nc;c.Jf=this.Jf;c.wj=this.wj;c.tk=this.tk;if(c.Jf==a)c.Jf=b;return c};nc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.wj)c=a;else if(this.Jf!=-1)c=M(b,this.Jf);c!=null&&oc(b,c,this.tk)}};function pc(){this.i="ActionCloneSceneNode"}
pc.prototype.h=function(a,b){var c=new pc;c.If=this.If;c.qj=this.qj;c.m=this.m?this.m.h(a,b):null;if(c.If==a)c.If=b;return c};pc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.qj)c=a;else if(this.If!=-1)c=M(b,this.If);if(c){a=c.Qa;var d=-1;d=qc(b);a=c.h(c.tb,a,d);if(a!=null){a.Qa=d;P(c.tb,a);if(c=c.fb)if(c=c.h(a)){a.fb=c;b.Yc&&rc(b.Yc,c)}this.m&&this.m.execute(a)}}}};function sc(){this.i=0;this.jc=this.ab=null;this.Se=true;this.Lc=this.wb=false;this.fe=true}sc.prototype.jj=function(a){if(a){this.i=a.i;this.Se=a.Se;this.ab=a.ab;this.jc=a.jc;this.wb=a.wb;this.Lc=a.Lc;this.fe=a.fe}};sc.prototype.e=function(){var a=new sc;a.i=this.i;a.Ak=this.Ak;a.Se=this.Se;a.ab=this.ab;a.jc=this.jc;a.wb=this.wb;a.Lc=this.Lc;a.fe=this.fe;return a};function tc(a){return a.i==uc||a.i==vc||a.i==wc}n=sc.prototype;n.i=0;n.ab=null;n.jc=null;n.Se=true;n.Ak=true;n.wb=false;n.fe=true;
n.Lc=false;var uc=12,vc=13,wc=16;function xc(){this.g=new A;this.va=new sc;this.$=[];this.j=[];this.La=null;this.Ci=this.Bi=false;this.Xc=this.kd=null}n=xc.prototype;n.g=null;n.va=null;n.$=null;n.j=null;n.La=null;n.kd=null;n.Xc=null;n.update=function(a,b){if(a)this.Bi=true;else if(b)this.Ci=true;else this.La=null};function yc(a){if(!a.j||a.j.length==0)a.g.reset(0,0,0);else{var b=a.j[0];a.g.I=b.f.e();a.g.J=b.f.e();for(var c=1;c<a.j.length;++c){b=a.j[c];B(a.g,b.f)}}}
xc.prototype.h=function(){var a=new xc;a.g=this.g.e();a.va=this.va.e();if(this.j)for(var b=0;b<this.j.length;++b)a.j.push(this.j[b]);if(this.$)for(b=0;b<this.$.length;++b)a.$.push(this.$[b]);if(this.kd)for(b=0;b<this.kd.length;++b)a.kd.push(this.kd[b]);if(this.Xc)for(b=0;b<this.Xc.length;++b)a.Xc.push(this.Xc[b]);return a};function zc(){this.g=new A;this.Ja=[]}zc.prototype.Uc=function(a){this.Ja.push(a)};function Ac(a){var b=0;if(a.Ja)for(var c=0;c<a.Ja.length;++c)if(a.Ja[c].$)b+=a.Ja[c].$.length;return b/3}zc.prototype.h=function(){var a=new zc;a.g=this.g.e();if(this.Ja)for(var b=0;b<this.Ja.length;++b)this.Ja[b]&&a.Ja.push(this.Ja[b].h());return a};q.Zm=function(){this.Kj=[]};function Bc(a,b){for(var c=0;c<a.Kj.length;++c){var d=a.Kj[c];if(d.l==b)return d}return null}q.mn=function(){this.l="";this.Mg=new H;this.aa=[];this.og=[];this.xe=[];this.Nd=[];this.Be=[];this.Re=[];this.ii=new H;this.mf=new H;this.sf=new H;this.mg=new v(0,0,0);this.de=new v(1,1,1);this.ng=new K;this.Eg=new H;this.jl=false;this.To=this.Uo=this.Qo=-1};q.qn=function(){this.Mh=this.Oh=this.zh=0;this.Nl=new v;this.Ml=new v};q.pn=function(){this.frame=0;this.scale=new v};
q.nn=function(){this.frame=0;this.position=new v};q.on=function(){this.frame=0;this.rotation=new K};q.Vg=function(){this.l="";this.Lb=this.K=this.Wc=0};q.Vg.prototype.l="";q.Vg.prototype.Wc=0;q.Vg.prototype.K=0;q.Vg.prototype.Lb=0;q.qk=function(){this.l="";this.Vc=[];this.Ec=0;this.Wa=[];this.Ua=[];this.ze=[];this.vj=0;this.ul=this.of=false;this.uo=this.Xm=this.Fj=0;this.db=new A;this.pf=1;this.Xi=[];this.Oj=[]};q.qk.prototype.Uc=function(a){this.Wa.push(a)};q.qk.prototype.gb=k("db");
function Cc(a,b,c){if(!(b==null&&c!=null))if(b==null)for(b=0;b<a.ze.length;++b)Cc(a,a.ze[b],null);else{b.ii=c==null?b.Mg.e():I(c.ii,b.Mg);b.sf=b.Mg.e();b.mf=b.ii.e();if(Oa(b.Eg)){b.Eg=b.ii.e();Xa(b.Eg)}for(c=0;c<b.aa.length;++c)Cc(a,b.aa[c],b)}}function Dc(a,b,c){if(b==null)for(b=0;b<a.ze.length;++b)Dc(a,a.ze[b],null);else{b.mf=c==null||b.jl?b.sf.e():I(c.mf,b.sf);for(c=0;c<b.aa.length;++c)Dc(a,b.aa[c],b)}}
function Ec(a,b,c,d){if(b.Re.length){c=I(b.mf,b.Eg);for(var e=new v,f=new v,g=a.Wa,i,j=0;j<b.Re.length;++j){var m=b.Re[j];i=m.Nl;e.c=i.c*c.o+i.b*c.t+i.d*c.v+c.D;e.b=i.c*c.r+i.b*c.p+i.d*c.w+c.F;e.d=i.c*c.s+i.b*c.u+i.d*c.q+c.G;d&&Sa(c,f,m.Ml);i=g[m.zh];i=i.j[m.Oh];if(a.Xi[m.zh][m.Oh]){i.f.ra(y(e,m.Mh));d&&i.k.ra(y(f,m.Mh))}else{a.Xi[m.zh][m.Oh]=true;i.f=y(e,m.Mh);if(d)i.k=y(f,m.Mh)}}}for(c=0;c<b.aa.length;++c)Ec(a,b.aa[c],b,d)}
function Fc(a,b){if(!b)return null;var c=a.Oj.length;b=b.toLowerCase();for(var d=0;d<c;++d){var e=a.Oj[d];if(e.l&&e.l.toLowerCase()==b)return e}return null};function Gc(){this.Oa=[];this.S=null;this.Di=""}
function Hc(a,b,c){if(b==null||b=="")return null;var d=Ic(a,b);if(d!=null)return d;if(c){d=new qb;d.l=b;Jc(a,d);d.ad=new Image;d.ad.onload=function(){var e=d,f=a.S;if(f!=null){var g=f.ka,i=g.createTexture(),j=e.ad;if((j.width&j.width-1)!=0||(j.height&j.height-1)!=0){var m=document.createElement("canvas");if(m!=null){m.width=Kc(f,j.width);m.height=Kc(f,j.height);m.getContext("2d").drawImage(j,0,0,j.width,j.height,0,0,m.width,m.height);j=m}}g.bindTexture(g.TEXTURE_2D,i);Lc(f,i,j);g.generateMipmap(g.TEXTURE_2D);
g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_NEAREST);g.bindTexture(g.TEXTURE_2D,null);f.Yk=true;e.bb=i;e.ec=true}};d.ad.src=d.l;return d}return null}function Ic(a,b){for(var c=0;c<a.Oa.length;++c){var d=a.Oa[c];if(d.l==b)return d}return null}function Jc(a,b){if(b!=null){Ic(a,b.l)!=null&&q.ja.print("ERROR! Cannot add the texture multiple times: "+b.l);a.Oa.push(b)}};function Mc(a){this.Vl=a;this.Bn=a.length;this.Ca=0;this.Fo=null;this.Go=8;this.$l=false}function S(a){return a.Bn-a.Ca}function Nc(a,b){return a.Vl.charCodeAt(b)&255}function U(a){return Oc(a,1)!=0}function Pc(a,b){for(var c=0,d=a.Ca,e=d+b;e>d;)c=c*256+Nc(a,--e);a.Ca+=b;return c}function Oc(a,b){a=Pc(a,b);if(a&1<<b*8-1)a=(~a+1)*-1;return a}function V(a){return Oc(a,4)}
function W(a){var b;var c=a.Vl,d=a.Ca;b=c.charCodeAt(d+3)&255;var e=c.charCodeAt(d+2)&255,f=c.charCodeAt(d+1)&255;d=c.charCodeAt(d+0)&255;c=(b<<1&255|e>>7)-127;e=(e&127)<<16|f<<8|d;b=e==0&&c==-127?0:(1-2*(b>>7))*(1+e*Math.pow(2,-23))*Math.pow(2,c);a.Ca+=4;return b}Mc.prototype.pa=function(a,b){this.$l=a||0;this.buffer=[];if(b){for(var c=a=b.length,d=this.buffer=new Array(a);c;d[a-c]=b.charCodeAt(--c));this.$l&&d.reverse()}};Mc.prototype.reset=function(){this.Ca=0;return this};function Qc(){this.ka=this.canvas=null;this.height=this.width=0;this.Yk=false;this.ub=new H;this.nd=new H;this.ia=new H;this.Ib=new ka;this.Ib.Kd=0;this.Ib.Cd=0;this.Ib.wd=0;this.Ro=this.So=null;this.Db=[];this.Ob=[];this.Ao=20;this.Ri=this.Wj=this.dk=this.wl=this.vl=null;this.qe=[];this.zc=null;this.dm=false}Qc.prototype.Wj=null;Qc.prototype.Zb=k("width");function Rc(a){var b=a.Yk;a.Yk=false;return b}Qc.prototype.Yb=k("height");
function Sc(a,b){if(b!=null)for(var c=0;c<b.Ja.length;++c){var d=b.Ja[c];Tc(a,d.va);Uc(a,d)}}
function Tc(a,b){if(b!=null){var c=a.ka;if(c!=null){var d=null;try{d=b.Lc?a.Ob[b.i]:a.Db[b.i]}catch(e){}if(d!=null){a.zc=d;c.useProgram(d);if(a.Wj!=null)try{a.Wj(b.i)}catch(f){}if(d.Fn){c.enable(c.BLEND);c.blendFunc(d.Gn,d.En)}else c.disable(c.BLEND);!b.Se||tc(b)?c.depthMask(false):c.depthMask(true);b.Ak?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST);b.fe?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE);if(b.ab&&b.ab.ec){c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,b.ab.bb);c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_WRAP_S,b.wb?c.CLAMP_TO_EDGE:c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,b.wb?c.CLAMP_TO_EDGE:c.REPEAT)}else{c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,null)}c.uniform1i(c.getUniformLocation(d,"texture1"),0);if(b.jc&&b.jc.ec){c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,b.jc.bb)}else{c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,null)}c.uniform1i(c.getUniformLocation(d,"texture2"),1)}}}}
function Uc(a,b,c){if(b!=null)if(a.ka!=null){if(b.La==null)Vc(a,b);else if(b.Ci){if(!(b.j.length==0||b.$.length==0))if(b.La.Gm<b.j.length||b.La.ej<b.$.length){b.La=null;Vc(a,b)}else if(b.La!=null){for(var d=a.ka,e=b.j.length,f=b.La.sm,g=b.La.Hn,i=0;i<e;++i){var j=b.j[i];f[i*3+0]=j.f.c;f[i*3+1]=j.f.b;f[i*3+2]=j.f.d;g[i*4+0]=q.af(j.za)/255;g[i*4+1]=q.$e(j.za)/255;g[i*4+2]=q.Ze(j.za)/255;g[i*4+3]=q.Ye(j.za)/255}d.bindBuffer(d.ARRAY_BUFFER,b.La.hj);d.bufferSubData(d.ARRAY_BUFFER,0,f);d.bindBuffer(d.ARRAY_BUFFER,
b.La.Ek);d.bufferSubData(d.ARRAY_BUFFER,0,g);if(b.La.ej<b.$.length){e=b.$.length;f=new WebGLUnsignedShortArray(e);for(g=0;g<e;g+=3){f[g+0]=b.$[g+0];f[g+1]=b.$[g+2];f[g+2]=b.$[g+1]}b.La.dj=d.createBuffer();d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.La.dj);d.bufferData(d.ELEMENT_ARRAY_BUFFER,f,d.STATIC_DRAW);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,null)}b.La.ej=b.$.length;b.La.Gm=b.j.length}}else b.Bi&&Wc(a,b);b.Bi=false;b.Ci=false;b=b.La;c=c;d=a.ka;e=b.Xk&&b.Dk;d.enableVertexAttribArray(0);d.enableVertexAttribArray(1);
d.enableVertexAttribArray(2);d.enableVertexAttribArray(3);d.enableVertexAttribArray(4);d.bindBuffer(d.ARRAY_BUFFER,b.hj);d.vertexAttribPointer(0,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Em);d.vertexAttribPointer(1,2,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Fm);d.vertexAttribPointer(2,2,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.pm);d.vertexAttribPointer(3,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Ek);d.vertexAttribPointer(4,4,d.FLOAT,false,0,0);if(e){d.enableVertexAttribArray(5);
d.enableVertexAttribArray(6);d.bindBuffer(d.ARRAY_BUFFER,b.Xk);d.vertexAttribPointer(5,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Dk);d.vertexAttribPointer(6,3,d.FLOAT,false,0,0)}d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.dj);g=new H(false);a.ub.ya(g);g=I(g,a.nd);g=I(g,a.ia);f=a.zc;f.lm!=null&&d.uniformMatrix4fv(f.lm,false,Xc(a,g));if(f.km!=null){g=new H(true);g=I(g,a.nd);g=I(g,a.ia);Xa(g);g=Ya(g);d.uniformMatrix4fv(f.km,false,Xc(a,g))}if(f.im!=null){g=new H(true);g=I(g,a.nd);g=I(g,a.ia);d.uniformMatrix4fv(f.im,
false,Xc(a,g))}f.jm!=null&&d.uniformMatrix4fv(f.jm,false,Xc(a,Ya(a.ia)));f.hm!=null&&Yc(a,f,e,e);if(c==null)c=b.ej;d.drawElements(d.TRIANGLES,c,d.UNSIGNED_SHORT,0);if(e){d.disableVertexAttribArray(5);d.disableVertexAttribArray(6)}}}function Wc(a,b){if(b.La!=null){a=a.ka;for(var c=b.j.length,d=b.La.sm,e=0;e<c;++e){var f=b.j[e];d[e*3+0]=f.f.c;d[e*3+1]=f.f.b;d[e*3+2]=f.f.d}a.bindBuffer(a.ARRAY_BUFFER,b.La.hj);a.bufferSubData(a.ARRAY_BUFFER,0,d)}}
function Vc(a,b){if(b.La==null){a=a.ka;var c={},d=b.j.length,e=new WebGLFloatArray(d*3),f=new WebGLFloatArray(d*3),g=new WebGLFloatArray(d*2),i=new WebGLFloatArray(d*2),j=new WebGLFloatArray(d*4),m=null,o=null;if(b.kd)m=new WebGLFloatArray(d*3);if(b.Xc)o=new WebGLFloatArray(d*3);for(var p=0;p<d;++p){var h=b.j[p];e[p*3+0]=h.f.c;e[p*3+1]=h.f.b;e[p*3+2]=h.f.d;f[p*3+0]=h.k.c;f[p*3+1]=h.k.b;f[p*3+2]=h.k.d;g[p*2+0]=h.ua.c;g[p*2+1]=h.ua.b;i[p*2+0]=h.Pf.c;i[p*2+1]=h.Pf.b;j[p*4+0]=q.af(h.za)/255;j[p*4+1]=
q.$e(h.za)/255;j[p*4+2]=q.Ze(h.za)/255;j[p*4+3]=q.Ye(h.za)/255}if(m&&o)for(p=0;p<d;++p){h=b.kd[p];m[p*3+0]=h.c;m[p*3+1]=h.b;m[p*3+2]=h.d;h=b.Xc[p];o[p*3+0]=h.c;o[p*3+1]=h.b;o[p*3+2]=h.d}p=b.$.length;h=new WebGLUnsignedShortArray(p);for(var u=0;u<p;u+=3){h[u+0]=b.$[u+0];h[u+1]=b.$[u+2];h[u+2]=b.$[u+1]}c.hj=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.hj);a.bufferData(a.ARRAY_BUFFER,e,a.DYNAMIC_DRAW);c.sm=e;c.Em=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Em);a.bufferData(a.ARRAY_BUFFER,g,a.STATIC_DRAW);
c.Fm=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Fm);a.bufferData(a.ARRAY_BUFFER,i,a.STATIC_DRAW);c.pm=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.pm);a.bufferData(a.ARRAY_BUFFER,f,a.STATIC_DRAW);if(m&&o){c.Xk=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Xk);a.bufferData(a.ARRAY_BUFFER,m,a.STATIC_DRAW);c.Dk=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Dk);a.bufferData(a.ARRAY_BUFFER,o,a.STATIC_DRAW)}a.bindBuffer(a.ARRAY_BUFFER,null);c.Ek=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Ek);
a.bufferData(a.ARRAY_BUFFER,j,a.STATIC_DRAW);c.Hn=j;a.bindBuffer(a.ARRAY_BUFFER,null);c.dj=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.dj);a.bufferData(a.ELEMENT_ARRAY_BUFFER,h,a.STATIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);c.ka=a;c.ej=p;c.Gm=d;b.La=c;b.Bi=false;b.Ci=false}}
function Yc(a,b,c,d){var e=new ArrayBuffer(16*Float32Array.BYTES_PER_ELEMENT);e=new WebGLFloatArray(e);var f=new ArrayBuffer(20*Float32Array.BYTES_PER_ELEMENT);f=new WebGLFloatArray(f);var g=new H(true);!c&&a.qe!=null&&a.qe.length>0&&Wa(a.ia,g);for(c=0;c<4;++c){var i=c*4;if(a.qe!=null&&c<a.qe.length){var j=a.qe[c],m=Ta(g,j.bh);e[i]=m.c;e[i+1]=m.b;e[i+2]=m.d;m=1;m=d?1/(j.ta*j.ta):j.qg;e[i+3]=m;f[i]=j.za.Kd;f[i+1]=j.za.Cd;f[i+2]=j.za.wd}else{e[i]=1;e[i+1]=0;e[i+2]=0;e[i+3]=1;f[i]=0;f[i+1]=0;f[i+2]=
0}f[i+3]=1}f[16]=a.Ib.Kd;f[17]=a.Ib.Cd;f[18]=a.Ib.wd;f[19]=1;a.ka.uniform4fv(b.hm,e);a.ka.uniform4fv(b.Sn,f)}
function Zc(a,b,c,d,e,f,g){if(!(d<=0||e<=0||a.width==0||a.height==0)){var i=true;if(g==null||g==false)i=false;g=a.ka;g.enableVertexAttribArray(0);g.disableVertexAttribArray(1);g.disableVertexAttribArray(2);g.disableVertexAttribArray(3);g.disableVertexAttribArray(4);c=a.height-c;var j=2/a.width,m=2/a.height;b=b*j-1;c=c*m-1;d*=j;e*=m;j=new WebGLFloatArray(12);j[0]=b;j[1]=c;j[2]=0;j[3]=b+d;j[4]=c;j[5]=0;j[6]=b+d;j[7]=c-e;j[8]=0;j[9]=b;j[10]=c-e;j[11]=0;b=new WebGLUnsignedShortArray(6);b[0]=0;b[1]=2;
b[2]=1;b[3]=0;b[4]=3;b[5]=2;c=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,c);g.bufferData(g.ARRAY_BUFFER,j,g.STATIC_DRAW);g.vertexAttribPointer(0,3,g.FLOAT,false,0,0);d=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,d);g.bufferData(g.ELEMENT_ARRAY_BUFFER,b,g.STATIC_DRAW);a.zc=a.vl;g.useProgram(a.zc);g.uniform4f(g.getUniformLocation(a.zc,"vColor"),q.af(f)/255,q.$e(f)/255,q.Ze(f)/255,i?q.Ye(f)/255:1);g.depthMask(false);g.disable(g.DEPTH_TEST);if(i){g.enable(g.BLEND);g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA)}else g.disable(g.BLEND);
g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0);g.deleteBuffer(c);g.deleteBuffer(d)}}
function $c(a,b,c,d,e,f,g,i,j,m){if(!(f==null||f.ec==false||d<=0||e<=0||a.width==0||a.height==0)){if(j==null)j=1;if(m==null)m=1;var o=true;if(g==null||g==false)o=false;g=a.ka;g.enableVertexAttribArray(0);g.enableVertexAttribArray(1);g.disableVertexAttribArray(2);g.disableVertexAttribArray(3);g.disableVertexAttribArray(4);c=a.height-c;var p=2/a.width,h=2/a.height;b=b*p-1;c=c*h-1;d*=p;e*=h;p=new WebGLFloatArray(12);p[0]=b;p[1]=c;p[2]=0;p[3]=b+d;p[4]=c;p[5]=0;p[6]=b+d;p[7]=c-e;p[8]=0;p[9]=b;p[10]=c-
e;p[11]=0;b=new WebGLFloatArray(8);b[0]=0;b[1]=0;b[2]=j;b[3]=0;b[4]=j;b[5]=m;b[6]=0;b[7]=m;j=new WebGLUnsignedShortArray(6);j[0]=0;j[1]=2;j[2]=1;j[3]=0;j[4]=3;j[5]=2;m=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,m);g.bufferData(g.ARRAY_BUFFER,p,g.STATIC_DRAW);g.vertexAttribPointer(0,3,g.FLOAT,false,0,0);c=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,c);g.bufferData(g.ARRAY_BUFFER,b,g.STATIC_DRAW);g.vertexAttribPointer(1,2,g.FLOAT,false,0,0);b=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,
b);g.bufferData(g.ELEMENT_ARRAY_BUFFER,j,g.STATIC_DRAW);a.zc=i==null?a.wl:i;g.useProgram(a.zc);g.depthMask(false);g.disable(g.DEPTH_TEST);if(o){g.enable(g.BLEND);g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA)}else g.disable(g.BLEND);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,f.bb);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.activeTexture(g.TEXTURE1);g.bindTexture(g.TEXTURE_2D,null);g.drawElements(g.TRIANGLES,
6,g.UNSIGNED_SHORT,0);g.deleteBuffer(c);g.deleteBuffer(m);g.deleteBuffer(b)}}function ad(a,b,c,d,e,f,g){if(!(f==null||f.ec==false||d<=0||e<=0||a.width==0||a.height==0)){var i=a.ka;a.zc=a.dk;i.useProgram(a.zc);i.uniform4f(i.getUniformLocation(a.zc,"vColor"),q.af(g)/255,q.$e(g)/255,q.Ze(g)/255,q.Ye(g)/255);$c(a,b,c,d,e,f,true,a.dk,f.ak/f.Xh,f.$j/f.Wh)}}
function bd(a){if(!(a.canvas==null||a.ka==null))if(!(a.width==a.canvas.width&&a.height==a.canvas.height)){a.width=a.canvas.width;a.height=a.canvas.height;var b=a.ka;b.viewport&&b.viewport(0,0,a.width,a.height)}}
Qc.prototype.Ya=function(a){this.canvas=a;this.ka=null;try{a=["webgl","experimental-webgl","moz-webgl","webkit-3d","3d"];for(var b=0;b<a.length;b++)try{this.ka=this.canvas.getContext(a[b],{alpha:false});if(this.ka!=null)break}catch(c){}}catch(d){}if(this.ka==null)return false;else{if(typeof WebGLFloatArray=="undefined"&&typeof Float32Array!="undefined")try{WebGLFloatArray=Float32Array;WebGLUnsignedShortArray=Uint16Array}catch(e){ha(q.ja,"Error: Float32 array types for webgl not found.")}if(typeof WebGLFloatArray==
"undefined"&&typeof CanvasFloatArray!="undefined")try{WebGLFloatArray=CanvasFloatArray;WebGLUnsignedShortArray=CanvasUnsignedShortArray}catch(f){ha(q.ja,"Error: canvas array types for webgl not found.")}a=this.ka;a.getProgramParameter||(a.getProgramParameter=a.getProgrami);a.getShaderParameter||(a.getShaderParameter=a.getShaderi);a=this.ka;b=X(this,this.bg,this.Ve);var g=X(this,this.bg,this.Gk),i=X(this,this.bg,this.Mn),j=X(this,this.bg,this.Ve,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),m=X(this,this.bg,
this.fm,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),o=X(this,this.bg,this.Ve,true,a.ONE,a.ONE_MINUS_SRC_COLOR),p=X(this,this.Im,this.Gk),h=X(this,this.Im,this.Gk,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),u=X(this,this.so,this.Ve),r=X(this,this.ro,this.Nn);this.vl=X(this,this.qo,this.Pn);this.wl=X(this,this.Hm,this.On);this.dk=X(this,this.Hm,this.Ln);this.Db[0]=b;this.Db[1]=b;this.Db[2]=g;this.Db[3]=g;this.Db[4]=g;this.Db[5]=i;this.Db[uc]=o;this.Db[vc]=j;this.Db[14]=m;this.Db[11]=p;this.Db[wc]=h;this.Db[17]=
r;this.Db[23]=u;b=X(this,this.mj,this.Ve);j=X(this,this.mj,this.Ve,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);m=X(this,this.mj,this.fm,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);o=X(this,this.mj,this.Ve,true,a.ONE,a.ONE_MINUS_SRC_COLOR);p=X(this,this.Jm,this.em);h=X(this,this.Jm,this.em,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);this.Ob[0]=b;this.Ob[1]=b;this.Ob[2]=g;this.Ob[3]=g;this.Ob[4]=g;this.Ob[5]=i;this.Ob[uc]=o;this.Ob[vc]=j;this.Ob[14]=m;this.Ob[11]=p;this.Ob[wc]=h;this.Ob[17]=r;a.useProgram(b);this.zc=
b;a.clearColor(0,0,1,1);a.clearDepth(1E4);a.depthMask(true);a.enable(a.DEPTH_TEST);a.disable(a.BLEND);a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);a.enable(a.CULL_FACE);a.cullFace(a.BACK);bd(this)}return true};function cd(a,b,c){a=a.ka;var d=a.createShader(b);if(d==null)return null;a.shaderSource(d,c);a.compileShader(d);if(!a.getShaderParameter(d,a.COMPILE_STATUS)){ha(q.ja,"Error loading "+(b==a.VERTEX_SHADER?"vertex":"fragment")+" shader: "+a.getShaderInfoLog(d));return null}return d}
function X(a,b,c,d,e,f,g){if(g==null)g=false;g=g;var i=a.ka,j=b,m=c;if(j.indexOf("precision ")==-1)j="#ifdef GL_ES\t\t\t\t\t\t\t\t\t\t\t\t\n\tprecision mediump float;\t\t\t\t\t\t\t\t\t\n\t#endif\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n"+b;if(m.indexOf("precision ")==-1)m="#ifdef GL_ES\t\t\t\t\t\t\t\t\t\t\t\t\n\tprecision mediump float;\t\t\t\t\t\t\t\t\t\n\t#endif\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n"+c;b=cd(a,i.VERTEX_SHADER,j);c=cd(a,i.FRAGMENT_SHADER,m);if(!b||!c){q.ja.print("Could not create shader program");g=
null}else{m=i.createProgram();i.attachShader(m,b);i.attachShader(m,c);i.bindAttribLocation(m,0,"vPosition");i.bindAttribLocation(m,1,"vTexCoord1");i.bindAttribLocation(m,2,"vTexCoord2");i.bindAttribLocation(m,3,"vNormal");i.bindAttribLocation(m,4,"vColor");if(g){i.bindAttribLocation(m,5,"vBinormal");i.bindAttribLocation(m,6,"vTangent")}i.linkProgram(m);if(i.getProgramParameter(m,i.LINK_STATUS)){i.useProgram(m);i.uniform1i(i.getUniformLocation(m,"texture1"),0);i.uniform1i(i.getUniformLocation(m,"texture2"),
1)}else q.ja.print("Could not link program:"+i.getProgramInfoLog(m));g=m}if(g){g.Fn=d?d:false;g.Gn=e;g.En=f;a=a.ka;g.lm=a.getUniformLocation(g,"worldviewproj");g.km=a.getUniformLocation(g,"normaltransform");g.im=a.getUniformLocation(g,"modelviewtransform");g.jm=a.getUniformLocation(g,"worldtransform");g.hm=a.getUniformLocation(g,"arrLightPositions");g.Sn=a.getUniformLocation(g,"arrLightColors")}return g}Qc.prototype.Tc=function(a){a&&a.ya(this.ia)};
function Xc(a,b){return new WebGLFloatArray([b.o,b.r,b.s,b.A,b.t,b.p,b.u,b.B,b.v,b.w,b.q,b.C,b.D,b.F,b.G,b.H])}Qc.prototype.deleteTexture=function(a){if(a!=null){this.ka.deleteTexture(a.bb);a.bb=null;a.ec=false}};function Kc(a,b){--b;for(a=1;a<32;a<<=1)b|=b>>a;return b+1}
function Lc(a,b,c){b=a.ka;try{b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,c)}catch(d){if(d.code!=null&&DOMException!=null&&DOMException.ln!=null&&d.code==DOMException.ln){a.dm==false&&ha(q.ja,"<i>A security setting in the browser prevented loading a texture.<br/>Workaround: run this from a webserver, change security settings, or allow the specific domain.</i>",true);a.dm=true}else try{b.texImage2D(b.TEXTURE_2D,0,c)}catch(e){}}}
function dd(a){if(a.Ri==null){var b=null;b=new xc;var c=new L(true),d=new L(true),e=new L(true),f=new L(true),g=b.$;g.push(0);g.push(2);g.push(1);g.push(0);g.push(3);g.push(2);g=b.j;g.push(c);g.push(d);g.push(e);g.push(f);c.ua.c=1;c.ua.b=1;c.f.set(1,-1,0);d.ua.c=1;d.ua.b=0;d.f.set(1,1,0);e.ua.c=0;e.ua.b=0;e.f.set(-1,1,0);f.ua.c=0;f.ua.b=1;f.f.set(-1,-1,0);a.Ri=b}}n=Qc.prototype;n.qo="\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = vPosition;\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Hm="\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\tattribute vec4 vTexCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = vPosition;\t\t\t\t\t\t\t\t\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";n.Pn="\t\t\t\t\t\tuniform vec4 vColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t         gl_FragColor = vColor;\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Ln="\t\t\t\tuniform vec4 vColor;\t\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        float alpha = texture2D(texture1, texCoord).r;\t\t        gl_FragColor = vec4(vColor.rgb, alpha);\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.bg="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv_color = vColor;\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.mj="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 n = normalize(vec3(vNormal.xyz));\t\t\t\t\t\t\tvec4 currentLight = vec4(0, 0, 0, 1.0);\t\t\t\t\t\t\tfor(int i=0; i<4; ++i)\t\t\t\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec3 lPos = vec3(arrLightPositions[i].xyz);\t\t\t\t\t\tvec3 vertexToLight = lPos - vec3(vPosition.xyz);\t\t\t\tfloat distance = length( vertexToLight );\t\t\t\t\t\tfloat distanceFact = 1.0 / (arrLightPositions[i].w * distance); \t\t\tvertexToLight = normalize(vertexToLight); \t\t\t\t\t\tfloat angle = max(0.0, dot(n, vertexToLight));\t\t\t\t\tfloat intensity = angle * distanceFact;\t\t\t\t\t\t\tcurrentLight = currentLight + vec4(arrLightColors[i].x*intensity, arrLightColors[i].y*intensity, arrLightColors[i].z*intensity, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentLight = currentLight + arrLightColors[4];\t\t\t\tcurrentLight = max(currentLight, vec4(0.0,0.0,0.0,0.0));\t\t\tcurrentLight = currentLight * vec4(vColor.x, vColor.y, vColor.z, 1.0);\t\t\tv_color = min(currentLight, vec4(1.0,1.0,1.0,1.0));\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.so="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\tattribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\t\tv_color = vColor;\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Im="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 modelviewtransform;\t\t\t\t\t\t\t\n\tuniform mat4 worldtransform;\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tgl_Position = worldviewproj * vPosition;\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\tuse reflection\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 pos = normalize((modelviewtransform * vPosition).xyz);\t\t\t\t\t\n\t\tvec3 n = normalize((normaltransform * vec4(vNormal, 1)).xyz);\t\t\n\t\tvec3 r = reflect( pos.xyz, n.xyz );\t\t\t\t\t\t\t\n\t\tfloat m = sqrt( r.x*r.x + r.y*r.y + (r.z+1.0)*(r.z+1.0) ); \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\ttexture coordinates\t\t\t\t\t\t\t\t\n\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\n\t\tv_texCoord2.x = (r.x / (2.0 * m)  + 0.5);\t\t\t\t\t\t\n\t\tv_texCoord2.y = (r.y / (2.0 * m)  + 0.5);\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
n.Jm="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 modelviewtransform;\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\tuse reflection\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 pos = normalize((modelviewtransform * vPosition).xyz);\t\t\t\t\t\n\t\tvec3 nt = normalize((normaltransform * vec4(vNormal, 1)).xyz);\t\t\n\t\tvec3 r = reflect( pos.xyz, nt.xyz );\t\t\t\t\t\t\t\n\t\tfloat m = sqrt( r.x*r.x + r.y*r.y + (r.z+1.0)*(r.z+1.0) ); \n\t\t//\ttexture coordinates\t\t\t\t\t\t\t\t\n\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\n\t\tv_texCoord2.x = r.x / (2.0 * m)  + 0.5;\t\t\t\t\t\t\n\t\tv_texCoord2.y = r.y / (2.0 * m)  + 0.5;\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 n = normalize(vec3(vNormal.xyz));\t\t\t\t\t\t\tvec4 currentLight = vec4(0.0, 0.0, 0.0, 1.0);\t \t\t\t\tfor(int i=0; i<4; ++i)\t\t\t\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec3 lPos = vec3(arrLightPositions[i].xyz);\t\t\t\t\t\tvec3 vertexToLight = lPos - vec3(vPosition.xyz);\t\t\t\tfloat distance = length( vertexToLight );\t\t\t\t\t\tfloat distanceFact = 1.0 / (arrLightPositions[i].w * distance); \t\t\tvertexToLight = normalize(vertexToLight); \t\t\t\t\t\tfloat angle = max(0.0, dot(n, vertexToLight));\t\t\t\t\tfloat intensity = angle * distanceFact;\t\t\t\t\t\t\tcurrentLight = currentLight + vec4(arrLightColors[i].x*intensity, arrLightColors[i].y*intensity, arrLightColors[i].z*intensity, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentLight = currentLight + arrLightColors[4];\t\t\t\tcurrentLight = max(currentLight, vec4(0.0,0.0,0.0,0.0));\t\t\t//v_color = currentLight;\t\t\t\t\t\t\t\t\n\t\tv_color = min(currentLight, vec4(1.0,1.0,1.0,1.0));\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
n.ro="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 worldtransform;\t\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\n    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t\n\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t\n    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\n\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\n\tattribute vec3 vBinormal;\t\t\t\t\t\t\t\t\t\n\tattribute vec3 vTangent;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t// Output:\t\t\t\t\t\t\t\t\t\t\t\t\t\n    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\n\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\n\tvarying vec3 v_lightVector[4];\t\t\t\t\t\t\t\t\n\tvarying vec3 v_lightColor[4];\t\t\t\t\t\t\t\t\n\tvarying vec3 ambientLight;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t\n    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n        gl_Position = worldviewproj * vPosition;\t\t\t\t\n        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\n\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec4 pos = vec4(dot(vPosition, worldtransform[0]), dot(vPosition, worldtransform[1]), dot(vPosition, worldtransform[2]), dot(vPosition, worldtransform[3]));\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// transform normal, binormal and tangent\t\t\t\t\t\n\t\tvec3 normal = vec3(dot(vNormal.xyz, worldtransform[0].xyz), dot(vNormal.xyz, worldtransform[1].xyz), dot(vNormal.xyz, worldtransform[2].xyz));\t\t\n\t\tvec3 tangent = vec3(dot(vTangent.xyz, worldtransform[0].xyz), dot(vTangent.xyz, worldtransform[1].xyz), dot(vTangent.xyz, worldtransform[2].xyz));     \n\t\tvec3 binormal = vec3(dot(vBinormal.xyz, worldtransform[0].xyz), dot(vBinormal.xyz, worldtransform[1].xyz), dot(vBinormal.xyz, worldtransform[2].xyz));     \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 temp = vec3(0.0, 0.0, 0.0);\t\t\t\t\t\t\n\t\tfor(int i=0; i<4; ++i) \t\t\t\t\t\t\t\t\t\n\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\tvec3 lightPos = vec3(arrLightPositions[i].xyz);\t\t\n\t\t\tvec3 vertexToLight = lightPos - vec3(pos.xyz); \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// transform the light vector 1 with U, V, W\t\t\n\t\t\ttemp.x = dot(tangent.xyz, vertexToLight);\t\t\t\t\n\t\t\ttemp.y = dot(binormal.xyz, vertexToLight);\t\t\t\t\n\t\t\ttemp.z = dot(normal.xyz, vertexToLight);\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// normalize light vector\t\t\t\t\t\n\t\t\ttemp = normalize(temp); \t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// move from -1..1 to 0..1 and put into output\t\t\n\t\t\ttemp = temp * 0.5;\t\t\t\t\t\t\t\n\t\t\ttemp = temp + vec3(0.5,0.5,0.5);\t\t\t\n\t\t\tv_lightVector[i] = temp;\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// calculate attenuation\t\t\t\t\t\n\t\t\tfloat distanceFact = 1.0 / sqrt(dot(vertexToLight, vertexToLight) * arrLightPositions[i].w); \n\t\t\tv_lightColor[i] = min(vec3(arrLightColors[i].x*distanceFact, arrLightColors[i].y*distanceFact, arrLightColors[i].z*distanceFact), vec3(1,1,1));\t\t\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// ambient light\n\t\tambientLight = arrLightColors[4].xyz;\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
n.On="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord);\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Ve="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord) * v_color;\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.fm="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord) * v_color;\t\t\tif(gl_FragColor.a < 0.5)\t\t\t\t\t\t\t\t\t\t\tdiscard;\t\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Gk="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tgl_FragColor = col1 * col2;\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Mn="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tgl_FragColor = col1 * col2 * 3.0;\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.em="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 final = col1 * col2 * v_color;\t\t\t\t\t\t\t\tgl_FragColor = vec4(final.x, final.y, final.z, col1.w);\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Nn="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\tvarying vec3 v_lightVector[4];\t\t\t\t\t\t\t\t\tvarying vec3 v_lightColor[4];\t\t\t\t\t\t\t\t\tvarying vec3 ambientLight;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 colorMapSample = texture2D(texture1, v_texCoord1);\t\t\tvec3 normalMapVector = texture2D(texture2, v_texCoord1).xyz;\t\t//normalMapVector -= vec3(0.5, 0.5, 0.5);\t\t\t\t\t\n\t\t//normalMapVector = normalize(normalMapVector); \t\t\t\n\t\tnormalMapVector *= vec3(2.0, 2.0, 2.0);\t\t\t\t\t\n\t\tnormalMapVector -= vec3(1.0, 1.0, 1.0);\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 totallight = vec3(0.0, 0.0, 0.0);\t\t\t\t\t\t\n\t\tfor(int i=0; i<4; ++i) \t\t\t\t\t\t\t\t\t\n\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// process light\t\t\t\t\t\t\t\t\t\n\t\t\t//vec3 lightvect = v_lightVector[i] + vec3(-0.5, -0.5, -0.5); \n\t\t\tvec3 lightvect = (v_lightVector[i] * vec3(2.0, 2.0, 2.0)) - vec3(1.0, 1.0, 1.0); \n\t\t\tlightvect = normalize(lightvect);\t\t\t\t\t\n\t\t\tfloat luminance = dot(lightvect, normalMapVector); // normal DOT light\t\t\n\t\t\tluminance = clamp(luminance, 0.0, 1.0);\t// clamp result to positive numbers\t\t\n\t\t\tlightvect = luminance * v_lightColor[i];\t// luminance * light color \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// add to previously calculated lights\t\t\t\t\n\t\t\ttotallight = totallight + lightvect;\t\t\t\t\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\ttotallight = totallight + ambientLight;\t\t\t\t\t\n\t\tgl_FragColor = colorMapSample * vec4(totallight.x, totallight.y, totallight.z, 0.0);\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";function ed(a,b){for(var c=0;c<a.rk.length;++c){var d=a.rk[c];if(d.l==b)return d}return null}function fd(a,b,c){if(b==null||b=="")return null;var d=ed(a,b);if(d!=null)return d;if(c){b=d=new gd(b);if(b!=null){ed(a,b.l)!=null&&q.ja&&q.ja.print("ERROR! Cannot add the sound multiple times: "+b.l);a.rk.push(b)}return d}return null}
function ec(a,b,c,d){if(b==null)return null;var e=null;e=typeof b=="string"?fd(a,b,true):b;if(e==null||e.kc==null)return null;hd(a);for(b=0;b<a.Tb.length;)if(a.Tb[b].src===e){a.Tb[b].src.kc.pause();a.Tb.splice(b,1)}else++b;try{e.kc.currentTime=0}catch(f){}if(typeof d==="undefined")d=1;e.kc.volume=d*a.Dd;e.kc.play();var g=new id(e);g.rm=d;a.Tb.push(g);e.Mk&&e.kc.removeEventListener("ended",e.Mk,false);e.kc.Mk=null;if(c){g.mm=true;a=function(){if(!g.Lk){try{this.currentTime=0}catch(i){}this.play()}};
e.kc.addEventListener("ended",a,false);e.kc.Mk=a}return g}function jd(a,b){a.Dd=b;if(a.Dd<0)a.Dd=0;if(a.Dd>1)a.Dd=1;try{for(b=0;b<a.Tb.length;++b){var c=a.Tb[b];c.src.kc.volume=c.rm*a.Dd}}catch(d){}}function hd(a){for(var b=0;b<a.Tb.length;)if(kd(a.Tb[b]))a.Tb.splice(b,1);else++b}q.We=new function(){this.rk=[];this.Tb=[];this.Dd=1};function gd(a){this.l=a;var b=null;try{b=new Audio;b.src=a}catch(c){}this.loaded=true;this.kc=b}
function id(a){this.src=a;this.mm=this.Lk=false;this.rm=1;this.startTime=(new Date).getTime()}function kd(a){if(a.Lk)return true;if(a.mm)return false;var b=(new Date).getTime(),c=a.src.duration;return c>0&&b>a.startTime+c};function ld(a,b,c,d,e,f){if((b==null||b==true)&&q.ja==null)q.ja=new da(a,d);this.Rm=a;this.fc=document.getElementById(this.Rm);this.sa=new md;this.S=null;this.Um=false;this.zf=null;this.Ta=new Gc;this.Pd=new q.Zm;this.xh=this.Kg=false;this.ol=0;this.Lb=60;this.Yj=this.Uj=this.Vj=this.Sb=null;this.Gh=this.xm=false;this.$m=f==null?'Error: This browser does not support WebGL (or it is disabled).<br/>See <a href="www.ambiera.com/copperlicht/browsersupport.html">here</a> for details.':f;this.Cf=[];this.Hi=
[];this.Tg=false;this.Sg=this.Rg=this.Qb=this.Pb=0;this.Ug=true;this.Hj=0;this.si=null;e!=null&&nd(this,true,e);od(this);if(c)this.Lb=c;var g=this;setInterval(function(){g.si!=null&&pd(g);if(q.ja){++g.ol;var i=0,j=0;if(g.Ta){i=g.Ta;for(var m=j=0;m<i.Oa.length;++m)i.Oa[m].ec==false&&++j;i=j;j=g.Ta.Oa.length}if(g.xh&&i==0){g.xh=false;qd(g)}if(g.Kg||i){m="Loading";if(i>0)m="Textures loaded: "+(j-i)+"/"+j;switch(g.ol%4){case 0:m+="   ";break;case 1:m+=".  ";break;case 2:m+=".. ";break;case 3:m+="...";
break}ga(q.ja,m)}else ga(q.ja,null)}},500);rd(Y(),this)}function sd(a){if(a.sa==null)return null;return a.sa.Zf()}
function td(a){document.onkeydown=function(f){ud(a,f)};document.onkeyup=function(f){vd(a,f)};var b=a.fc;if(b!=null){b.onmousemove=function(f){wd(a,f)};b.onmousedown=function(f){xd(a,f)};b.onmouseup=function(f){yd(a,f)};b.onmouseover=function(){a.Ug=true};b.onmouseout=function(){a.Ug=false};zd(a);try{var c=function(f){(f=f)||(f=event);if(f){f=f.detail<0||f.wheelDelta>0?1:-1;var g=sd(a);if(g!=null){var i=g.ga;i!=null&&i.bf(f);for(i=0;i<g.rc.length;++i)g.rc[i].bf(f)}}};b.addEventListener("mousewheel",
c,false);b.addEventListener("DOMMouseScroll",c,false)}catch(d){}try{c=function(f){yd(a,f.changedTouches[0])&&Ad(a,f,true)};b.addEventListener("touchstart",function(f){xd(a,f.changedTouches[0])&&Ad(a,f,true)},false);b.addEventListener("touchcancel",c,false);b.addEventListener("touchleave",c,false);b.addEventListener("touchmove",function(f){wd(a,f.changedTouches[0])&&Ad(a,f,true)},false)}catch(e){}}}
ld.prototype.load=function(a){if(!Bd(this)){nd(this,false,this.$m);return false}var b=this;this.Kg=true;(new ja(a)).load(function(c){b.Qk(c,a)});return true};
function Bd(a){if(a.S!=null)return true;var b=a.fc;if(b==null)return false;var c=q.kk!=null&&q.kk.Lo;a.S=new Qc;if(c||a.S.Ya(b)==false)if(q.kk!=null){a.S=new q.kk;if(a.S.Ya(b)==false)return false}else return false;if(a.Ta)a.Ta.S=a.S;td(a);setInterval(function(){Cd(a);if(q.ja!=null){a.sa.Zf();var d=q.ja;if(d.hl!=null){d.frames+=1;var e=(new Date).getTime();if(e-d.Nk>1E3){var f="FPS: "+(d.frames/(e-d.Nk)*1E3).toFixed(2);d.hl.nodeValue=f;d.Nk=e;d.frames=0}}}},1E3/a.Lb);return true}
ld.prototype.Qk=function(a,b){this.Kg=false;var c=new Dd;a=c.Rn(a,b,this.Ta,this.Pd,this);if(a!=null){this.sa=a;if(c.nl){this.kl=c.Ol;this.Wm=b}if(a.Tl)this.xh=true;else qd(this)}};function qd(a){a.cj(a.sa.Zf());Cd(a);a.Yj!=null&&a.Yj()}
function Cd(a){if(!(a.sa==null||a.S==null))if(!(a.Kg||a.xh)){od(a);Ed(a);var b=a.sa.Zf();if(!a.Um&&b){a.Sb&&a.Sb();var c;var d=a.S;b.Jg=d;if(b.Ba==0)b.Ba=t();b.wn=null;c=false;var e;if(b.xg.length==0)e=false;else{e=t();for(var f=false,g=0;g<b.xg.length;){var i=b.xg[g];if(i.oo<e){i.Wd.tb&&i.Wd.tb.removeChild(i.Wd);b.xg.splice(g,1);f=true;b.Yc&&i.Wd.fb&&Fd(b.Yc,i.Wd.fb)}else++g}e=f}if(e)c=true;if(b.Ma.Sb(b,t()))c=true;if(b.ga){e=new H(false);b.ga.ub.ya(e);e=I(e,b.ga.Qe);e=!e.P(b.qi)}else e=true;d=d?
Rc(d):false;if(b.Cg||b.Gi==0&&(e||d)||b.Gi==1&&(e||c||d)||b.Gi==2||Gd(Y())){b.Cg=false;c=true}else c=false;if(c){d=a.S;c=b.bl;if(d.ka!=null){bd(d);d=d.ka;d.depthMask(true);d.clearColor(q.af(c)/255,q.$e(c)/255,q.Ze(c)/255,1);d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}a.Vj&&a.Vj();Hd(b,a.S);a.Uj&&a.Uj();b=q.$a;b!=null&&Id(b,a.S);b=a.S;b.ka!=null&&b.ka.flush()}}Ed(a)}}ld.prototype.Wl=function(a){if(this.sa){this.sa.hc.push(a);this.sa.hc.length==1&&this.sa.ym(a)}};
function Ib(a,b,c){if(!a.sa)return false;var d=a.sa.hc;b=b;if(c)b=b.toLowerCase();for(var e=0;e<d.length;++e){var f=d[e].l;if(c)f=f.toLowerCase();if(b==f){a.cj(d[e]);return true}}return false}
ld.prototype.cj=function(a){if(!a)return false;var b=a.bj()=="panorama",c=a.bj()=="free",d=null;this.sa.ym(a);if(!a.Ul){a.Ul=true;var e=false,f=Jd(a,"camera");if(f)for(var g=0;g<f.length;++g){var i=f[g];if(i&&i.$k){d=i;e=true;Kd(d,this.S.width,this.S.height);break}}if(!e){e=4/3;if(this.S.width&&this.S.height)e=this.S.width/this.S.height;d=new Ld;Md(d,e);P(a.Ma,d);e=null;if(!b){e=new Nd(d,this);yb(d,e)}if(c){if(a.uj!=null)d.f=a.uj.e();if(a.bi!=null)e!=null?Nb(e,a.bi):Mb(d,a.bi)}e&&Od(e,!b)}a.ga=d;
a.Yc=Pd(a,true);Qd(this,a.Ma,a.Yc)}Y().cc=a;a.Gi=this.sa.yn;return a.Cg=true};function Ed(a){if(a.zf!=null){var b=a.sa.Zf();if(b!=null)if(a.zf.Y===b){a.S&&Kd(a.zf,a.S.Zb(),a.S.Yb());b.ga=a.zf;a.zf=null}}}function ud(a,b){var c=sd(a);if(c==null)return false;if(b==null)b=window.event;var d=false;c=c.ga;if(c!=null)d=c.Xd(b);for(c=0;c<a.Cf.length;++c)if(a.Hi[c].Xd(b))d=true;return Ad(a,b,d)}
function vd(a,b){var c=sd(a);if(c==null)return false;if(b==null)b=window.event;var d=false;c=c.ga;if(c!=null)d=c.Yd(b);for(c=0;c<a.Cf.length;++c)if(a.Cf[c].Yd(b))d=true;return Ad(a,b,d)}function Ad(a,b,c){if(c){try{b.preventDefault()}catch(d){}return true}return false}function od(a){for(var b=0,c=0,d=a.fc;d!=null;){b+=d.offsetLeft;c+=d.offsetTop;d=d.offsetParent}a.dl=b;a.el=c}function Rd(a,b){return b.pageX?b.pageX-a.dl:b.clientX-a.fc.offsetLeft+document.body.scrollLeft}
function Sd(a,b){return b.pageY?b.pageY-a.el:b.clientY-a.fc.offsetTop+document.body.scrollTop}function xd(a,b){if(b==null)b=window.event;a.Tg=true;a.Ug=true;if(b){a.Rg=Rd(a,b);a.Sg=Sd(a,b)}var c=sd(a);if(c==null)return false;var d=c.ga;d!=null&&d.pd(b);d=b;for(var e=0;e<c.rc.length;++e)c.rc[e].pd(d);return Ad(a,b,true)}function Td(a){if(a.Gh){a.Pb=0;a.Qb=0;a.Rg=0;a.Sg=0}else{a.Rg=a.Pb;a.Sg=a.Qb}}
function yd(a,b){if(b==null)b=window.event;a.Tg=false;var c=sd(a);if(c==null)return false;var d=c.ga;d!=null&&d.Rc(b);d=b;for(var e=0;e<c.rc.length;++e)c.rc[e].Rc(d);return Ad(a,b,true)}
function wd(a,b){if(b==null)b=window.event;if(b){a.Pb=Rd(a,b);a.Qb=Sd(a,b)}if(a.Gh){var c=b.movementY||b.mozMovementY||b.webkitMovementY||0;a.Pb=b.movementX||b.mozMovementX||b.webkitMovementX||0;a.Qb=c}c=sd(a);if(c==null)return false;var d=c.ga;d!=null&&d.Zd(b);d=b;for(var e=0;e<c.rc.length;++e)c.rc[e].Zd(d);return Ad(a,b,true)}ld.prototype.Sb=null;ld.prototype.Uj=null;ld.prototype.Vj=null;ld.prototype.Yj=null;
function Ud(a,b,c){a=a.S;if(a==null)return null;var d=a.ub,e=a.nd;if(d==null||e==null)return null;d=I(d,e);var f=new kb;f.jj(d);d=mb(f);e=nb(f).substract(d);f=pb(f).substract(d);var g=a.Zb();a=a.Yb();c=c/a;return d.add(y(e,b/g)).add(y(f,c))}
function Vd(a,b){var c=new H(false),d=a.S;if(!d.ub)return null;d.ub.ya(c);c=I(c,d.nd);a=d.Zb()/2;d=d.Yb()/2;if(d==0||a==0)return null;b=new v(b.c,b.b,b.d);b.W=1;c=c;var e=b.e();e.qa=b.W;b.c=e.c*c.o+e.b*c.t+e.d*c.v+e.qa*c.D;b.b=e.c*c.r+e.b*c.p+e.d*c.w+e.qa*c.F;b.d=e.c*c.s+e.b*c.u+e.d*c.q+e.qa*c.G;b.W=e.c*c.A+e.b*c.B+e.d*c.C+e.qa*c.H;c=b.W==0?1:1/b.W;if(b.d<0)return null;e=new Ca;e.c=a*b.c*c+a;e.b=d-d*b.b*c;return e}function Kb(a,b){if(b!=null)a.zf=b}
function Qd(a,b,c){if(b){for(var d=0;d<b.ha.length;++d){var e=b.ha[d];if(e)if(e.n()=="collisionresponse")e.Tc(c);else if(e.n()=="onclick"||e.n()=="onmove")e.ia=c;else if(e.n()=="gameai")e.ia=c;else if(e.n()=="3rdpersoncamera")e.ia=c}for(d=0;d<b.aa.length;++d)(e=b.aa[d])&&Qd(a,e,c)}}
ld.prototype.Sk=function(a){if(!a||!this.sa)return false;if(this.kl==null)return false;for(var b=null,c=-1,d=0;d<this.sa.hc.length;++d)if(a==this.sa.hc[d].l){c=d;b=this.sa.hc[d];break}if(c==-1)return false;a=(new Dd).Sk(this.kl,b,c,this.Wm,this.Ta,this.Pd,this);if(a!=null){b=this.sa.Zf()==b;this.sa.hc[c]=a;b&&this.cj(a)}return true};function pd(a){if(!a.Kg&&!a.xh){a.si.style.display="none";a.si=null}}
function nd(a,b,c){if(a.fc!=null){var d=document.createElement("div");a.fc.parentNode.appendChild(d);var e=document.createElement("div");od(a);var f=b?23:100,g=b?30:0,i=a.dl+(a.fc.width-200)/2,j=a.el+a.fc.height/2;b||(j+=30);c=c.replace("$PROGRESS$","");e.style.cssText="position: absolute; left:"+i+"px; top:"+j+"px; color:#ffffff; padding:5px; background-color:#000000; height:"+f+"px; width:200px; border-radius:5px; border:1px solid #777777;  opacity:0.5;";c='<p style="margin:0; padding-left:'+g+
'px; padding-bottom:5px;">'+c+"</p> ";if(b)c+='<img style="position:absolute; left:5px; top:3px;" src="copperlichtdata/loading.gif" />';e.innerHTML=c;d.appendChild(e);if(b)a.si=d}}
function zd(a){function b(){var d=a.fc;if(a.xm){d.lo=d.requestPointerLock||d.mozRequestPointerLock||d.webkitRequestPointerLock;d.lo()}}function c(){var d=a.fc;a.Gh=document.PointerLockElement===d||document.mozPointerLockElement===d||document.webkitPointerLockElement===d?true:false}document.addEventListener("fullscreenchange",b,false);document.addEventListener("mozfullscreenchange",b,false);document.addEventListener("webkitfullscreenchange",b,false);document.addEventListener("pointerlockchange",c,
false);document.addEventListener("mozpointerlockchange",c,false);document.addEventListener("webkitpointerlockchange",c,false)}function Wd(a,b,c){if(c==null)c=a.fc;a.xm=b;c.requestFullscreen=c.requestFullscreen||c.Po||c.mozRequestFullScreen||c.msRequestFullscreen||c.webkitRequestFullscreen;c.requestFullscreen()};function Z(){this.i=-1;this.f=new v;this.Q=new v;this.oa=new v(1,1,1);this.T=true;this.l="";this.ib=0;this.Qa=-1;this.tb=null;this.aa=[];this.ha=[];this.Z=new H;this.fb=this.Y=null}n=Z.prototype;n.Ya=function(){this.f=new v;this.Q=new v;this.oa=new v(1,1,1);this.aa=[];this.ha=[];this.Z=new H};n.f=null;n.Q=null;n.oa=null;n.T=true;n.l="";n.Qa=-1;n.fb=null;n.tb=null;n.n=l("none");n.gb=function(){return new A};
function N(a,b){for(var c=0;c<a.ha.length;++c){var d=a.ha[c];if(d.n()==b)return d}return null}function Xd(a,b){for(var c=0;c<a.ha.length;++c){var d=a.ha[c].Ue(b);if(d!=null)return d}return null}function Yd(a){var b=a.gb().e();eb(a.Z,b);return b}
function Zd(a,b,c,d,e){b.l=new String(a.l);b.T=a.T;b.ib=a.ib;b.f=a.f.e();b.Q=a.Q.e();b.oa=a.oa.e();b.i=a.i;c&&P(c,b);for(c=0;c<a.aa.length;++c){var f=a.aa[c];if(f){f=f.h(b,-1,-1);f!=null&&P(b,f)}}for(c=0;c<a.ha.length;++c)yb(b,a.ha[c].h(a,a.Y,d,e));if(a.Z)b.Z=a.Z.e();b.Y=a.Y}Z.prototype.h=l(null);function yb(a,b){b!=null&&a.ha.push(b)}function $d(a,b){if(b!=null){var c;for(c=0;c<a.ha.length;++c)if(a.ha[c]===b){a.ha.splice(c,1);return}}}
function P(a,b){if(b){b.Y=a.Y;b.tb&&b.tb.removeChild(b);b.tb=a;a.aa.push(b)}}Z.prototype.removeChild=function(a){for(var b=0;b<this.aa.length;++b)if(this.aa[b]===a){a.tb=null;this.aa.splice(b,1);return}};Z.prototype.Ka=function(a){if(this.T)for(var b=0;b<this.aa.length;++b)this.aa[b].Ka(a)};
Z.prototype.Sb=function(a,b){var c=false;if(this.T){var d,e=this.ha.length;for(d=0;d<e;){c=this.ha[d].Xa(this,b)||c;var f=e;e=this.ha.length;f>=e&&++d}Q(this);for(d=0;d<this.aa.length;++d)c=this.aa[d].Sb(a,b)||c}return c};Z.prototype.Kk=function(){var a=new H;ab(a,this.Q);cb(a,this.f);if(this.oa.c!=1||this.oa.b!=1||this.oa.d!=1){var b=new H;db(b,this.oa);a=I(a,b)}return a};function Q(a){a.Z=a.tb!=null?I(a.tb.Z,a.Kk()):a.Kk()}Z.prototype.rb=aa();function O(a){return new v(a.Z.D,a.Z.F,a.Z.G)}
Z.prototype.Ac=l(0);Z.prototype.lc=l(null);function ae(a){for(a=a;a;){if(!a.T)return false;a=a.tb}return true};function Ld(){this.Ya();this.g=new A;this.$k=this.Hc=false;this.fa=new v(0,0,10);this.Vb=new v(0,1,0);this.ub=new H;this.Qe=new H;this.Jc=q.PI/2.5;this.mc=4/3;this.Xf=0.1;this.Wf=3E3;this.Th=this.vn=true;$a(this.ub,this.Jc,this.mc,this.Xf,this.Wf)}Ld.prototype=new Z;function be(a){$a(a.ub,a.Jc,a.mc,a.Xf,a.Wf)}Ld.prototype.n=l("camera");function Md(a,b){if(!q.P(a.mc,b)){a.Th=false;a.mc=b;be(a)}}function ce(a,b){if(!q.P(a.Jc,b))if(!isNaN(b)){a.Jc=b;be(a)}}
function Mb(a,b){if(b){a.fa=b.e();if(a.vn){Q(a);a.Q=xa(b.substract(O(a)))}}}Ld.prototype.Sb=function(a,b){a=Z.prototype.Sb.call(this,a,b);de(this);return a};function de(a){var b=O(a),c=a.fa.e();if(b.P(c))c.c+=1;var d=a.Qe;a=a.Vb;c=c.substract(b);c.normalize();a=wa(a,c);a.normalize();var e=wa(c,a);d.o=a.c;d.r=e.c;d.s=c.c;d.A=0;d.t=a.b;d.p=e.b;d.u=c.b;d.B=0;d.v=a.d;d.w=e.d;d.q=c.d;d.C=0;d.D=-a.ea(b);d.F=-e.ea(b);d.G=-c.ea(b);d.H=1;d.Da=false}n=Ld.prototype;
n.Ka=function(a){if(a.ga===this){ee(a,this,2);Z.prototype.Ka.call(this,a)}};n.rb=function(a){de(this);if(this.mc==0||this.Th){Kd(this,a.width,a.height);this.mc==0&&Md(this,0.75)}this.ub.ya(a.ub);this.Qe.ya(a.nd)};n.pd=function(a){for(var b=0;b<this.ha.length;++b)this.ha[b].pd(a)};n.bf=function(a){for(var b=0;b<this.ha.length;++b)this.ha[b].bf(a)};n.Rc=function(a){for(var b=0;b<this.ha.length;++b)this.ha[b].Rc(a)};n.Zd=function(a){for(var b=0;b<this.ha.length;++b)this.ha[b].Zd(a)};
n.Xd=function(a){for(var b=false,c=0;c<this.ha.length;++c)if(this.ha[c].Xd(a))b=true;return b};n.Yd=function(a){for(var b=false,c=0;c<this.ha.length;++c)if(this.ha[c].Yd(a))b=true;return b};n.h=function(a,b,c){var d=new Ld;Zd(this,d,a,b,c);if(this.fa)d.fa=this.fa.e();if(this.Vb)d.Vb=this.Vb.e();if(this.ub)d.ub=this.ub.e();if(this.Qe)d.Qe=this.Qe.e();d.Jc=this.Jc;d.mc=this.mc;d.Xf=this.Xf;d.Wf=this.Wf;if(this.g)d.g=this.g.e();return d};
function Kd(a,b,c){if(!(b==0||c==0))if(q.P(a.mc,0)||a.Th){Md(a,b/c);a.Th=true}};function fe(){this.Ya();this.g=new A;this.Hc=false;this.ba=null;this.Eo=true;this.fb=null}fe.prototype=new Z;n=fe.prototype;n.gb=function(){if(this.ba)return this.ba.g;return this.g};n.Qn=k("ba");n.zm=ca("ba");n.n=l("mesh");n.Ka=function(a){var b=this.ba;if(this.T&&b){for(var c=false,d=false,e=0;e<b.Ja.length;++e)if(tc(b.Ja[e].va))c=true;else d=true;c&&ee(a,this,ge);d&&ee(a,this,he);Z.prototype.Ka.call(this,a)}};n.rb=function(a){a.Tc(this.Z);Sc(a,this.ba)};
n.Ac=function(){if(this.ba)return this.ba.Ja.length;return 0};n.lc=function(a){if(this.ba!=null)if(a>=0&&a<this.ba.Ja.length)return this.ba.Ja[a].va;return null};n.h=function(a,b,c){var d=new fe;Zd(this,d,a,b,c);if(this.ba)d.ba=this.ba.h();d.hk=this.hk;d.Hc=this.Hc;if(this.g)d.g=this.g.e();return d};function ie(){this.ba=new zc;var a=[0,1,2,0,2,3],b=new xc;this.ba.Uc(b);b.va.wb=true;b.$=a;b.j.push(this.Ea(-1,-1,-1,0,0,1,1,1));b.j.push(this.Ea(1,-1,-1,0,0,1,0,1));b.j.push(this.Ea(1,1,-1,0,0,1,0,0));b.j.push(this.Ea(-1,1,-1,0,0,1,1,0));b=new xc;this.ba.Uc(b);b.va.wb=true;b.$=a;b.j.push(this.Ea(1,-1,-1,-1,0,0,1,1));b.j.push(this.Ea(1,-1,1,-1,0,0,0,1));b.j.push(this.Ea(1,1,1,-1,0,0,0,0));b.j.push(this.Ea(1,1,-1,-1,0,0,1,0));b=new xc;this.ba.Uc(b);b.va.wb=true;b.$=a;b.j.push(this.Ea(-1,-1,1,1,0,0,
1,1));b.j.push(this.Ea(-1,-1,-1,1,0,0,0,1));b.j.push(this.Ea(-1,1,-1,1,0,0,0,0));b.j.push(this.Ea(-1,1,1,1,0,0,1,0));b=new xc;this.ba.Uc(b);b.va.wb=true;b.$=a;b.j.push(this.Ea(1,-1,1,0,0,-1,1,1));b.j.push(this.Ea(-1,-1,1,0,0,-1,0,1));b.j.push(this.Ea(-1,1,1,0,0,-1,0,0));b.j.push(this.Ea(1,1,1,0,0,-1,1,0));b=new xc;this.ba.Uc(b);b.va.wb=true;b.$=a;b.j.push(this.Ea(1,1,-1,0,-1,0,1,1));b.j.push(this.Ea(1,1,1,0,-1,0,0,1));b.j.push(this.Ea(-1,1,1,0,-1,0,0,0));b.j.push(this.Ea(-1,1,-1,0,-1,0,1,0));b=new xc;
this.ba.Uc(b);b.va.wb=true;b.$=a;b.j.push(this.Ea(1,-1,1,0,1,0,1,1));b.j.push(this.Ea(1,-1,-1,0,1,0,0,1));b.j.push(this.Ea(-1,-1,-1,0,1,0,0,0));b.j.push(this.Ea(-1,-1,1,0,1,0,1,0))}ie.prototype=new fe;n=ie.prototype;n.n=l("sky");n.Ea=function(a,b,c,d,e,f,g,i){d=new L(true);d.f.c=a;d.f.b=b;d.f.d=c;d.ua.c=g;d.ua.b=i;return d};n.Ka=function(a){if(this.T){ee(a,this,1);Z.prototype.Ka.call(this,a)}};
n.rb=function(a){var b=this.Y.ga;if(b&&this.ba){var c=new H(false);this.Z.ya(c);cb(c,O(b));b=(b.Xf+b.Wf)*0.5;var d=new H;db(d,new v(b,b,b));a.Tc(I(c,d));Sc(a,this.ba)}};n.h=function(a,b,c){var d=new ie;Zd(this,d,a,b,c);if(this.ba)d.ba=this.ba.e();d.hk=this.hk;d.Hc=this.Hc;if(this.g)d.g=this.g.e();return d};new fe;function je(){this.Ya();this.g=new A;this.Nf=this.kh=10;this.Hg=false;this.gc=new xc;this.cg=new L(true);this.dg=new L(true);this.eg=new L(true);this.fg=new L(true);var a=this.gc.$;a.push(0);a.push(2);a.push(1);a.push(0);a.push(3);a.push(2);a=this.gc.j;a.push(this.cg);a.push(this.dg);a.push(this.eg);a.push(this.fg);this.cg.ua.c=1;this.cg.ua.b=1;this.dg.ua.c=1;this.dg.ua.b=0;this.eg.ua.c=0;this.eg.ua.b=0;this.fg.ua.c=0;this.fg.ua.b=1;for(var b=0;b<4;++b)B(this.g,a[b].f)}je.prototype=new Z;n=je.prototype;
n.gb=k("g");n.n=l("billboard");n.Ka=function(a){if(this.T){ee(a,this,tc(this.gc.va)?ge:he);Z.prototype.Ka.call(this,a)}};
n.rb=function(a){var b=this.Y.ga;if(b)if(this.Hg){e=O(this);var c=O(b),d=b.Vb;b=b.fa.substract(c);b.normalize();c=wa(d,b);ra(c)==0&&c.set(d.b,d.c,d.d);c.normalize();z(c,0.5*this.kh);d=wa(c,b);d.normalize();z(d,0.5*this.Nf);this.Hg&&d.set(0,-0.5*this.Nf,0);z(b,1);oa(this.cg.f,e);this.cg.f.ra(c);this.cg.f.ra(d);oa(this.dg.f,e);this.dg.f.ra(c);ma(this.dg.f,d);oa(this.eg.f,e);ma(this.eg.f,c);ma(this.eg.f,d);oa(this.fg.f,e);ma(this.fg.f,c);this.fg.f.ra(d);this.gc.update(true);e=new H(true);a.Tc(e);Tc(a,
this.gc.va);Uc(a,this.gc)}else{var e=O(this);a.Ri==null&&dd(a);d=a.Ri;b=new H(true);db(b,new v(this.kh*0.5,this.Nf*0.5,0));c=a.nd.e();cb(c,new v(0,0,0));var f=new H(true);Wa(c,f);cb(f,e);b=I(f,b);a.Tc(b);Tc(a,this.gc.va);Uc(a,d)}};n.Ac=l(1);n.lc=function(){return this.gc.va};n.h=function(a,b,c){var d=new je;Zd(this,d,a,b,c);if(this.g)d.g=this.g.e();d.kh=this.kh;d.Nf=this.Nf;d.Hg=this.Hg;d.gc.va=this.gc.va.e();return d};function ke(){this.Ya();this.g=new A;this.pa=new xc;this.xb=new v(0,-0.03,0);this.yb=new v(0,0,0);this.Vi=this.oi=0;this.Ra=[]}ke.prototype=new Z;n=ke.prototype;n.xb=null;n.Mc=10;n.yb=null;n.se=1E3;n.Og=2E3;n.Pg=200;n.vf=10;n.ui=20;n.xi=4278190080;n.vi=4294967295;n.wf=5;n.xf=5;n.tf=7;n.Qg=7;n.Bg=false;n.lf=500;n.lf=0;n.nf=false;n.ji=500;n.dc=null;n.Ef=false;n.Li=20;n.Mi=20;
n.h=function(a,b,c){var d=new ke;Zd(this,d,a,b,c);if(this.g)d.g=this.g.e();d.xb=this.xb.e();d.Mc=this.Mc;d.yb=this.yb.e();d.se=this.se;d.Og=this.Og;d.Pg=this.Pg;d.vf=this.vf;d.ui=this.ui;d.xi=this.xi;d.vi=this.vi;d.wf=this.wf;d.xf=this.xf;d.tf=this.tf;d.Qg=this.Qg;d.Bg=true;d.lf=this.lf;d.xj=this.xj;d.nf=this.nf;d.ji=this.ji;d.dc=this.dc;d.Ef=this.Ef;d.Li=this.Li;d.Mi=this.Mi;d.pa.va=this.pa.va.e();return d};n.gb=k("g");n.n=l("particlesystem");
n.Ka=function(a){if(this.T){ee(a,this,tc(this.pa.va)?ge:he);Z.prototype.Ka.call(this,a)}};n.rb=aa();n.Ac=l(1);n.lc=function(){return this.pa.va};
n.Sb=function(a,b){var c=false;if(this.T)if(this.oi==0){this.oi=b;c=false}else{c=b-this.oi;this.oi=b;if(this.T){var d=false;d=this.ui-this.vf;var e=1E3/(d?this.vf+Math.random()*d:this.vf);d=this.Ra.length;this.Vi+=c;if(this.Vi<=e)d=false;else{e=this.Vi/e+0.5;this.Vi=0;if(d+e>this.Pg)e-=d+e-this.Pg;if(e<=0)d=false;else{var f=this.xb.e();Ra(this.Z,f);for(var g=Qa(this.Z).c,i=pa(this.yb),j=d;j<d+e;++j){var m=new le;m.Bc=new v(0,0,0);if(!i){if(this.yb.c!=0)m.Bc.c=Math.random()*this.yb.c-this.yb.c*0.5;
if(this.yb.b!=0)m.Bc.b=Math.random()*this.yb.b-this.yb.b*0.5;if(this.yb.d!=0)m.Bc.d=Math.random()*this.yb.d-this.yb.d*0.5}m.startTime=b;m.Nh=f.e();if(this.Mc){var o=f.e(),p=Math.random()*this.Mc*2-this.Mc;p*=q.$c;var h=Math.cos(p);p=Math.sin(p);o.c=o.c*h-o.b*p;o.b=o.c*p+o.b*h;p=Math.random()*this.Mc*2-this.Mc;p*=q.$c;h=Math.cos(p);p=Math.sin(p);o.b=o.b*h-o.d*p;o.d=o.b*p+o.d*h;ya(o,Math.random()*this.Mc*2-this.Mc);m.Nh=o}m.Ah=this.Og-this.se==0?b+this.se:b+this.se+Math.random()*(this.Og-this.se);m.color=
q.gm(this.xi,this.vi,Math.random()*100/100);m.Bm=m.color;m.Cm=m.Nh.e();if(this.wf==this.tf&&this.xf==this.Qg){m.Kh=this.wf;m.Lh=this.xf}else{o=Math.random()*100/100;h=1-o;m.Kh=this.wf*o+this.tf*h;m.Lh=this.xf*o+this.Qg*h}m.Kh*=g;m.Lh*=g;m.Vk=m.Kh;m.Wk=m.Lh;Ua(this.Z,m.Bc);this.Ra.unshift(m)}d=true}}if(!this.Bg&&!this.nf&&!this.Ef)e=false;else{e=0;f=null;if(this.Bg)for(e=0;e<this.Ra.length;++e){f=this.Ra[e];if(f.Ah-b<this.lf)f.color=q.gm(f.Bm,this.xj,(f.Ah-b)/this.lf)}if(this.nf){g=ua(this.dc,Qa(this.Z));
for(e=0;e<this.Ra.length;++e){f=this.Ra[e];i=(b-f.startTime)/this.ji;i=q.Wb(i,0,1);i=1-i;f.Nh=za(f.Cm,g,i)}}if(this.Ef){g=Qa(this.Z).c;for(e=0;e<this.Ra.length;++e){f=this.Ra[e];i=(b-f.startTime)/(f.Ah-f.startTime);f.Vk=f.Kh+this.Li*i*g;f.Wk=f.Lh+this.Mi*i*g}}e=true}d=e||d;e=new v(this.Z.D,this.Z.F,this.Z.G);this.pa.g.reset(e.c,e.b,e.d);if(this.Ra.length!=0)d=true;for(e=0;e<this.Ra.length;){f=this.Ra[e];if(b>f.Ah)this.Ra.splice(e,1);else{f.Bc.ra(y(f.Nh,c));B(this.pa.g,f.Bc);++e}}c=this.tf*0.5;this.pa.g.J.c+=
c;this.pa.g.J.b+=c;this.pa.g.J.d+=c;this.pa.g.I.c-=c;this.pa.g.I.b-=c;this.pa.g.I.d-=c;c=new H(false);Wa(this.Z,c);eb(c,this.pa.g);c=d}else c=false}return Z.prototype.Sb.call(this,a,b)||c};n.Ka=function(a){if(this.T){if(this.Ra.length!=0)ee(a,this,tc(this.pa.va)?ge:he);Z.prototype.Ka.call(this,a)}};
n.rb=function(a){if(this.Y.ga)if(this.Ra.length!=0){if(this.Ra.length*4>this.pa.j.length||this.Ra.length*6>this.pa.$.length){for(var b=this.pa.j.length,c=this.pa.j;this.pa.j.length<this.Ra.length*4;){var d=null;d=new L(true);d.ua.set(0,0);c.push(d);d=new L(true);d.ua.set(0,1);c.push(d);d=new L(true);d.ua.set(1,1);c.push(d);d=new L(true);d.ua.set(1,0);c.push(d)}b=b;c=this.Ra.length*6;d=this.pa.$;for(var e=this.pa.$.length;e<c;e+=6){d.push(0+b);d.push(2+b);d.push(1+b);d.push(0+b);d.push(3+b);d.push(2+
b);b+=4}}b=a.nd;c=new v(-b.s,-b.u,-b.q);d=0;var f=null;for(e=0;e<this.Ra.length;++e){var g=this.Ra[e];f=0.5*g.Vk;var i=new v(b.o*f,b.t*f,b.v*f);f=-0.5*g.Wk;var j=new v(b.r*f,b.p*f,b.w*f);f=this.pa.j[0+d];f.f=g.Bc.add(i).add(j);f.za=g.color;f.k=c;f=this.pa.j[1+d];f.f=g.Bc.add(i).substract(j);f.za=g.color;f.k=c;f=this.pa.j[2+d];f.f=g.Bc.substract(i).substract(j);f.za=g.color;f.k=c;f=this.pa.j[3+d];f.f=g.Bc.substract(i).add(j);f.za=g.color;f.k=c;d+=4}b=new H(true);a.Tc(b);this.pa.update(false,true);
Tc(a,this.pa.va);Uc(a,this.pa,this.Ra.length*2*3)}};function le(){this.Nh=this.Bc=null;this.Bm=this.color=this.Ah=this.startTime=0;this.Cm=null;this.Lh=this.Kh=this.Wk=this.Vk=0};function la(){this.bh=new v(0,0,0);this.za=new ka;this.ta=100;this.qg=0.01}n=la.prototype;n.e=function(){var a=new la;a.bh=this.bh.e();a.za=this.za.e();a.ta=this.ta;a.qg=this.qg;return a};n.bh=null;n.za=null;n.qg=null;n.ta=null;function me(){this.Kc=new la;this.g=new A;this.Ya()}me.prototype=new Z;n=me.prototype;n.n=l("light");n.Kc=null;n.h=function(a,b,c){var d=new me;Zd(this,d,a,b,c);d.Kc=this.Kc.e();d.g=this.g.e();return d};
n.Ka=function(a){this.T&&ee(a,this,ne);Z.prototype.Ka.call(this,a);this.Kc.bh=O(this)};n.gb=k("g");n.rb=function(a){a.qe.push(this.Kc)};function oe(){this.Ya();this.g=new A;this.Uf=0;this.le=false;this.ob=[]}oe.prototype=new Z;n=oe.prototype;n.Uf=0;n.le=false;n.ob=[];n.gb=k("g");n.n=l("path");n.h=function(a,b,c){var d=new oe;Zd(this,d,a,b,c);if(this.g)d.g=this.g.e();d.Uf=this.Uf;d.le=this.le;d.ob=[];for(a=0;a<this.ob.length;++a)d.ob.push(this.ob[a].e());return d};function pe(a,b){if(b<0||b>=a.ob.length)return new v(0,0,0);a.Z||Q(a);b=a.ob[b];b=b.e();Ua(a.Z,b);return b}
function qe(a,b,c){if(a.le)return b<0?c+b:b>=c?b-c:b;return b<0?0:b>=c?c-1:b}
function re(a,b,c){var d=a.ob.length;if(a.le)b*=d;else{b=q.Wb(b,0,1);b*=d-1}var e=new v;if(d==0)return e;if(d==1)return e;b=b;var f=q.Kn(b),g=Math.floor(b)%d,i=a.ob[qe(a,g-1,d)];e=a.ob[qe(a,g+0,d)];b=a.ob[qe(a,g+1,d)];var j=a.ob[qe(a,g+2,d)],m=2*f*f*f-3*f*f+1;d=-2*f*f*f+3*f*f;g=f*f*f-2*f*f+f;f=f*f*f-f*f;i=b.substract(i);z(i,a.Uf);j=j.substract(e);z(j,a.Uf);e=y(e,m);e.ra(y(b,d));e.ra(y(i,g));e.ra(y(j,f));if(!c){a.Z||Q(a);Ua(a.Z,e)}return e};function se(){this.Ya();this.g=new A;this.sl=this.Ng=this.Fd=0;this.Qm=false;this.Vf=this.Lj=this.pl=0;this.Bf=false;this.pc=null;this.tn=false;this.tl=this.wk=0}se.prototype=new Z;se.prototype.gb=k("g");se.prototype.n=l("sound");se.prototype.Ka=function(a){if(this.T){ee(a,this,he);Z.prototype.Ka.call(this,a)}};
function te(a,b,c,d){var e=a.Vf;if(d)if(b)if(d=d.ga){var f=O(d);d.fa.substract(f);c=f.qb(c);if(!(c<a.Fd)){c-=a.Fd;d=a.Ng-a.Fd;if(d>0){if(c>d)c=d;d=10;if(c!=0)d=a.Fd/c;e*=d;if(e>10)e=10}else e=10}if(e>1)e=1;if(b)try{b.src.kc.volume=e}catch(g){}}}function ue(a,b){if(!a.pc&&a.Pc){a.tn=false;a.pc=ec(q.We,a.Pc,b);if(!a.Bf){b=O(a);te(a,a.pc,b,a.Y)}}}
se.prototype.Sb=function(a,b){try{var c=O(this);this.pc&&!this.Bf&&te(this,this.pc,c,a);switch(this.sl){case 0:break;case 1:if(this.pc&&kd(this.pc)){this.pc=null;var d=this.pl-this.Lj;if(d<2)d=2;this.wk=b+Math.random()*d+this.Lj}else if(!this.pc&&(!this.wk||b>this.wk))this.Pc&&ue(this,false);break;case 2:this.pc||this.Pc&&ue(this,true);break;case 3:if(!this.tl)if(this.Pc){ue(this,true);++this.tl}break}}catch(e){}return false};
se.prototype.h=function(a,b,c){var d=new se;Zd(this,d,a,b,c);if(this.g)d.g=this.g.e();return d};function ve(a){this.Ya();this.Fa=a;this.g=new A;this.ue=this.te=100;this.Ge=this.He=50;this.we=this.ve=0.5;this.Je=1/6;this.Ie=1/6;this.Mf=this.fd=true;this.nc=0;this.Od=this.bb=null;this.Df=true;this.je=false;this.Qf=1;this.Ic=this.Sa="";this.Ke=0;this.Wg=this.Fg=this.Xg=this.ki=this.Xj=this.lg=false;this.mh=this.nh=null;this.fl=this.gl="";this.Zh=0}ve.prototype=new Z;n=ve.prototype;n.Ic="";n.Ke=0;n.Qf=1;n.am=l(false);n.gb=k("g");n.n=l("2doverlay");
n.Uk=function(a){this.Sa=a;this.je=this.Sa!=null&&this.Sa!="";if(this.Ic=="")this.Ic="12;default;arial;normal;bold;true"};n.Ka=function(a){if(this.T){ee(a,this,we);Z.prototype.Ka.call(this,a)}};
n.rb=function(a){var b=xe(this,true,a),c=false;if(this.Fa!=null&&this.lg){c=this.Fa.Pb;var d=this.Fa.Qb;c=b.x<=c&&b.y<=d&&b.x+b.Ia>=c&&b.y+b.Ga>=d}if(c&&this.Xg)Zc(a,b.x,b.y,b.Ia,b.Ga,this.Fg,true);else this.Mf&&Zc(a,b.x,b.y,b.Ia,b.Ga,this.nc,true);d=this.bb;if(c&&this.Od&&this.Wg)d=this.Od;if(d!=null&&d.ec){var e=d.Zb(),f=d.Yb();if(this.Df){if(e&&f&&b.Ga&&b.Ia){var g=b.Ia;e=g*(f/e);if(e>b.Ga){f=b.Ga/e;g*=f;e*=f}b.Ia=g;b.Ga=e;$c(a,b.x,b.y,b.Ia,b.Ga,d,true)}}else $c(a,b.x,b.y,b.Ia,b.Ga,d,true)}if(this.je&&
this.Ic&&this.Sa!=""){a:{e=b.Ia;(d=this.nh==null||false)||(d=this.gl!=this.Sa||this.fl!=this.Ic);if(d){ye(this,a);d=document.createElement("canvas");if(d!=null){d.width=1;d.height=1;g=null;try{g=d.getContext("2d");if(g==null)break a}catch(i){break a}var j=this.Ic;f=12;var m="Arial",o=false,p=false;if(j.indexOf("#fnt_")==0)j=j.substr(5);j=j.split(";");for(var h=0;h<j.length;++h){var u=j[h],r=u.toLowerCase();if(h==0)f=parseInt(r);else if(h==2)m=u;else if(h==3){if(r.indexOf("italic")!=-1)o=true}else if(h==
4)if(r.indexOf("bold")!=-1)p=true}j="";if(o)j+="italic ";if(p)j+="bold ";this.Zh=f*96/72;j+=this.Zh+"px ";j+=m;f=j;g.font=f;if(this.Qf==2){m=[];o=this.Sa;p=g;u=h=j="";r=o.length;for(var J=0,D=e-6,w="c",C=0;C<r;++C){w=o.charAt(C);var E=false;if(w=="\r"){E=true;w=" ";if(o.charAt(C+1)=="\n"){o=o.substr(0,C).concat(o.substr(C+2));--r}}else if(w=="\n"){E=true;w=" "}if(w==" "||w==0||C==r-1){if(h.length){var F=p.measureText(u).width,T=p.measureText(h).width;if(J+T+F>D){J=T;m.push(j);j=h}else{j=j.concat(u);
j=j.concat(h);J+=F+T}u=h=""}u=u.concat(w);if(E){j=j.concat(u);j=j.concat(h);m.push(j);u=h=j="";J=0}}else h=h.concat(w)}j=j.concat(u);j=j.concat(h);m.push(j);o=this.Zh*1.2;j=m.length;p=0;d.width=e;d.height=Math.max(1,j*o);g.fillStyle="rgba(0, 0, 0, 1)";g.fillRect(0,0,d.width,d.height);g.fillStyle="rgba(255, 255, 255, 1)";g.textBaseline="top";g.font=f;for(e=0;e<m.length;++e){g.fillText(m[e],0,p);p+=o}}else{e=g.measureText(this.Sa);d.width=e.width;d.height=this.Zh*1.2;g.fillStyle="rgba(0, 0, 0, 1)";
g.fillRect(0,0,d.width,d.height);g.fillStyle="rgba(255, 255, 255, 1)";g.textBaseline="top";g.font=f;g.fillText(this.Sa,0,0)}m=d;o=a.ka;d=o.createTexture();o.bindTexture(o.TEXTURE_2D,d);g=m.width;e=m.height;f=g;p=e;if((m.width&m.width-1)!=0||(m.height&m.height-1)!=0){p=document.createElement("canvas");p.width=Kc(a,m.width);p.height=Kc(a,m.height);p.getContext("2d").drawImage(m,0,0,m.width,m.height,0,0,m.width,m.height);m=p;f=p.width;p=p.height}Lc(a,d,m);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,
o.NEAREST);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST);o.generateMipmap(o.TEXTURE_2D);o.bindTexture(o.TEXTURE_2D,null);m=new qb;m.l="";m.bb=d;m.ad=null;m.ec=true;m.Xh=f;m.Wh=p;m.ak=g;m.$j=e;this.mh=this.nh=m;this.gl=this.Sa;this.fl=this.Ic}}}d=this.nh;g=this.Ke;if(c){if(this.mh)d=this.mh;g=this.ki}if(d){c=d.ak;e=d.$j;this.Qf==1?ad(a,b.x+(b.Ia-c)/2,b.y+(b.Ga-e)/2,c,e,d,g):ad(a,b.x,b.y,c,e,d,g)}}else ye(this,a)};
function ye(a,b){b.deleteTexture(a.nh);b.deleteTexture(a.mh);a.nh=null;a.mh=null}ve.prototype.Ac=l(0);function xe(a,b,c){b=c.Zb();c=c.Yb();var d={};if(a.fd){d.x=a.te;d.y=a.ue;d.Ia=a.He;d.Ga=a.Ge}else{d.x=a.ve*b;d.y=a.we*c;d.Ia=a.Je*b;d.Ga=a.Ie*c}return d}
ve.prototype.h=function(a,b,c){var d=new ve;Zd(this,d,a,b,c);d.te=this.te;d.ue=this.ue;d.He=this.He;d.Ge=this.Ge;d.ve=this.ve;d.we=this.we;d.Je=this.Je;d.Ie=this.Ie;d.fd=this.fd;d.Mf=this.Mf;d.nc=this.nc;d.bb=this.bb;d.Od=this.Od;d.Df=this.Df;d.je=this.je;d.Qf=this.Qf;d.Sa=this.Sa;d.Ic=this.Ic;d.Ke=this.Ke;d.lg=this.lg;d.Xj=this.Xj;d.ki=this.ki;d.Xg=this.Xg;d.Fg=this.Fg;d.Wg=this.Wg;return d};function ze(a,b){ve.call(this,a);this.hf=null;this.Kb=this.Jb=0;this.yi=false;this.oc=this.li=this.El=this.Dl=this.ik=this.jk=0;yb(this,new Ae(a,b,this))}ze.prototype=new ve;ze.prototype.n=l("mobile2dinput");ze.prototype.am=l(true);
ze.prototype.rb=function(a){var b=xe(this,true,a),c=false;if(this.Fa!=null){var d=this.Fa.Pb,e=this.Fa.Qb;this.yi=b.x<=d&&b.y<=e&&b.x+b.Ia>=d&&b.y+b.Ga>=e;if(this.lg)c=this.yi}if(c&&this.Xg)Zc(a,b.x,b.y,b.Ia,b.Ga,this.Fg,true);else this.Mf&&Zc(a,b.x,b.y,b.Ia,b.Ga,this.nc,true);d=this.bb;if(c&&this.Od&&this.Wg)d=this.Od;e=c=0;if(d!=null&&d.ec){var f=d.Zb(),g=d.Yb();if(this.Df){if(f&&g&&b.Ga&&b.Ia){c=b.Ia;e=c*(g/f);if(e>b.Ga){f=b.Ga/e;c*=f;e*=f}b.Ia=c;b.Ga=e;$c(a,b.x,b.y,b.Ia,b.Ga,d,true);c=b.Ia;e=
b.Ga}}else{$c(a,b.x,b.y,b.Ia,b.Ga,d,true);c=b.Ia;e=b.Ga}}this.jk=c;this.ik=e;this.Dl=b.x;this.El=b.y;if(this.li==0&&this.hf!=null&&this.hf.ec&&d!=null&&d.ec){f=this.Jb*Math.sqrt(1-0.5*this.Kb*this.Kb);g=this.Kb*Math.sqrt(1-0.5*this.Jb*this.Jb);f=(f+1)*0.5;g=(g+1)*0.5;var i=1/(d.Zb()/Number(this.hf.Zb()));d=1/(d.Yb()/Number(this.hf.Yb()));i=i*c;d=d*e;$c(a,b.x+f*c-i*0.5,b.y+g*e-d*0.5,i,d,this.hf,true)}};function Be(){this.Ya();this.g=new A;this.Hc=false;this.fb=this.mb=null;this.uh=this.th=this.Ig=0;this.lb=[];this.kb=0.25;this.xd=t();this.jb=this.Na=this.zj=0;this.Cb=false;this.ie=0;this.Mj=20}Be.prototype=new Z;Be.prototype.gb=k("g");Be.prototype.Sc=function(a){if(!this.mb)return false;a=Fc(this.mb,a);if(!a)return false;Ce(this,a.Wc,a.K);this.kb=a.Lb;return true};
function Gb(a,b,c){if(!a.mb)return false;var d=a.mb;if(!d)return false;var e=Fc(d,b);if(e){Ce(a,e.Wc,e.K);e.Lb!=0&&De(a,e.Lb);a.Cb=c}else if(b){b=b.toLowerCase();if(b=="all"){Ce(a,0,Math.floor(d.Ec));d.vj!=0&&De(a,d.vj);a.Cb=c}else if(b=="none"){Ce(a,0,0);a.Cb=c}}return true}n=Be.prototype;n.zm=function(a){if(a){this.mb=a;this.g=a.gb();Ce(this,0,Math.floor(a.Ec))}};n.n=l("animatedmesh");
n.Ka=function(a){if(this.T&&this.mb){var b=this.lb,c=false;if(b!=null)for(var d=0;d<b.length;++d)if(tc(b[d]))c=true;c?ee(a,this,ge):ee(a,this,he);Z.prototype.Ka.call(this,a)}};n.Ac=function(){if(this.lb!=null)return this.lb.length;if(this.ba)return this.ba.Ja.length;return 0};n.lc=function(a){if(this.lb)if(a>=0&&a<this.lb.length)return this.lb[a];else if(this.mb&&this.mb.Vc&&a>=0&&this.lb.length==a&&a<256){a=new sc;this.lb.push(a);return a}return null};
n.h=function(a,b,c){var d=new Be;Zd(this,d,a,b,c);d.mb=this.mb;if(this.g)d.g=this.g.e();d.Hc=this.Hc;d.fb=this.fb;d.Ig=this.Ig;d.th=this.th;d.uh=this.uh;d.lb=[];for(a=0;a<this.lb.length;++a)d.lb.push(this.lb[a].e());d.kb=this.kb;d.xd=this.xd;d.zj=this.zj;d.Na=this.Na;d.jb=this.jb;d.Cb=this.Cb;d.ie=this.ie;d.Mj=this.Mj;return d};function De(a,b){a.kb=b}function Ee(a,b){a.Cb=b}
function Ce(a,b,c){if(!a.mb)return false;var d=Math.floor(a.mb.Ec)-1,e=a.Na,f=a.jb;if(c<b){a.Na=q.Wb(c,0,d);a.jb=q.Wb(b,a.Na,d)}else{a.Na=q.Wb(b,0,d);a.jb=q.Wb(c,a.Na,d)}if(e!=a.Na||f!=a.jb){a.ie=q.Wb(a.Na,a.Na,a.jb);a.xd=t()-Math.floor((a.ie-a.Na)/a.kb)}return true}
Be.prototype.Sb=function(a,b){var c=t();if(this.Ig==0||c-this.Ig>this.Mj){var d;d=0;if(this.th!=0){this.uh=(b-this.xd)*this.th;if(this.uh>1)this.uh=this.th=0}if(this.Na==this.jb)d=this.Na;else if(this.kb==0)d=this.Na;else{d=0;if(this.Cb){d=Math.abs(Math.floor((this.jb-this.Na)/this.kb));d=this.kb>0?this.Na+(b-this.xd)%d*this.kb:this.jb-(b-this.xd)%d*-this.kb}else if(this.kb>0){d=(b-this.xd)*this.kb;d=this.Na+d;if(d>this.jb)d=this.jb}else{d=(b-this.xd)*-this.kb;d=this.jb-d;if(d<this.Na)d=this.Na}d=
d}this.ie=d;this.Ig=c}return Z.prototype.Sb.call(this,a,b)};
Be.prototype.rb=function(a){var b=this.Y.rj;if(b){a:{var c=Yd(this);c=Fa(c);for(var d=0;d<6;++d){for(var e=false,f=0;f<8;++f){var g;g=b.Pa[d];g=g.k.ea(c[f])+g.Va;g=g<-1.0E-6?1:g>1.0E-6?0:2;if(g!=0){e=true;break}}if(!e){b=false;break a}}b=true}if(!b)return}if(b=this.mb){a.Tc(this.Z);if(c=this.mb){d=false;d=this.ie;e=1;if(e==null)e=1;if(!c.of||q.P(c.Fj,d))d=false;else{c.Fj=d;if(e<=0)d=false;else{for(e=0;e<c.Ua.length;++e){f=c.Ua[e];g=f.mg.e();var i=f.de.e(),j=f.ng.e(),m=-1,o=m=-1,p=f.xe;o=f.Nd;var h=
f.Be,u=undefined,r=u=u=undefined;m=r=undefined;if(p.length){m=-1;if(m==-1)for(r=0;r<p.length;++r){u=p[r];if(u.frame>=d){m=r;break}}if(m!=-1)if(c.pf==0||m==0){u=p[m];u.position.e()}else if(c.pf==1){u=p[m];p=p[m-1];r=d-u.frame;m=p.frame-d;oa(g,na(sa(sa(p.position.substract(u.position),1/(r+m)),r),u.position))}}if(o.length){m=-1;if(m==-1)for(r=0;r<o.length;++r){u=o[r];if(u.frame>=d){m=r;break}}if(m!=-1)if(c.pf==0||m==0){u=o[m];u.scale.e()}else if(c.pf==1){u=o[m];o=o[m-1];r=d-u.frame;m=o.frame-d;oa(i,
na(sa(sa(o.scale.substract(u.scale),1/(r+m)),r),u.scale))}}if(h.length){o=-1;if(o==-1)for(r=0;r<h.length;++r){u=h[r];if(u.frame>=d){o=r;break}}if(o!=-1)if(c.pf==0||o==0){u=h[o];u.rotation.e()}else if(c.pf==1){u=h[o];h=h[o-1];r=d-u.frame;m=h.frame-d;gb(j,u.rotation,h.rotation,r/(r+m))}}f.mg=g.e();f.de=i.e();f.ng=j.e()}for(d=0;d<c.Ua.length;++d){e=c.Ua[d];if(e.xe.length||e.Nd.length||e.Be.length){if(!e.ng)e.ng=new K;if(!e.mg)e.mg=new v;e.sf=hb(e.ng);f=e.sf;g=e.mg;f.o+=g.c*f.A;f.r+=g.b*f.A;f.s+=g.d*
f.A;f.t+=g.c*f.B;f.p+=g.b*f.B;f.u+=g.d*f.B;f.v+=g.c*f.C;f.w+=g.b*f.C;f.q+=g.d*f.C;f.D+=g.c*f.H;f.F+=g.b*f.H;f.G+=g.d*f.H;f.Da=false;e.jl=false;if(e.Nd.length&&e.de&&!(q.P(e.de.c,1)&&q.P(e.de.b,1)&&q.P(e.de.d,1))){g=e.de;f.o*=g.c;f.r*=g.c;f.s*=g.c;f.A*=g.c;f.t*=g.b;f.p*=g.b;f.u*=g.b;f.B*=g.b;f.v*=g.d;f.w*=g.d;f.q*=g.d;f.C*=g.d}}else e.sf=e.Mg.e()}d=true}}if(d){a:{for(d=0;d<this.lb.length;++d)if(this.lb[d].Lc){d=true;break a}d=false}if(c.of){Dc(c,null,null);for(e=f=e=0;e<c.Ua.length;++e){i=c.Ua[e];
for(f=0;f<i.og.length;++f){g=c.Wa[i.og[f]];g.Rd=i.mf.e()}}for(e=0;e<c.Wa.length;++e){g=c.Xi[e];for(f=0;f<g.length;++f)g[f]=false}for(e=0;e<c.ze.length;++e)Ec(c,c.ze[e],null,d)}c.db.I.set(0,0,0);c.db.J.set(0,0,0);if(c.Wa.length){d=c.Wa[0];yc(d);c.db.I=d.g.I.e();c.db.J=d.g.J.e();for(e=1;e<c.Wa.length;++e){d=c.Wa[e];yc(d);if(d.Rd==null){B(c.db,d.g.I);B(c.db,d.g.J)}else{f=d.g.e();eb(d.Rd,f);B(c.db,f.I);B(c.db,f.J)}}}this.g=c.gb().e();for(d=0;d<c.Wa.length;++d)c.Wa[d].update(true)}this.zj=this.ie}for(c=
0;c<b.Wa.length;++c){d=b.Wa[c];if(c<this.lb.length)d.va=this.lb[c];d.Rd!=null&&a.Tc(I(this.Z,d.Rd));Tc(a,d.va);Uc(a,d);d.Rd!=null&&a.Tc(this.Z)}}};function Fe(){this.g=new A;this.Tm=this.An=0}Fe.prototype=new Z;function Ge(){this.Ya();this.g=new A;this.fh=new H}Ge.prototype=new Z;Ge.prototype.h=function(a,b,c){var d=new Ge;Zd(this,d,a,b,c);if(this.g)d.g=this.g.e();if(this.fh)d.fh=this.fh;return d};Ge.prototype.Kk=k("fh");function He(){this.Ya()}He.prototype.Ya=function(){this.Ma=new Z;this.Ma.Y=this;this.l="";this.bl=0;this.Yc=null;this.Ib=new ka;this.Ib.Kd=0;this.Ib.Cd=0;this.Ib.wd=0;this.Jg=null;this.Ba=0;this.ga=null;this.Cg=false;this.qi=new H;this.wn=null;this.Gi=2;this.gf=0;this.Oi=[];this.Lf=[];this.re=[];this.Yg=[];this.rc=[];this.rn=this.an=0;this.zn=false;this.rj=null;this.Ul=false;this.xg=[];this.Gj=new v};He.prototype.bj=l("unknown");
function Hd(a,b){a.Oi=[];a.Lf=[];a.re=[];a.Yg=[];a.Ma.Ka(a);a.rj=null;a.rn=0;a.gf=Ie;var c=null;if(a.ga){c=O(a.ga);a.ga.rb(b)}a.gf=Je;a.Jl&&a.Jl.rb(b);b.qe=[];b.Ib=a.Ib.e();var d,e=0;c!=null&&a.re.length>0&&a.re.sort(function(j,m){j=qa(c,O(j));m=qa(c,O(m));if(j>m)return 1;if(j<m)return-1;return 0});a.gf=ne;for(d=0;d<a.re.length;++d)a.re[d].rb(b);e+=a.re.length;var f=null;d=null;var g=b.ub,i=b.nd;if(g!=null&&i!=null&&c!=null){d=new kb;d.jj(I(g,i));if(a.zn)f=d.gb(c)}a.rj=d;a.gf=he;for(d=0;d<a.Oi.length;++d){g=
a.Oi[d];if(f==null||Ha(f,Yd(g))){g.rb(b);e+=1}}a.gf=ge;c!=null&&a.Lf.length>0&&a.Lf.sort(function(j,m){j=qa(c,O(j));m=qa(c,O(m));if(j<m)return 1;if(j>m)return-1;return 0});for(d=0;d<a.Lf.length;++d){g=a.Lf[d];if(f==null||Ha(f,Yd(g))){g.rb(b);e+=1}}a.gf=we;for(d=0;d<a.Yg.length;++d)a.Yg[d].rb(b);e+=a.Yg.length;a.an=e;Ke(a)}function Ke(a){if(a.ga){a.ga.ub.ya(a.qi);a.qi=I(a.qi,a.ga.Qe)}}He.prototype.getName=k("l");He.prototype.Tk=ca("l");function Le(a,b){a.ga=b}
function ee(a,b,c){if(c==null)c=he;switch(c){case Je:a.Jl=b;break;case he:a.Oi.push(b);break;case ne:a.re.push(b);break;case Ie:break;case ge:a.Lf.push(b);break;case we:a.Yg.push(b);break}}function Jd(a,b){if(a.Ma==null)return null;var c=[];Me(a,a.Ma,b,c);return c}function Me(a,b,c,d){b.n()==c&&d.push(b);for(var e=0;e<b.aa.length;++e)Me(a,b.aa[e],c,d)}function Pb(a,b){if(a.Ma==null)return null;var c=[];Ne(a,a.Ma,b,c);return c}
function Ne(a,b,c,d){N(b,c)!=null&&d.push(b);for(var e=0;e<b.aa.length;++e)Ne(a,b.aa[e],c,d)}function Oe(a,b){if(a.Ma==null)return null;return Pe(a,a.Ma,b)}function Pe(a,b,c){if(b.l==c)return b;for(var d=0;d<b.aa.length;++d){var e=Pe(a,b.aa[d],c);if(e)return e}return null}function M(a,b){if(a.Ma==null)return null;return Qe(a,a.Ma,b)}function Qe(a,b,c){if(b.Qa==c)return b;for(var d=0;d<b.aa.length;++d){var e=Qe(a,b.aa[d],c);if(e)return e}return null}
function Re(a,b){if(b!=null){for(var c=0;c<a.rc.length;++c)if(a.rc[c]===b)return;a.rc.push(b)}}function Pd(a,b,c){a=Jd(a,"mesh");if(a==null)return null;var d=null;if(c){c.clear();d=c}else d=new Se;for(c=0;c<a.length;++c){var e=a[c];if(e&&e.Hc){var f=null;f=e.fb?e.fb:e.ba&&Ac(e.ba)>100?new Te(e.ba,e):new Ue(e.ba,e);if(b&&e.fb==null)e.fb=f;rc(d,f)}}return d}function oc(a,b,c){var d={};d.Wd=b;d.oo=c+t();a.xg.push(d)}
function Ve(a,b,c,d,e){if(b&&b.T&&(b.n()=="2doverlay"||b.n()=="mobile2dinput"))if(!e||e&&b.am()){var f=xe(b,true,a.Jg);if(f.x<=c&&f.y<=d&&f.x+f.Ia>=c&&f.y+f.Ga>=d)return b}for(f=0;f<b.aa.length;++f){var g=Ve(a,b.aa[f],c,d,e);if(g)return g}return null}function qc(a){for(var b=0;b<1E3;++b){var c=Math.round(Math.random()*1E4+10);if(M(a,c)==null)return c}return-1}var Je=1,he=0,ne=2,Ie=3,ge=4,we=5;function We(){this.Ya()}We.prototype=new He;We.prototype.bj=l("panorama");function Xe(){this.Ya();this.uj=new v;this.bi=new v}Xe.prototype=new He;Xe.prototype.bj=l("free");function Dd(){this.a=this.sa=null;this.yj="";this.nb=0;this.N=this.Ta=null;this.Di="";this.Ol=this.Pd=null;this.nl=false;this.Rn=function(a,b,c,d,e){this.yj=b;this.Ta=c;this.N=e;this.Pd=d;if(this.Ta!=null)Y().Ta=c;if(a.length==0){ha(q.ja,"Error: Could not load file '"+b+"'");a=navigator.appVersion;a!=null&&a.indexOf("Chrome")!=-1&&ha(q.ja,"<i>For using local files with Chrome, add the parameter '--allow-file-access-from-files' when starting the browser.<br/>Or use Firefox instead. Or run it from a web server. Or from CopperCube.</i>",
true);return null}if(b.indexOf(".ccbjs"))a=q.Dn(a);this.sa=b=new md;this.Am();this.a=new Mc(a);if(!this.Qk())return null;this.Ol=a;return b};this.Am=function(){var a=this.yj,b=a.lastIndexOf("/");if(b!=-1)a=a.substring(0,b+1);this.Di=a};this.Qk=function(){if(V(this.a)!=1701014630)return false;V(this.a);Pc(this.a,4);for(var a=0;S(this.a)>0;){var b=this.cb();++a;if(a==1&&b!=1)return false;switch(b){case 1:this.Un();break;case 12:this.Vn();break;default:this.xa()}}return true};this.xa=function(){this.a.Ca=
0+this.nb};this.cb=function(){var a=0;a=Pc(this.a,2);var b=0;this.$h=b=Pc(this.a,4);this.nb=this.a.Ca+b;return a};this.zl=function(){var a=new H(false);this.fn(a);return a};this.fn=function(a){for(var b=0;b<16;++b)Za(a,b,W(this.a))};this.hn=function(){var a=new K;a.qa=W(this.a);a.c=W(this.a);a.b=W(this.a);a.d=W(this.a);return a};this.wm=function(a){for(var b=0,c=[],d=[0,12416,925824,63447168,4194836608,2181570688],e=[],f=0;f<a;++f)e.push(Pc(this.a,1));for(;b<a;){f=0;var g=this.po[e[b]];if(b+g>=a)return c.join("");
for(var i=g;i>=0;--i){f+=e[b];++b;if(i!=0)f<<=6}if(b>a)break;f-=d[g];if(f<1114111)c.push(this.Jn(f));else return c.join("")}return c.join("")};this.O=function(){var a=Pc(this.a,4);if(a>104857600)return"";if(a<=0)return"";return this.wm(a)};this.po=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,5,5,5,5];this.Jn=function(a){if(a>65535){a-=65536;return String.fromCharCode(55296+(a>>10),56320+(a&1023))}else return String.fromCharCode(a)};this.Un=function(){for(var a=this.nb;S(this.a)>0&&this.a.Ca<a;)switch(this.cb()){case 1004:this.sa.vg=V(this.a);
break;case 20:this.io();break;case 2:var b=null;switch(V(this.a)){case 0:b=new Xe;this.um(b);break;case 1:b=new We;this.vm(b);break;default:this.xa()}this.sa.Wl(b);break;default:this.xa()}};this.Sk=function(a,b,c,d,e,f,g){this.yj=d;this.Ta=e;this.N=g;this.Pd=f;this.a=new Mc(a);this.Am();V(this.a);V(this.a);Pc(this.a,4);a=-1;d=this.cb();if(d!=1)return null;for(b=this.nb;S(this.a)>0&&this.a.Ca<b;){d=this.cb();switch(d){case 2:d=V(this.a);++a;if(a==c){c=null;switch(d){case 0:c=new Xe;this.um(c);break;
case 1:c=new We;this.vm(c);break;default:this.xa()}return c}else this.xa();default:this.xa()}}return null};this.io=function(){V(this.a);this.sa.Lm=this.O();for(var a=this.nb;S(this.a)>0&&this.a.Ca<a;)switch(this.cb()){case 35:V(this.a);V(this.a);V(this.a);V(this.a);var b=V(this.a);if((b&1)!=0)this.sa.Tl=true;this.xa();break;case 37:b=V(this.a);V(this.a);if((b&1)!=0)if(q.ja==null)q.ja=new da(elementIdOfCanvas,showFPSCounter);else ea(q.ja);if((b&2)!=0){V(this.a);this.O()}break;default:this.xa()}};this.um=
function(a){var b=this.nb;for(this.jo(a);S(this.a)>0&&this.a.Ca<b;)switch(this.cb()){case 1007:a.uj=this.L();a.bi=this.L();break;case 8:this.jn(a);break;default:this.xa()}};this.vm=function(){this.xa()};this.L=function(){var a=new v;a.c=W(this.a);a.b=W(this.a);a.d=W(this.a);return a};this.fk=function(){var a=new ka;a.Kd=W(this.a);a.Cd=W(this.a);a.wd=W(this.a);a.Ph=W(this.a);return a};this.Do=function(){var a=W(this.a),b=W(this.a),c=W(this.a),d=W(this.a);if(a>1)a=1;if(b>1)b=1;if(c>1)c=1;if(d>1)d=1;
return q.bm(d*255,a*255,b*255,c*255)};this.eh=function(){var a=new Ca;a.c=W(this.a);a.b=W(this.a);return a};this.qc=function(){var a=new A;a.I=this.L();a.J=this.L();return a};this.jo=function(a){if(this.cb()==26){a.l=this.O();a.bl=V(this.a)}else this.Vm()};this.Vm=function(){this.a.position-=10};this.jn=function(a){for(var b=this.nb;S(this.a)>0&&this.a.Ca<b;)switch(this.cb()){case 9:this.Bl(a,a.Ma,0);break;default:this.xa()}};this.Bl=function(a,b,c){if(b!=null){var d=this.nb,e=V(this.a),f=V(this.a),
g=this.O(),i=this.L(),j=this.L(),m=this.L(),o=U(this.a),p=V(this.a),h=null,u=0;if(c==0){b.T=o;b.l=g;b.ib=p}for(;S(this.a)>0&&this.a.Ca<d;)switch(this.cb()){case 9:this.Bl(a,h?h:b,c+1);break;case 10:switch(e){case 2037085030:h=new ie;h.i=e;h.f=i;h.Q=j;h.oa=m;h.T=o;h.l=g;h.ib=p;h.Qa=f;h.Y=a;this.tm(h);P(b,h);h=h;Q(h);break;case 1752395110:h=new fe;h.i=e;h.f=i;h.Q=j;h.oa=m;h.T=o;h.l=g;h.ib=p;h.Qa=f;h.Y=a;this.tm(h);P(b,h);h=h;Q(h);break;case 1835950438:h=new Be;h.i=e;h.f=i;h.Q=j;h.oa=m;h.T=o;h.l=g;h.ib=
p;h.Qa=f;h.Y=a;this.Zn(h);P(b,h);h=h;Q(h);break;case 1953526632:h=new Fe(this.N,null);h.i=e;h.f=i;h.Q=j;h.oa=m;h.T=o;h.l=g;h.ib=p;h.Qa=f;h.Y=a;this.bo(h);P(b,h);h=h;Q(h);break;case 1819042406:h=new je;h.i=e;h.f=i;h.Q=j;h.oa=m;h.T=o;h.l=g;h.ib=p;h.Qa=f;h.Y=a;this.$n(h);P(b,h);h=h;Q(h);break;case 1835098982:h=new Ld;h.i=e;h.f=i;h.Q=j;h.oa=m;h.T=o;h.l=g;h.ib=p;h.Y=a;h.Qa=f;this.ao(h);P(b,h);h=h;Q(h);break;case 1751608422:h=new me;h.i=e;h.f=i;h.Q=j;h.oa=m;h.T=o;h.l=g;h.ib=p;h.Qa=f;h.Y=a;this.co(h);P(b,
h);h=h;Q(h);break;case 1935946598:h=new se;h.i=e;h.f=i;h.Q=j;h.oa=m;h.T=o;h.l=g;h.ib=p;h.Qa=f;h.Y=a;this.Yn(h);P(b,h);h=h;Q(h);break;case 1752461414:h=new oe;h.i=e;h.f=i;h.Q=j;h.oa=m;h.T=o;h.l=g;h.ib=p;h.Qa=f;h.Y=a;this.eo(h);P(b,h);h=h;Q(h);break;case 1954112614:h=new Ge;h.i=e;h.f=i;h.Q=j;h.oa=m;h.T=o;h.l=g;h.ib=p;h.Qa=f;h.Y=a;h.g=this.qc();for(var r=0;r<16;++r)Za(h.fh,r,W(this.a));P(b,h);h=h;Q(h);break;case 1868837478:h=new ve(this.N);h.i=e;h.f=i;h.Q=j;h.oa=m;h.T=o;h.l=g;h.ib=p;h.Qa=f;h.Y=a;this.Xn(h);
P(b,h);h=h;Q(h);break;case 1668575334:h=new ke;h.i=e;h.f=i;h.Q=j;h.oa=m;h.T=o;h.l=g;h.ib=p;h.Qa=f;h.Y=a;this.ho(h);P(b,h);h=h;Q(h);break;case 1835283046:h=new ze(this.N,a);h.i=e;h.f=i;h.Q=j;h.oa=m;h.T=o;h.l=g;h.ib=p;h.Qa=f;h.Y=a;this.Wn(h);P(b,h);h=h;Q(h);break;default:if(c==0)a.Ib=this.fk();this.xa();break}break;case 11:r=this.yl();h&&h.lc(u)&&h.lc(u).jj(r);++u;break;case 25:r=h;if(r==null&&c==0)r=a.Ma;this.en(r,a);break;default:this.xa()}}};this.tm=function(a){var b=this.nb;a.g=this.qc();U(this.a);
U(this.a);a.Hc=U(this.a);for(U(this.a);S(this.a)>0&&this.a.Ca<b;)switch(this.cb()){case 14:var c=this.gn();a.ba=c;break;default:this.xa()}};this.gn=function(){var a=new zc;a.g=this.qc();for(var b=this.nb;S(this.a)>0&&this.a.Ca<b;)switch(this.cb()){case 15:var c=this.Al();c!=null&&a.Uc(c);break;default:this.xa()}return a};this.Al=function(){var a=new xc;a.g=this.qc();for(var b=this.nb;S(this.a)>0&&this.a.Ca<b;)switch(this.cb()){case 11:a.va=this.yl();break;case 16:for(var c=Math.floor(this.$h/2),d=
0;d<c;++d)a.$.push(Pc(this.a,2));break;case 17:c=Math.floor(this.$h/36);for(d=0;d<c;++d){var e=new L;e.f=this.L();e.k=this.L();e.za=V(this.a);e.ua=this.eh();e.Pf=new Ca;a.j.push(e)}break;case 18:c=Math.floor(this.$h/44);for(d=0;d<c;++d){e=new L;e.f=this.L();e.k=this.L();e.za=V(this.a);e.ua=this.eh();e.Pf=this.eh();a.j.push(e)}break;case 19:c=this.$h/60;a.kd=[];a.Xc=[];for(d=0;d<c;++d){e=new L;e.f=this.L();e.k=this.L();e.za=V(this.a);e.ua=this.eh();e.Pf=new Ca;a.kd.push(this.L());a.Xc.push(this.L());
a.j.push(e)}break;default:this.xa()}return a};this.yl=function(){var a=new sc;a.i=V(this.a);V(this.a);V(this.a);V(this.a);V(this.a);W(this.a);V(this.a);V(this.a);U(this.a);U(this.a);a.Lc=U(this.a);a.Se=U(this.a);Oc(this.a,1);a.fe=U(this.a);U(this.a);U(this.a);U(this.a);for(var b=0;b<4;++b){var c=this.Nc();switch(b){case 0:a.ab=c;break;case 1:a.jc=c;break}U(this.a);U(this.a);U(this.a);if(Pc(this.a,2)!=0)switch(b){case 0:a.wb=true;break;case 1:break}}return a};this.gk=function(){return this.O()};this.Cl=
function(){var a=this.Di+this.gk();return fd(q.We,a,true)};this.Nc=function(){var a=this.gk(),b=this.Di+a;if(this.Ta!=null&&a!="")return Hc(this.Ta,b,true);return null};this.bo=function(a){var b=this.nb;a.g=this.qc();a.An=V(this.a);for(a.Tm=V(this.a);S(this.a)>0&&this.a.Ca<b;)switch(this.cb()){case 3:this.fo(a);break;default:this.xa()}};this.fo=function(a){var b=this.nb;a.caption=this.O();a.Sf=this.Nc();this.eh();V(this.a);a.Ko=this.O();for(a.Vo=U(this.a);S(this.a)>0&&this.a.Ca<b;)switch(this.cb()){case 6:a.Ho=
true;a.Mo=this.O();break;case 4:a.Io=true;a.cj=this.O();break;case 5:a.Jo=true;a.Wo=this.O();a.Xo=this.O();break;default:this.xa()}};this.ao=function(a){a.g=this.qc();a.fa=this.L();a.Vb=this.L();a.Jc=W(this.a);a.mc=W(this.a);a.Xf=W(this.a);a.Wf=W(this.a);a.$k=U(this.a);be(a)};this.co=function(a){a.g=this.qc();V(this.a);a.Kc.za=this.fk();this.fk();U(this.a);this.L();var b=W(this.a);a.Kc.ta=b;if(b!=0)a.Kc.qg=1/b};this.$n=function(a){a.gc.g=this.qc();a.g=a.gc.g;a.kh=W(this.a);a.Nf=W(this.a);var b=Oc(this.a,
1);a.Hg=(b&2)!=0};this.Yn=function(a){a.g=this.qc();a.Pc=this.Cl();a.Fd=W(this.a);a.Ng=W(this.a);a.sl=V(this.a);a.Qm=U(this.a);a.pl=V(this.a);a.Lj=V(this.a);a.Vf=W(this.a);a.Bf=U(this.a);V(this.a)};this.eo=function(a){a.g=this.qc();a.Uf=W(this.a);a.le=U(this.a);V(this.a);for(var b=V(this.a),c=0;c<b;++c)a.ob.push(this.L())};this.ho=function(a){a.xb=this.L();a.Mc=V(this.a);a.yb=this.L();a.se=V(this.a);a.Og=V(this.a);a.Pg=V(this.a);a.vf=V(this.a);a.ui=V(this.a);a.xi=V(this.a);a.vi=V(this.a);a.wf=W(this.a);
a.xf=W(this.a);a.tf=W(this.a);a.Qg=W(this.a);var b=V(this.a);if(b&1){a.Bg=true;a.lf=V(this.a);a.xj=V(this.a)}else a.Bg=false;if(b&2){a.nf=true;a.ji=V(this.a);a.dc=this.L()}else a.nf=false;if(b&4){a.Ef=true;a.Li=W(this.a);a.Mi=W(this.a)}else a.Ef=false};this.Wn=function(a){V(this.a);a.fd=U(this.a);if(a.fd){a.te=V(this.a);a.ue=V(this.a);a.He=V(this.a);a.Ge=V(this.a)}else{a.ve=W(this.a);a.we=W(this.a);a.Je=W(this.a);a.Ie=W(this.a)}a.Mf=U(this.a);a.nc=V(this.a);a.bb=this.Nc();a.Od=this.Nc();a.Df=U(this.a);
a.hf=this.Nc();a.li=V(this.a);if(a.li==1)a.oc=V(this.a)};this.Xn=function(a){V(this.a);a.fd=U(this.a);if(a.fd){a.te=V(this.a);a.ue=V(this.a);a.He=V(this.a);a.Ge=V(this.a)}else{a.ve=W(this.a);a.we=W(this.a);a.Je=W(this.a);a.Ie=W(this.a)}a.Mf=U(this.a);a.nc=V(this.a);a.bb=this.Nc();a.Od=this.Nc();a.Df=U(this.a);a.je=U(this.a);a.Qf=Oc(this.a,1);a.Sa=this.O();a.Ic=this.O();a.Ke=V(this.a);a.lg=U(this.a);a.Xj=U(this.a);a.ki=V(this.a);a.Xg=U(this.a);a.Fg=V(this.a);a.Wg=U(this.a)};this.en=function(a,b){if(a){var c=
null;switch(V(this.a)){case 100:b=new Ab;b.Ae=this.L();c=b;break;case 101:b=new wb;b.R=this.L();b.K=this.L();b.Qc=V(this.a);b.Bb=U(this.a);xb(b);c=b;break;case 102:b=new Ye;b.tg=this.L();b.xb=this.L();b.ta=W(this.a);b.lh=W(this.a);b.Ya();c=b;break;case 103:b=new Ze;b.ta=this.L();b.dc=this.L();b.Ne=this.L();c=V(this.a);V(this.a);V(this.a);if(c&1)b.Wi=true;b.pb=W(this.a);c=b;break;case 104:b=new Nd(a,this.N);b.uf=W(this.a);b.Eb=W(this.a);b.Fb=W(this.a);b.ne=W(this.a);b.Hd=U(this.a);c=V(this.a);if(c&
1){b.gj=false;b.ag=true}else{b.gj=true;b.ag=false}if(a){b.Dm=q.Hh(a.Jc);b.Ok=b.Dm+10;b.to=(b.Ok-b.nm)/50}c=b;break;case 105:b=new $e(a,this.N);b.ta=W(this.a);b.Fb=W(this.a);b.Hd=U(this.a);c=V(this.a);if(c&2){b.Kl=true;b.pb=W(this.a)}if(c&4){b.al=true;b.Gd=W(this.a);b.Ed=W(this.a);b.yh=W(this.a)}c=b;break;case 106:var d=new af(b);d.sh=V(this.a);d.ti=U(this.a);d.$g=this.O();d.Ai=U(this.a);d.ce=this.L();d.kf=Oc(this.a,1);d.rg=this.O();c=V(this.a);if(c&1)d.qh=V(this.a);if(d.kf==3||d.kf==4)d.m=this.eb(b);
c=d;break;case 107:c=new Ub(b,this.N);c.ge=U(this.a);c.bc=U(this.a);V(this.a);c.m=this.eb(b);c=c;break;case 108:c=new bf(b);c.zg=V(this.a);c.Ei=V(this.a);c.Fi=W(this.a);c.Kf=V(this.a);V(this.a);c.m=this.eb(b);c=c;break;case 109:b=new cf;b.Oc=V(this.a);b.Me=V(this.a);b.Rf=V(this.a);b.Bb=U(this.a);c=V(this.a);b.Oa=[];for(d=0;d<c;++d)b.Oa.push(this.Nc());c=b;break;case 110:c=new df(b,this.N);c.ge=U(this.a);c.bc=U(this.a);V(this.a);c.vd=this.eb(b);c.td=this.eb(b);c=c;break;case 111:c=new ef(b);c.Tf=V(this.a);
V(this.a);c.m=this.eb(b);c=c;break;case 112:c=new ff(b,this.N);c.qf=V(this.a);c.oc=V(this.a);c.yo=U(this.a);V(this.a);c.m=this.eb(b);c=c;break;case 113:d=new gf(b);d.Cc=V(this.a);d.cd=W(this.a);d.ig=W(this.a);d.sg=U(this.a);d.zb=V(this.a);d.Ti=this.O();d.pg=this.O();d.ah=W(this.a);d.gh=V(this.a);d.hb=this.L();d.jd=this.O();d.od=this.O();d.di=this.O();d.Sh=this.O();if(d.Cc==3)d.Zg=V(this.a);c=V(this.a);if(c&1)d.Af=V(this.a);else{d.Af=1E4;if(d.cd!=0)d.Af=d.ah/(d.cd/1E3)}d.Dc=this.eb(b);d.rd=this.eb(b);
d.ud=this.eb(b);d.sd=this.eb(b);c=d;break;case 114:b=new hf;b.hh=V(this.a);b.hb=this.L();b.hi=V(this.a);b.Bd=W(this.a);b.Ui=W(this.a);c=V(this.a);b.bc=c&1?true:false;c=b;break;case 115:b=new jf(b,this.N);V(this.a);b.Ki=W(this.a);b.Eb=W(this.a);b.Fb=W(this.a);b.ne=W(this.a);b.hb=this.L();b.jd=this.O();b.od=this.O();b.ni=this.O();b.Ji=this.O();c=V(this.a);if(c&1)b.ei=true;if(c&2){b.vh=true;b.Qh=W(this.a);b.jf=W(this.a)}c=b;break;case 116:c=new kf(b);c.Km=U(this.a);V(this.a);c.m=this.eb(b);c=c;break;
case 117:c=new q.ee(b);c.Ab=this.O();V(this.a);this.xl(c.Ub,b);c=c;break;default:this.xa();return}c&&yb(a,c)}else this.xa()};this.xl=function(a,b){for(var c=V(this.a),d=0;d<c;++d){var e=new lf;e.i=V(this.a);e.l=this.O();switch(e.i){case 1:e.Mb=W(this.a);break;case 2:e.vc=this.O();break;case 6:e.Pe=this.L();break;case 7:e.oh=this.Nc();break;case 9:e.hg=this.eb(b);break;case 0:case 4:case 5:case 8:case 3:default:e.Nb=V(this.a);break}a.push(e)}};this.eb=function(a){if(V(this.a)){var b=new jc(a);this.cn(b,
a);return b}return null};this.cn=function(a,b){var c=this.cb();if(c!=29)this.xa();else for(var d=this.nb;S(this.a)>0&&this.a.Ca<d;){c=this.cb();if(c==30)(c=this.bn(V(this.a),b))&&kc(a,c);else this.xa()}};this.Vn=function(){for(var a=this.nb;S(this.a)>0&&this.a.Ca<a;)switch(this.cb()){case 13:var b=V(this.a),c=this.O(),d=V(this.a);if(b&4)(b=Bc(this.Pd,c))&&this.ko(b,d);else if(b&8){b=null;try{b=this.wm(d)}catch(e){ha(q.ja,"error reading script: "+e)}if(b!=null){d=Y();mf(d,b)}}this.xa();break;default:this.xa()}};
this.Zn=function(a){a.g=this.qc();U(this.a);V(this.a);var b=V(this.a),c=V(this.a);a.kb=W(this.a);Oc(this.a,1);a.Cb=U(this.a);V(this.a);a.zm(this.dn(a));a.Na=b;a.jb=c};this.dn=function(a){var b=this.gk(),c=Bc(this.Pd,b);if(c==null){c=new q.qk;c.l=b;c!=null&&this.Pd.Kj.push(c);c=c}if(a!=null&&c!=null){if(c.Vc==null)c.Vc=[];c.Vc.push(a)}return c};this.ko=function(a,b){if(a!=null){V(this.a);a.vj=W(this.a);var c=this.nb;b=this.a.Ca+b;for(var d=[],e=0;S(this.a)>0&&this.a.Ca<c&&this.a.Ca<b;){var f=this.cb();
if(f==33){f=new q.mn;f.l=this.O();f.Mg=this.zl();f.Eg=this.zl();a.Ua.push(f);e=V(this.a);d.push(f);e>=0&&e<d.length&&d[e].aa.push(f);e=V(this.a);for(var g=0;g<e;++g)f.og.push(V(this.a));g=V(this.a);for(e=0;e<g;++e){var i=new q.nn;i.frame=W(this.a);i.position=this.L();f.xe.push(i)}g=V(this.a);for(e=0;e<g;++e){i=new q.pn;i.frame=W(this.a);i.scale=this.L();f.Nd.push(i)}g=V(this.a);for(e=0;e<g;++e){i=new q.on;i.frame=W(this.a);i.rotation=this.hn();f.Be.push(i)}g=V(this.a);for(e=0;e<g;++e){i=new q.qn;
i.zh=Pc(this.a,2);i.Oh=V(this.a);i.Mh=W(this.a);f.Re.push(i)}}else if(f==15){f=this.Al();f!=null&&a.Uc(f)}else if(f==34){f=new q.Vg;f.l=this.O();f.Wc=W(this.a);f.K=W(this.a);f.Lb=W(this.a);a.Oj.push(f)}else this.xa()}try{a.Fj=-1;a.Xm=-1;b=c=0;var j,m;for(d=0;d<a.Ua.length;++d){f=false;for(c=0;c<a.Ua.length;++c){m=a.Ua[c];for(e=0;e<m.aa.length;++e)if(m.aa[e]===a.Ua[d])f=true}f||a.ze.push(a.Ua[d])}for(c=0;c<a.Wa.length;++c){d=[];a.Xi.push(d);j=a.Wa[c];var o=j.j.length;for(f=0;f<o;++f)d.push(false)}a.of=
false;d=o=0;var p,h;for(o=0;o<a.Ua.length;++o){h=a.Ua[o];if(h.xe.length||h.Nd.length||h.Be.length||h.Re.length){a.of=true;break}}if(a.of)for(o=a.Ec=0;o<a.Ua.length;++o){h=a.Ua[o];if(h.xe.length){var u=h.xe[h.xe.length-1];if(u.frame>a.Ec)a.Ec=u.frame}if(h.Nd.length){var r=h.Nd[h.Nd.length-1];if(r.frame>a.Ec)a.Ec=r.frame}if(h.Be.length){var J=h.Be[h.Be.length-1];if(J.frame>a.Ec)a.Ec=J.frame}}if(a.of&&!a.ul){a.ul=true;for(o=0;o<a.Ua.length;++o){h=a.Ua[o];for(d=0;d<h.Re.length;++d){var D=h.Re[d],w=D.Oh;
p=a.Wa[D.zh];var C=p.j[w];D.Nl=C.f.e();D.Ml=C.k.e()}}}Cc(a,null,null);for(c=0;c<a.Ua.length;++c){m=a.Ua[c];for(b=0;b<m.og.length;++b){j=a.Wa[m.og[b]];j.Rd=m.mf.e()}}if(a.Wa.length==0){a.db.I.set(0,0,0);a.db.J.set(0,0,0)}else{j=a.Wa[0];a.db.I=j.g.I.e();a.db.J=j.g.J.e();for(c=1;c<a.Wa.length;++c){j=a.Wa[c];if(j.Rd==null){B(a.db,j.g.I);B(a.db,j.g.J)}else{var E=j.g.e();eb(j.Rd,E);B(a.db,E.I);B(a.db,E.J)}}}}catch(F){ha(q.ja,"error finalizing skinned mesh: "+F)}if(a.Vc&&a.Vc.length){for(e=0;e<a.Vc.length;++e)(j=
a.Vc[e])&&Ce(j,j.Na,j.jb);a.Vc=null}}};this.bn=function(a,b){var c=0;switch(a){case 0:c=new ub;c.mi=V(this.a);c.De=V(this.a);c.U=U(this.a);V(this.a);return c;case 1:b=new vb;b.Jd=V(this.a);b.tc=V(this.a);b.U=U(this.a);b.da=this.L();if(b.Jd==4)b.Rh=this.L();b.ye=U(this.a);b.sc=V(this.a);c=V(this.a);if(c&1){b.ld=true;b.wc=V(this.a)}return b;case 2:b=new zb;b.mk=V(this.a);b.Gf=V(this.a);b.U=U(this.a);b.da=this.L();b.Ii=false;c=V(this.a);if(c&1){b.Ii=true;b.xk=V(this.a)}return b;case 3:c=new Bb;c.ok=
V(this.a);c.Hf=V(this.a);c.U=U(this.a);c.da=this.L();V(this.a);return c;case 4:c=new Cb;c.Oc=V(this.a);c.Gb=V(this.a);c.U=U(this.a);c.Sf=this.Nc();if(c.Oc==1)c.Aj=V(this.a);V(this.a);return c;case 5:b=new dc;c=V(this.a);b.bk=(c&1)!=0;b.Pc=this.Cl();b.Fd=W(this.a);b.Ng=W(this.a);b.Vf=W(this.a);b.Bf=U(this.a);b.Ni=V(this.a);b.rl=U(this.a);b.ck=this.L();return b;case 6:c=new fc;c.Ll=V(this.a);return c;case 7:c=new Db;V(this.a);c.Dj=this.O();return c;case 8:c=new Eb;V(this.a);c.zk=this.O();c.fa=this.O();
return c;case 9:c=new Fb;c.Ff=V(this.a);c.U=U(this.a);c.Bb=U(this.a);c.oj=this.O();V(this.a);return c;case 10:c=new Hb(this.N);c.Ce=this.O();V(this.a);return c;case 11:c=new Jb(this.N);c.df=V(this.a);V(this.a);return c;case 12:b=new Lb;b.Jd=V(this.a);b.tc=V(this.a);b.U=U(this.a);b.da=this.L();b.ye=U(this.a);b.sc=V(this.a);c=V(this.a);if(c&1){b.ld=true;b.wc=V(this.a)}return b;case 13:a=new Ob;a.jh=V(this.a);a.yd=V(this.a);a.Vh=W(this.a);a.Fe=V(this.a);a.xc=W(this.a);c=V(this.a);if(c&1){a.Ee=V(this.a);
a.Qi=U(this.a);a.jg=this.L()}if(c&2)a.gg=this.eb(b);if(c&4)a.Pi=this.L();return a;case 14:this.xa();return null;case 15:c=new rb;V(this.a);c.Gb=V(this.a);c.U=U(this.a);c.Sa=this.O();return c;case 16:c=new Wb;V(this.a);c.vb=this.O();c.Zj=V(this.a);c.Oe=V(this.a);c.md=this.O();return c;case 17:a=new bc;c=V(this.a);a.vb=this.O();a.Yh=V(this.a);a.Oe=V(this.a);a.md=this.O();a.m=this.eb(b);if(c&1)a.ph=this.eb(b);return a;case 18:c=new cc;c.ih=V(this.a);c.U=U(this.a);V(this.a);return c;case 19:c=new gc;
V(this.a);c.vb=this.O();c.ri=U(this.a);return c;case 20:c=new mc(this.N);V(this.a);c.Ce=this.O();this.nl=true;return c;case 22:c=new pc;c.If=V(this.a);c.qj=U(this.a);V(this.a);c.m=this.eb(b);return c;case 23:c=new nc;c.Jf=V(this.a);c.wj=U(this.a);c.tk=V(this.a);V(this.a);return c;case 24:c=new nf;c.Ab=this.O();V(this.a);this.xl(c.Ub,b);return c;default:this.xa()}return null}};function $(){this.i=-1}n=$.prototype;n.n=l("none");n.Xa=l(false);n.pd=aa();n.bf=aa();n.Rc=aa();n.Zd=aa();n.Xd=l(false);n.Yd=l(false);n.reset=aa();n.Ue=l(null);n.h=l(null);function Nd(a,b){this.i=-1;this.$b=0;this.Hd=false;this.ag=true;this.Eh=this.Td=this.ae=this.$d=this.Vd=this.Pk=this.gj=false;this.Rk=this.qd=0;this.nm=20;this.Ok=100;this.to=(this.Ok-this.nm)/50;this.Dm=90;this.$b=t();this.ma=a;this.N=b;a&&Nb(this,a.fa)}Nd.prototype=new $;n=Nd.prototype;n.n=l("camerafps");n.uf=88;n.Eb=0.06;n.Fb=200;n.ne=0;n.Hd=false;n.wi=true;function Od(a,b){a.wi=b}function Nb(a,b){if(a.ma!=null){b=b.substract(a.ma.f);b=xa(b);a.qd=b.c;a.Rk=b.b;if(a.qd>a.uf)a.qd-=360}}n=Nd.prototype;
n.Xa=function(a){if(this.ma==null)return false;if(this.ma.Y.ga!==this.ma)return false;var b=t(),c=b-this.$b;if(c>250)c=250;this.$b=b;var d=this.ma.f.e();if(this.wi&&(this.ae||this.Td)){var e=this.ma.f.substract(this.ma.fa);if(this.Hd)e.b=0;e.normalize();this.ae&&d.ra(y(e,this.Eb*-c));this.Td&&d.ra(y(e,this.Eb*c))}if(this.wi&&(this.Vd||this.$d)){e=wa(this.ma.f.substract(this.ma.fa),this.ma.Vb);e.normalize();if(this.Vd){e=y(e,this.Eb*-c);d.ra(e);Mb(this.ma,this.ma.fa.add(e))}if(this.$d){e=y(e,this.Eb*
c);d.ra(e);Mb(this.ma,this.ma.fa.add(e))}}this.ma.f=d;d=new v(0,0,1);e=new H;ab(e,new v(this.qd,this.Rk,0));Ua(e,d);e=false;if(this.N!=null)e=this.N.Gh;var f=0,g=2.0E-5,i=2.0E-5,j=false;if(this.N!=null&&a.Y!=null&&!e){j=a.Y;j=j.Ma==null||j.Jg==null?null:Ve(j,j.Ma,this.N.Pb,this.N.Qb,true);j=j!=null}if(this.ag){g*=3;i*=3}if(!j)if(e)f=this.N.Qb;else if(this.gj){var m=this.N.S.Yb(),o=this.N.Qb;if(m>0&&o>0&&this.N.Ug)f=Math.sin((o-m/2)/m)*100*0.5}else if(this.ag||this.Pk)if(this.N.Tg){f=this.N.Qb-this.N.Sg;
if(f!=0)this.N.Hj=b}f+=0;if(f>300)f=300;if(f<-300)f=-300;this.qd+=f*c*this.Fb*i;if(this.qd<-this.uf)this.qd=-this.uf;if(this.qd>this.uf)this.qd=this.uf;f=0;if(!j)if(e)f=this.N.Pb;else if(this.gj){b=this.N.S.Zb();i=this.N.Pb;if(b>0&&i>0&&this.N.Ug)f=Math.sin((i-b/2)/b)*100*0.5}else if(this.ag||this.Pk)if(this.N.Tg){f=this.N.Pb-this.N.Rg;if(f!=0)this.N.Hj=b}f+=0;if(f>300)f=300;if(f<-300)f=-300;this.Rk+=f*c*this.Fb*g;if(e||this.ag||this.Pk)Td(this.N);if(this.wi&&this.Eh)(a=N(a,"collisionresponse"))&&
!a.Ad&&of(a,this.ne);Mb(this.ma,this.ma.f.add(d));return false};n.pd=function(a){$.prototype.pd.call(this,a)};n.bf=aa();n.Rc=function(a){$.prototype.Rc.call(this,a)};n.Zd=function(a){$.prototype.Zd.call(this,a)};n.Ih=function(a,b){if(b==37||b==65){if(this.Vd=a)this.$d=false;return true}if(b==39||b==68){if(this.$d=a)this.Vd=false;return true}if(b==38||b==87){if(this.ae=a)this.Td=false;return true}if(b==40||b==83){if(this.Td=a)this.ae=false;return true}if(b==32){this.Eh=a;return true}return false};
n.Xd=function(a){return this.Ih(true,a.keyCode)};n.Yd=function(a){return this.Ih(false,a.keyCode)};function $e(a,b){this.i=-1;this.Fb=1E4;this.ta=100;this.Hd=false;this.$b=t();this.ma=a;this.N=b;this.Kl=false;this.hd=this.gd=this.pb=0;this.al=false;this.yh=this.Ed=this.Gd=0;this.ic=90;this.Sj=-66666}$e.prototype=new $;n=$e.prototype;n.n=l("cameramodelviewer");n.Fb=0.06;n.ta=100;n.Hd=false;
n.Xa=function(){if(this.ma==null)return false;if(this.ma.Y.ga!==this.ma)return false;var a=t(),b=a-this.$b;if(b>250)b=250;this.$b=a;a=this.ma.f.e();var c=this.ma.fa.e(),d=c.substract(O(this.ma)),e=0,f=0;if(this.N.Tg){e=(this.N.Pb-this.N.Rg)*this.Fb/5E4;f=(this.N.Qb-this.N.Sg)*this.Fb/5E4}if(this.Kl&&this.pb!=0){if(q.la(e)){e=this.gd;this.gd*=0.9;if(this.gd>0)this.gd=Math.max(0,this.gd-b/this.pb);else if(this.gd<0)this.gd=Math.min(0,this.gd+b/this.pb)}else this.gd=e*(this.pb/1E3);if(q.la(f)){f=this.hd;
this.hd*=0.9;if(this.hd>0)this.hd=Math.max(0,this.hd-b/this.pb);else if(this.hd<0)this.hd=Math.min(0,this.hd+b/this.pb)}else this.hd=f*(this.pb/1E3)}d=wa(d,this.ma.Vb);d.b=0;d.normalize();if(!q.la(e)){z(d,b*e);a.ra(d)}if(!this.Hd&&!q.la(f)){e=this.ma.Vb.e();e.normalize();b=a.add(y(e,b*f));f=b.e();f.b=c.b;e=this.ta/10;if(f.qb(c)>e)a=b}if(this.Hd){if(q.P(this.Sj,-66666))this.Sj=a.b;a.b=this.Sj}Td(this.N);if(this.al){b=q.Hh(this.ma.Jc);if(this.ic<this.Gd)this.ic=this.Gd;if(this.ic>this.Ed)this.ic=this.Ed;
f=this.yh;f=Math.abs(this.ic-b)/8;if(f<this.yh)f=this.yh;if(b<this.Ed-f&&b<this.ic){b+=f;if(b>this.Ed)b=this.Ed}if(b>this.Gd+f&&b>this.ic){b-=f;if(b<this.Gd)b=this.Gd}ce(this.ma,q.cm(b))}d=a.substract(c);x(d,this.ta);a=c.add(d);this.ma.f=a;return false};n.bf=function(a){this.ic+=a*this.yh;if(this.ic<this.Gd)this.ic=this.Gd;if(this.ic>this.Ed)this.ic=this.Ed};function af(a){this.sh=5E3;this.ti=this.Bj=this.Rl=false;this.Ai=true;this.qh=0;this.Jj=true;this.kf=pf;this.Si=false;this.bd=a;this.Ba=0;this.Rl=false;this.dd=this.pi=null;this.Si=false;this.$g=null;this.qh=0;this.rg=this.ce=null;this.ll=0;this.Yl=false}af.prototype=new $;var pf=0;af.prototype.n=l("followpath");
af.prototype.h=function(a,b,c,d){a=new af;a.sh=this.sh;a.ti=this.ti;a.Ai=this.Ai;a.$g=this.$g;a.qh=this.qh;a.ce=this.ce?this.ce.e():null;a.kf=this.kf;a.rg=this.rg;a.m=this.m?this.m.h(c,d):null;return a};
af.prototype.Xa=function(a,b){if(a==null||!this.bd||!this.sh)return false;if(a!==this.pi){if(this.pi=a)this.Bj=this.pi.n()=="camera";return false}if(!this.dd)if(!this.Rl)if(this.$g.length)if(this.bd){var c=Oe(this.bd,this.$g);c&&c.n()=="path"&&qf(this,c)}if(this.dd==null)return false;c=false;var d=null;if(this.Bj&&this.Ai){c=!this.Jj;d=a;if(this.bd.ga!==d){if(this.dd.ob.length)d.f=pe(this.dd,0);this.Jj=true;return false}else this.Jj=false;if(!this.Ba||!c)this.Ba=b}if(!this.Ba)this.Ba=this.bd.Ba;d=
(b-this.Ba+this.qh)/this.sh;if(d>1&&!this.dd.le)switch(this.kf){case pf:d%=1;break;case 1:d=1;break;case 2:d=1;if(!this.Si){if(this.bd)if(this.rg.length)if((c=Oe(this.bd,this.rg))&&c.n()=="camera"){(b=this.bd.Jg)&&Kd(c,b.Zb(),b.Yb());this.bd.ga=c}this.Si=true}break;case 3:if(d>this.ll+1&&this.m!=null){this.m.execute(a);this.ll=d}d%=1;break;case 4:d=1;if(!this.Yl&&this.m!=null){this.m.execute(a);this.Yl=true}break}else this.Si=false;b=re(this.dd,d);c=!b.P(a.f);a.f=b;if(this.ti&&this.dd.ob.length){d=
re(this.dd,d+0.0010);if(!q.la(d.qb(b))){var e=d.substract(b);x(e,100);if(this.Bj){d=a;a=b.add(e);c=c||!a.P(d.fa);Mb(d,a)}else{if(!this.ce||pa(this.ce))d=xa(e);else{d=new H;ab(d,xa(e));b=new H;ab(b,this.ce);d=I(d,b);d=bb(d)}c=c||!d.P(a.Q);a.Q=d}}}return c};function qf(a,b){a.dd=b}af.prototype.Ue=function(a){if(this.m)return lc(this.m,a);return null};function wb(a,b,c,d,e,f){this.R=new v(0,0,0);this.K=new v(40,40,40);this.Ba=t();this.Qc=3E3;this.Pl=this.kg=this.wg=this.Bb=false;this.Il=null;this.Hl=0;this.cf=this.ci=false;this.Ag=0;if(a)this.R=a.e();if(b)this.K=b.e();if(c)this.Qc=c;if(d)this.Bb=d;xb(this);if(e)this.wg=e;if(f)this.kg=f}wb.prototype=new $;wb.prototype.n=l("flystraight");
wb.prototype.h=function(a,b,c,d){a=new wb;a.R=this.R.e();a.K=this.K.e();a.da=this.da.e();a.yk=this.yk;a.uk=this.uk;a.Qc=this.Qc;a.Bb=this.Bb;a.kg=this.kg;a.ci=this.ci;a.cf=this.cf?this.cf.h(c,d):null;a.Ag=this.Ag;return a};
wb.prototype.Xa=function(a,b){var c=b-this.Ba,d=false;if(c!=0){var e=this.R.e();if(!this.Bb&&c>=this.Qc){e=this.K.e();d=true}else e.ra(y(this.da,c%this.Qc*this.uk));if(this.kg){if(a.n()=="camera"){Mb(a,e);var f=N(a,"camerafps");f!=null&&Nb(f,e)}}else a.f=e;if(this.Pl&&this.Ba!=b){if(a){Q(a);b=Yd(a);e=false;f=Pb(a.Y,"gameai");for(var g=0;g<f.length;++g)if(f[g]!==this.Il){var i=N(f[g],"gameai");if(!(i&&!(i.zb>0)))if(Ha(b,Yd(f[g]))){Sb(i,this.Hl,f[g]);e=true;break}}b=e}else b=false;d=b||d}if(d){if(a.Y)a.Y.Gj=
a.f.e();if(this.cf){d=true;if(this.Ag>0&&c>this.Ag)d=false;d&&this.cf.execute(a)}this.wg&&$d(a,this);this.ci&&a.Y&&oc(a.Y,a,0)}return true}return false};function xb(a){a.da=a.K.substract(a.R);a.yk=a.da.getLength();a.da.normalize();a.uk=a.yk/a.Qc};function Ye(a,b,c,d){this.tg=new v;this.xb=new v(0,1,0);this.wh=new v;this.Sd=new v;this.Ba=t();this.lh=0.01;this.ta=100;if(a)this.tg=a.e();if(b)this.ta=b;if(c)this.xb=c.e();if(d)this.lh=d;this.Ya()}Ye.prototype=new $;Ye.prototype.n=l("flycircle");Ye.prototype.h=function(){var a=new Ye;a.tg=this.tg.e();a.xb=this.xb.e();a.wh=this.wh.e();a.Sd=this.Sd.e();a.lh=this.lh;a.ta=this.ta;return a};
Ye.prototype.Xa=function(a,b){b=b-this.Ba;if(b!=0){b=b*this.lh;b=y(this.wh,Math.cos(b)).add(y(this.Sd,Math.sin(b)));z(b,this.ta);a.f=this.tg.add(b);return true}return false};Ye.prototype.Ya=function(){this.xb.normalize();this.Sd=this.xb.b!=0?new v(50,0,0):new v(0,50,0);this.Sd=wa(this.Sd,this.xb);this.Sd.normalize();this.wh=wa(this.Sd,this.xb);this.wh.normalize()};function Ab(a){this.Ae=new v;if(a)this.Ae=a.e();this.Ba=t();this.Fl=false;this.lk=0;this.cl=null}Ab.prototype=new $;Ab.prototype.n=l("rotation");Ab.prototype.h=function(){var a=new Ab(this.wa,this.Fa);a.Ae=this.Ae.e();a.Ba=this.Ba;return a};
Ab.prototype.Xa=function(a,b){var c=b-this.Ba;if(this.Fl){if(this.lk-this.Ba==0)return false;b=(b-this.Ba)/(this.lk-this.Ba);if(b>1)$d(a,this);else{c=new K;var d=y(this.Ae,q.$c);jb(c,d.c,d.b,d.d);var e=new K;d=y(this.cl,q.$c);jb(e,d.c,d.b,d.d);gb(e,e,c,b);d=new v;ib(e,d);z(d,q.Ld);a.Q=d;return true}}else if(c!=0){a.Q.ra(y(this.Ae,c/10));this.Ba=b;return true}return false};function cf(a,b,c){this.Oa=[];this.Bb=true;this.Me=20;this.Nj=this.Rf=this.Oc=0;if(a)this.Oa=a;if(b)this.Me=b;if(c==true)this.loop=false}cf.prototype=new $;cf.prototype.n=l("animatetexture");cf.prototype.h=function(){var a=new cf;a.Oa=this.Oa;a.Bb=this.Bb;a.Me=this.Me;a.Oc=this.Oc;a.Rf=this.Rf;return a};
cf.prototype.Xa=function(a,b){if(a==null||this.Oa==null)return false;var c=false,d=null;if(this.Oa.length){var e=this.Nj==0?a.Y.Ba:this.Nj;d=b-e;var f=e+this.Me*this.Oa.length;e=0;e=!this.Bb&&b>=f?this.Oa.length-1:this.Me>0?Math.floor(d/this.Me%this.Oa.length):0;if(e<this.Oa.length)if(this.Oc==1){if(this.Rf>=0&&this.Rf<a.Ac())if((d=a.lc(this.Rf))&&d.ab!==this.Oa[e]){d.ab=this.Oa[e];c=true}}else{b=a.Ac();for(f=0;f<b;++f)if((d=a.lc(f))&&d.ab!==this.Oa[e]){d.ab=this.Oa[e];c=true}}}return c};
cf.prototype.reset=function(){this.Nj=t()};function Ub(a,b,c,d){this.Fa=b;this.xn=0;this.kn=false;this.zo=null;this.wa=a;this.Dg=c;this.pe=false;this.ge=true;this.bc=false;this.Qd=this.ia=this.m=null;d!=true&&Re(a,this)}Ub.prototype=new $;n=Ub.prototype;n.n=l("onclick");n.h=function(a,b,c,d){a=new Ub(this.wa,this.Fa);a.ge=this.ge;a.bc=this.bc;a.m=this.m?this.m.h(c,d):null;a.ia=this.ia;return a};n.Xa=function(a){this.Qd=a;a=this.pe;this.pe=false;return a};
n.Rc=function(a){var b=this.Qd;if(!b)return false;if(b.Y!==this.wa)return false;if(t()-this.Fa.Hj<250)return false;var c=Rd(this.Fa,a);a=Sd(this.Fa,a);if(this.Fa.Gh){a=this.wa.Jg;if(!a)return false;c=a.Zb()/2;a=a.Yb()/2}if(this.Qd.tb==null){this.Qd=null;return false}if(ae(b)&&rf(this,b,c,a)){this.pe=true;this.Dg&&this.Dg();this.fj(b);return this.wa.Cg=true}};n.fj=function(a){this.m&&this.m.execute(a)};
function rf(a,b,c,d){if(b==null)return false;if(b.n()=="2doverlay"){var e=xe(b,false,a.Fa.S);if(e.x<=c&&e.y<=d&&e.x+e.Ia>=c&&e.y+e.Ga>=d)return true}c=Ud(a.Fa,c,d);if(c==null)return false;d=a.wa.ga;if(d==null)return false;d=O(d);e=new Aa;e.R=d;e.K=c;return Vb(a,a.wa,b,e,a.ge,a.bc,a.ia,null)}function Tb(a,b,c,d,e,f){if(!e||!b)return 999999999999;if(a=e.Yf(c,d,true,null,f))return c.qb(a);return 999999999999}
function Vb(a,b,c,d,e,f,g,i){var j=c.gb(),m=0;m=new H(false);if(Wa(c.Z,m))if(Ga(j,Ta(m,d.R),Ta(m,d.K))){m=null;if(c.Qn&&c.ba)m=c;e=m==null||e;if(!e){j=m.fb;if(j==null){j=m.ba&&Ac(m.ba)>100?new Te(m.ba,m,0):new Ue(m.ba,m);m.fb=j}if(j){j=j.Yf(d.R,d.K,true,null,true);if(j!=null)if(f){m=Tb(a,b,d.R,j,g,true);a=j.qb(d.R);if(m+q.un<a)return false;else{if(i!=null)i.Aa=j.qb(d.R);return true}}else{if(i!=null)i.Aa=d.R.qb(Da(Yd(c)));return true}}else e=true}if(e)if(f){d=d.R.e();j=Yd(c);m=Ea(j);z(m,0.5);f=q.Tn(m.c,
m.b,m.d);f=Math.sqrt(f*f+f*f);c=Da(Yd(c));m=Tb(a,b,d,c,g,true);a=c.qb(d)-f;if(m<a)return false;else{if(i!=null)i.Aa=a;return true}}else{if(i!=null)i.Aa=d.R.qb(Da(Yd(c)));return true}}return false}Ub.prototype.Ue=function(a){if(this.m)return lc(this.m,a);return null};function df(a,b){this.Fa=b;this.wa=a;this.vd=this.td=null;this.Ck=this.vk=0}df.prototype=new Ub(null,null,null,true);df.prototype.n=l("onmove");df.prototype.h=function(a,b,c,d){a=new df(this.wa,this.Fa);a.ge=this.ge;a.bc=this.bc;a.m=this.m?this.m.h(c,d):null;a.ia=this.ia;a.td=this.td?this.td.h(c,d):null;a.vd=this.vd?this.vd.h(c,d):null;return a};
df.prototype.Xa=function(a){var b=this.vk==0,c=t();if(b||c-this.vk>100){this.vk=c;c=rf(this,a,this.Fa.Pb,this.Fa.Qb);if(b)this.Ck=c;else if(c!=this.Ck){if((this.Ck=c)&&this.td)this.td.execute(a);else!c&&this.vd&&this.vd.execute(a);return true}}return false};df.prototype.Ue=function(a){var b=null;if(this.vd)if(b=lc(this.vd,a))return b;if(this.td)if(b=lc(this.td,a))return b;return null};function bf(a,b,c,d,e){this.xn=0;this.ij=a;this.Kf=this.Fi=this.Ei=this.zg=0;this.m=null;this.Dg=d;if(b)this.ta=b;if(c)this.Kf=c;if(e)this.zg=1;this.Cj=false}bf.prototype=new $;n=bf.prototype;n.n=l("oncollide");n.h=function(a,b,c,d){a=new bf(this.ij);a.zg=this.zg;a.Ei=this.Ei;a.Fi=this.Fi;a.Kf=this.Kf;a.m=this.m?this.m.h(c,d):null;return a};
n.Xa=function(a){if(a==null||this.ij==null)return false;var b=false,c=null;if(this.Ei==0)c=this.ij.ga;else if(this.Kf!=-1)c=M(this.ij,this.Kf);if(c){if(a===c)return false;var d=O(c);a=O(a);d=d.qb(a)<this.Fi;switch(this.zg){case 0:if(d&&!this.Cj){this.fj(c);b=true}break;case 1:if(!d&&this.Cj){this.fj(c);b=true}break}this.Cj=d}return b};n.fj=function(a){this.Dg&&this.Dg.call(a);this.m&&this.m.execute(a)};n.Ue=function(a){if(this.m)return lc(this.m,a);return null};function Ze(a,b,c,d,e){this.ta=a;this.dc=b;this.Ne=c;this.ia=d;this.pb=e;this.Sl=false;this.rf=this.Za=null;this.oe=new v(0,0,0);this.Ad=false;this.me=this.il=0;this.Wi=false;if(this.dc==null)this.dc=new v(0,1,0);if(this.ta==null)this.ta=new v(30,50,30);if(this.Ne==null)this.Ne=new v(0,0,0);if(this.pb==null)this.pb=5.0E-4;this.reset()}Ze.prototype=new $;n=Ze.prototype;n.n=l("collisionresponse");
n.h=function(){var a=new Ze;a.ta=this.ta.e();a.dc=this.dc.e();a.Ne=this.Ne.e();a.oe=this.oe.e();a.Wi=this.Wi;a.ia=this.ia;return a};n.reset=function(){this.Za=null;this.rf=t()};n.Tc=ca("ia");
n.Xa=function(a,b){var c=b-this.rf;if(!this.ia)return false;if(c>150)c=150;this.rf=b;if(this.Za!==a){this.Za=a;this.oe=a.f.e()}var d=a.f.e(),e=a.f.substract(this.oe);d=y(this.dc,c);if(this.Ad){var f=(b-this.il)/1E3;if(f>5)f=5;z(d,f)}else z(d,0.0010);if(this.me>0){f=y(this.dc,c*this.me*0.0010);ma(d,f);this.me-=c;if(this.me<0)this.me=0}c=e.add(d);if(!pa(c)){if(!this.Sl)this.pb=this.ta.getLength()*1.0E-6;c=null;if(a&&a.n()=="camera")c=a;var g;if(c)g=c.fa.substract(c.f);f=new G;var i={};i.Aa=0;this.ia.Jh(a);
var j=this.ia,m=this.oe.substract(this.Ne),o=this.ta,p=this.pb;if(!j||o.c==0||o.b==0||o.d==0)d=m;else{var h={};h.dh=m.e();h.ek=e.e();h.Xb=o.e();h.Fh=9.99999999E7;h.mo=j;h.no=p;h.kj=0;h.Bh=new v;j=va(h.dh,h.Xb);e=va(h.ek,h.Xb);j=sf(this,0,h,j,e);i.Aa=0;if(!pa(d)){h.dh=ua(j,h.Xb);h.ek=d.e();h.kj=0;e=va(d,h.Xb);j=sf(this,0,h,j,e);i.Aa=h.kj==0?1:0;if(i.Aa<0.5&&h.Ch){d=Na(h.Ch);d.normalize();if(!(Math.abs(d.b)>Math.abs(d.c)&&Math.abs(d.b)>Math.abs(d.d)))i.Aa=1}}if(h.kj&&f!=null){f.M=h.Ch.M.e();f.V=h.Ch.V.e();
f.X=h.Ch.X.e();ta(f.M,h.Xb);ta(f.V,h.Xb);ta(f.X,h.Xb)}ta(j,h.Xb);d=j}this.ia.Jh(null);d.ra(this.Ne);if(i.Aa<0.5)this.Ad=false;else{if(!this.Ad)this.il=b;this.Ad=true}if(a.f.P(d))return false;a.f=d.e();if(this.Wi)if(!this.Ad)if(!(pa(f.M)&&pa(f.V)&&pa(f.X))){b=a.Q.b;d=f.M.add(f.V).add(f.X);z(d,1/3);f.M.c-=d.c;f.M.d-=d.d;f.V.c-=d.c;f.V.d-=d.d;f.X.c-=d.c;f.X.d-=d.d;ya(f.M,b);ya(f.V,b);ya(f.X,b);f.M.c+=d.c;f.M.d+=d.d;f.V.c+=d.c;f.V.d+=d.d;f.X.c+=d.c;f.X.d+=d.d;b=Na(f);d=new v;d.c=Math.atan2(b.d,b.b)*q.Ld;
d.b=a.Q.b;d.d=-Math.atan2(b.c,b.b)*q.Ld;a.Q=d}if(c&&g){b=true;for(d=0;d<a.ha.length;++d)if((f=a.ha[d])&&f.n()=="cameramodelviewer"){b=false;break}if(b)c.fa=a.f.add(g)}}this.oe.P(a.f);this.oe=a.f.e();return false};
function sf(a,b,c,d,e){var f=c.no;if(b>5){a=e.e();x(a,f);return d.add(a)}c.lj=e.e();c.qm=e.e();c.qm.normalize();c.Zi=d.e();c.Fk=false;c.Fh=9.99999999E7;var g=new A;c.dh.ya(g.I);c.dh.ya(g.J);B(g,c.dh.add(c.ek));ma(g.I,c.Xb);g.J.ra(c.Xb);var i=[],j=new H,m=1/c.Xb.b,o=1/c.Xb.d;j.o=1/c.Xb.c;j.p=m;j.q=o;j.Da=false;c.mo.$f(g,j,i);for(g=0;g<i.length;++g)a:{j=i[g];var p=La(j);if(Ka(p,c.qm)){var h=m=0,u=false,r=0;m=p.qb(c.Zi);o=p.k.ea(c.lj);if(q.la(o))if(Math.abs(m)>=1)break a;else{u=true;h=0}else{o=1/o;h=
(-1-m)*o;m=(1-m)*o;if(h>m){o=m;m=h;h=o}if(h>1||m<0)break a;h=q.Wb(h,0,1);q.Wb(m,0,1)}m=new v;o=false;var J=1;if(!u){p=c.Zi.substract(p.k).add(y(c.lj,h));r=j.V.substract(j.M);var D=j.X.substract(j.M);u=r.ea(r);var w=r.ea(D),C=D.ea(D),E=p.substract(j.M);r=E.ea(r);E=E.ea(D);D=r*C-E*w;r=E*u-r*w;if(D+r-(u*C-w*w)<0&&!(D<0||r<0)){o=true;J=h;m=p.e()}}if(!o){h=c.lj.e();p=c.Zi.e();u=ra(h);var F=D=r=0;w={};w.Aa=0;r=u;D=2*h.ea(p.substract(j.M));F=ra(j.M.substract(p))-1;if(tf(a,r,D,F,J,w)){J=w.Aa;o=true;m=j.M.e()}if(!o){D=
2*h.ea(p.substract(j.V));F=ra(j.V.substract(p))-1;if(tf(a,r,D,F,J,w)){J=w.Aa;o=true;m=j.V.e()}}if(!o){D=2*h.ea(p.substract(j.X));F=ra(j.X.substract(p))-1;if(tf(a,r,D,F,J,w)){J=w.Aa;o=true;m=j.X.e()}}C=j.V.substract(j.M);F=j.M.substract(p);E=ra(C);var T=C.ea(h),ba=C.ea(F);r=E*-u+T*T;D=E*2*h.ea(F)-2*T*ba;F=E*(1-ra(F))+ba*ba;if(tf(a,r,D,F,J,w)){r=(T*w.Aa-ba)/E;if(r>=0&&r<=1){J=w.Aa;o=true;m=j.M.add(y(C,r))}}C=j.X.substract(j.V);F=j.V.substract(p);E=ra(C);T=C.ea(h);ba=C.ea(F);r=E*-u+T*T;D=E*2*h.ea(F)-
2*T*ba;F=E*(1-ra(F))+ba*ba;if(tf(a,r,D,F,J,w)){r=(T*w.Aa-ba)/E;if(r>=0&&r<=1){J=w.Aa;o=true;m=j.V.add(y(C,r))}}C=j.M.substract(j.X);F=j.X.substract(p);E=ra(C);T=C.ea(h);ba=C.ea(F);r=E*-u+T*T;D=E*2*h.ea(F)-2*T*ba;F=E*(1-ra(F))+ba*ba;if(tf(a,r,D,F,J,w)){r=(T*w.Aa-ba)/E;if(r>=0&&r<=1){J=w.Aa;o=true;m=j.X.add(y(C,r))}}}if(o){o=J*c.lj.getLength();if(!c.Fk||o<c.Fh){c.Fh=o;c.Bh=m.e();c.Fk=true;c.Ch=j;++c.kj}}}}if(!c.Fk)return d.add(e);i=d.add(e);d=d.e();if(c.Fh>=f){e=e.e();x(e,c.Fh-f);d=c.Zi.add(e);e.normalize();
ma(c.Bh,y(e,f))}e=c.Bh.e();g=d.substract(c.Bh);g.normalize();j=new Ia;j.k=g.e();j.Va=-e.ea(j.k);e=i.substract(y(g,j.qb(i))).substract(c.Bh);if(e.getLength()<f)return d;return sf(a,b+1,c,d,e)}function tf(a,b,c,d,e,f){a=c*c-4*b*d;if(a<0)return false;d=Math.sqrt(a);a=(-c-d)/(2*b);b=(-c+d)/(2*b);if(a>b){c=b;b=a;a=c}if(a>0&&a<e){f.Aa=a;return true}if(b>0&&b<e){f.Aa=b;return true}return false}function of(a,b){if(a.me==0)a.me=b*100};function ef(a){this.rh=0;this.wa=a;this.m=null;this.Tf=0;this.rh=t()}ef.prototype=new $;ef.prototype.n=l("timer");ef.prototype.h=function(a,b,c,d){a=new ef(this.wa);a.m=this.m?this.m.h(c,d):null;a.rh=this.rh;a.Tf=this.Tf;return a};ef.prototype.Xa=function(a){if(a==null)return false;if(this.Tf>0){var b=t();if(b-this.rh>this.Tf){this.rh=b;this.m&&this.m.execute(a);return true}}return false};
function ff(a,b){this.wa=a;this.Ha=b;this.m=null;this.Tf=0;this.Id=null;this.pe=false;this!=null&&b.Cf.push(this);this!=null&&b.Hi.push(this);Re(a,this)}ff.prototype=new $;n=ff.prototype;n.n=l("keypress");n.h=function(a,b,c,d){a=new ff(this.wa,this.Ha);a.qf=this.qf;a.oc=this.oc;a.m=this.m?this.m.h(c,d):null;return a};n.Xa=function(a){this.Id=a;a=this.pe;this.pe=false;return a};n.Xd=function(a){if(this.qf==0&&a.keyCode==this.oc){uf(this);return true}return false};
n.Yd=function(a){if(this.qf==1&&a.keyCode==this.oc){uf(this);return true}return false};n.Rc=function(a){if(this.qf==1)if(a.button>1&&this.oc==2)uf(this);else a.button<=1&&this.oc==1&&uf(this)};n.pd=function(a){if(this.qf==0)if(a.button>1&&this.oc==2)uf(this);else a.button<=1&&this.oc==1&&uf(this)};n.Ue=function(a){if(this.m)return lc(this.m,a);return null};
function uf(a){if(a.Id&&a.Id.Y===a.wa&&ae(a.Id)){if(a.Id.tb==null&&a.Id.i!=-1){a.Id=null;return}a.pe=true;a.m&&a.m.execute(a.Id);return a.wa.Cg=true}return null}
function gf(a){this.ig=this.cd=this.Cc=0;this.sg=false;this.zb=100;this.Af=3E3;this.Zg=-1;this.pg=this.Ti="";this.ah=100;this.gh=0;this.hb=new v;this.Sh=this.di=this.od=this.jd="";this.sd=this.ud=this.rd=this.Dc=null;this.Ij=this.Rj=this.Gc=0;this.ff=null;this.Uh=this.he=this.Zc=this.ug=0;this.Sm=null;this.sj=this.Zk=this.pj=false;this.tj=new Aa;this.zi=0;this.Qd=this.ia=null;this.Le=a;this.ml=0;this.sk=new v;this.Pj=null;this.Qj=0}gf.prototype=new $;gf.prototype.n=l("gameai");
gf.prototype.h=function(a,b,c,d){a=new gf(this.Le);a.Cc=this.Cc;a.cd=this.cd;a.ig=this.ig;a.sg=this.sg;a.zb=this.zb;a.Ti=this.Ti;a.pg=this.pg;a.ah=this.ah;a.gh=this.gh;a.Zg=this.Zg;a.Af=this.Af;a.hb=this.hb?this.hb.e():null;a.jd=this.jd;a.od=this.od;a.di=this.di;a.Sh=this.Sh;a.Dc=this.Dc?this.Dc.h(c,d):null;a.rd=this.rd?this.rd.h(c,d):null;a.ud=this.ud?this.ud.h(c,d):null;a.sd=this.sd?this.sd.h(c,d):null;return a};
gf.prototype.Xa=function(a,b){if(a==null||this.Le==null)return false;var c=b-this.ml;if(c>150)c=150;this.ml=b;var d=0,e=false;if(this.Qd!==a){this.Qd=a;Q(a);this.sk=O(a)}var f=O(a);if(this.Gc!=3)if(this.Gc==1){d=vf(this,a);if(this.ff.substract(f).getLength()<d){this.Gc=0;this.Sc(a,0);e=true}else{e=false;if(this.Zc>2){d=this.Zc*(this.cd/1E3);if(this.Uh.substract(f).getLength()*1.2<d){this.Gc=0;this.Sc(a,0);e=true}}if(!e){this.Zc+=c;e=this.ff.substract(f);x(e,this.cd/1E3*c);a.f.ra(e)}e=wf(this,a,b-
this.ug,this.ff.substract(f),this.gh)}}else if(this.Gc==2){this.Zc+=c;if(!this.pj&&this.Zc>this.he/2){this.sj=true;this.Dc&&this.Dc.execute(a);this.sj=false;e=this.pj=true}if(this.Zc>this.he)this.Gc=0;else e=wf(this,a,b-this.ug,this.ff.substract(f),Math.min(this.gh,this.he))}else if(this.Gc==0)if(this.Cc==1||this.Cc==2||this.Cc==3){if(this.ig<=0||!this.Qd||this.pg.length==0||!this.Le)c=null;else if(!this.Rj||b>this.Rj){this.Qj=this.ig;this.Pj=null;xf(this,this.Le.Ma,f,this.pg);this.Rj=b+500+Math.random()*
1E3;c=this.Pj}else c=null;if(c!=null){e=1E3;if(this.Dc)if(d=lc(this.Dc,"Shoot"))e=d.xc;d=e;!this.Zk&&this.rd&&this.rd.execute(a);e=this.Zk=true;if(O(c).qb(f)<d)if(!c||!a?false:yf(this,Da(Yd(c)),Da(Yd(a)))){this.tj.R=Da(Yd(a));this.tj.K=Da(Yd(c));d=c;c=O(c);this.Gc=2;this.ff=c;this.ug=b;this.Sm=d;this.Uh=f;this.Zc=0;this.he=500;this.pj=false;a=this.Sc(a,2);if(a!=0)this.he=a}else zf(this,a,O(c),f,b);else zf(this,a,O(c),f,b)}else if(this.Cc==2||this.Cc==3)if(!this.Ij||b>this.Ij+this.Af){d=vf(this,a);
c=null;if(this.Cc==3){var g=null;if(this.Zg!=-1&&this.Le!=null)g=M(this.Le,this.Zg);if(g!=null&&g.n()=="path"){if(this.zi>=g.ob.length)this.zi=0;c=pe(g,this.zi)}++this.zi}else{c=this.ah;this.Ij=b;c=new v((Math.random()-0.5)*c,(Math.random()-0.5)*c,(Math.random()-0.5)*c);c.ra(this.sk);if(!this.sg)c.b=this.sk.b}if(!(c.substract(f).getLength()<d)){zf(this,a,c,f,b);e=true}}}return e};
function wf(a,b,c,d,e){if(!b)return false;if(b.n()=="camera")return false;if(!a.sg)d.b=0;var f=new H;ab(f,xa(d));d=new H;ab(d,a.hb);f=I(f,d);a=bb(f);f=b.Q.e();c=Math.min(c,e)/e;c=q.Wb(c,0,1);z(a,q.$c);z(f,q.$c);e=new K;jb(e,a.c,a.b,a.d);d=new K;jb(d,f.c,f.b,f.d);gb(d,d,e,c);ib(d,a);z(a,q.Ld);if(b.Q.P(a))return false;b.Q=a;return true}function zf(a,b,c,d,e){a.Gc=1;a.ff=c;a.ug=e;a.Uh=d;a.Zc=0;a.he=0;a.Sc(b,1)}
function yf(a,b,c){if(!a.ia||!a.Le)return true;if(a.ia.Yf(b,c,true,null,true)!=null)return false;return true}function xf(a,b,c,d){if(b&&b.T){var e=false,f=c.qb(O(b));if(f<a.Qj){var g=N(b,"gameai");if(g&&d!=""&&g!==a&&g.zb>0)e=g.Ti.indexOf(d)!=-1}if(e){a.Qj=f;a.Pj=b}for(e=0;e<b.aa.length;++e)xf(a,b.aa[e],c,d)}}function vf(a,b){if(b!=null)return 10;a=Ea(Yd(b));a.b=0;return a.getLength()}gf.prototype.Ik=function(a){switch(a){case 0:return this.jd;case 1:return this.od;case 2:return this.Sh;case 3:return this.di}return""};
gf.prototype.Sc=function(a,b){if(!a||a.n()!="animatedmesh")return 0;var c=a.mb;if(!c)return 0;if(c=Fc(c,this.Ik(b))){Ce(a,c.Wc,c.K);c.Lb!=0&&De(a,c.Lb);a.Cb=b==1||b==0;return(c.K-c.Wc)*c.Lb*1E3}else{Ce(a,1,1);a.Cb=false}return 0};function Sb(a,b,c){if(c)if(a.zb!=0){a.zb-=b;if(a.zb<0)a.zb=0;if(a.zb==0){a.sd!=null&&a.sd.execute(c);b=O(c);a.Gc=3;a.ug=0;a.Uh=b;a.Zc=0;a.he=500;a.Sc(c,3)}else a.ud!=null&&a.ud.execute(c)}}
gf.prototype.Ue=function(a){var b=null;if(this.Dc)if(b=lc(this.Dc,a))return b;if(this.rd)if(b=lc(this.rd,a))return b;if(this.ud)if(b=lc(this.ud,a))return b;if(this.sd)if(b=lc(this.sd,a))return b;return null};q.Nm=[];function Xb(){this.vc=this.l="";this.Mb=this.Nb=this.Hb=0}
function sb(a,b,c){if(a==null)return null;for(var d=a.toLowerCase(),e=q.Nm,f=0;f<e.length;++f){var g=e[f];if(g!=null&&g.getName().toLowerCase()==d)return g}f=Af(a,c);if(f==null)c=null;else{c=new Xb;c.Tk(a);$b(c,0);d=f.Wd;if(f.yc=="health"&&d!=null){d=N(d,"gameai");d!=null&&$b(c,d.zb)}else if(f.yc=="movementspeed"&&d!=null){f=N(d,"gameai");g=N(d,"keyboardcontrolled");if(d=N(d,"camerafps"))Zb(c,d.Eb);else if(g)Zb(c,g.Eb);else f&&Zb(c,f.cd)}else if(f.yc=="damage"&&d!=null)(d=Xd(d,"Shoot"))&&$b(c,d.yd);
else if(f.yc=="colsmalldistance"&&d!=null){d=N(d,"collisionresponse");d!=null&&Zb(c,d.pb)}else f.yc=="soundvolume"&&Zb(c,q.We.Dd*100);c=c}if(c)return c;if(b==true){b=new Xb;b.Tk(a);e.push(b);return b}return null}
function ac(a,b){var c=Af(a.l,b);if(c!=null){b=c.Wd;if(c.yc=="health"&&b!=null){c=N(b,"gameai");if(c!=null){var d=c.zb;a=Bf(a);d=d-a;if(d>0)Sb(c,d,b);else c.zb=a}}else if(c.yc=="movementspeed"&&b!=null){c=N(b,"gameai");d=N(b,"keyboardcontrolled");if(b=N(b,"camerafps"))b.Eb=R(a);else if(d)d.Eb=R(a);else if(c)c.cd=R(a)}else if(c.yc=="damage"&&b!=null){if(b=Xd(b,"Shoot"))b.yd=Bf(a)}else if(c.yc=="damage"&&b!=null){if(b=Xd(b,"Shoot"))b.yd=Bf(a)}else if(c.yc=="colsmalldistance"&&b!=null){b=N(b,"collisionresponse");
if(b!=null){b.pb=Bf(a);b.Sl=true}}else c.yc=="soundvolume"&&jd(q.We,R(a)/100)}}function Af(a,b){if(a.length==0||b==null)return null;if(a[0]!="#")return null;var c=a.indexOf(".");if(c==-1)return null;var d=a.substr(c+1,a.length-c);if(d.length==0)return null;c=a.substr(1,c-1);a=null;if(c!="system"){a=Oe(b,c);if(a==null)return null}b={};b.Wd=a;b.yc=d;return b}Xb.prototype.getName=k("l");Xb.prototype.Tk=ca("l");
function tb(a){switch(a.Hb){case 1:return String(a.Nb);case 2:return a.Mb%1==0?String(a.Mb):a.Mb.toFixed(6)}return a.vc}function Bf(a){switch(a.Hb){case 0:return Math.floor(a.vc);case 1:return a.Nb;case 2:return a.Mb}return 0}function R(a){switch(a.Hb){case 0:return Number(a.vc);case 1:return a.Nb;case 2:return a.Mb}return 0}function Yb(a,b){a.Hb=0;a.vc=b}function $b(a,b){a.Hb=1;a.Nb=b}function Zb(a,b){a.Hb=2;a.Mb=b}
function jf(a,b){this.$b=0;this.wa=a;this.ne=this.Fb=this.Ki=this.Eb=0;this.vh=false;this.jf=this.Qh=0;this.Bd=15;this.hb=new v;this.Ji=this.ni=this.od=this.jd="";this.rf=t();this.Eh=this.Td=this.ae=this.$d=this.Vd=this.kn=this.pk=this.Yi=false;this.ac=0;this.nj=false;this.$i=true;this.ei=false;this.Ha=b;this!=null&&b.Cf.push(this);this!=null&&b.Hi.push(this)}jf.prototype=new $;n=jf.prototype;n.n=l("keyboardcontrolled");
n.h=function(){var a=new jf(this.wa,this.Ha);a.Eb=this.Eb;a.Ki=this.Ki;a.Fb=this.Fb;a.ne=this.ne;a.Bd=this.Bd;a.hb=this.hb?this.hb.e():null;a.jd=this.jd;a.od=this.od;a.ni=this.ni;a.Ji=this.Ji;a.vh=this.vh;a.Qh=this.Qh;a.jf=this.jf;a.ei=this.ei;return a};
n.Ih=function(a,b){if(b==37||b==65){if(this.Vd=a)this.$d=false;return true}if(b==39||b==68){if(this.$d=a)this.Vd=false;return true}if(b==38||b==87){if(this.ae=a)this.Td=false;return true}if(b==40||b==83){if(this.Td=a)this.ae=false;return true}if(b==32){this.Eh=a;return true}return false};n.Xd=function(a){this.pk=a.shiftKey==1;return this.Ih(true,a.keyCode)};n.Yd=function(a){this.pk=a.shiftKey==1;return this.Ih(false,a.keyCode)};
n.Xa=function(a,b){var c=b-this.$b;if(c>250)c=250;this.$b=b;var d=false;this.rf=b;if(this.ei){b=a.Y.ga;if(b!=null){b=N(b,"3rdpersoncamera");if(b!=null){if(b.Rb!==a)return false}else return false}}b=a.Q;if(this.Vd){b.b-=c*this.Fb*0.0010;d=true}if(this.$d){b.b+=c*this.Fb*0.0010;d=true}var e=new H;ab(e,b);b=new v(0,0,1);var f=new H;ab(f,this.hb);e=I(e,f);Ra(e,b);e=this.pk;var g=(e?this.Ki:this.Eb)*c,i=0;f=this.Td;var j=this.ae;if(this.vh&&c)if(j||f){if(this.nj!=j)if(this.jf==0)this.ac*=-1;else this.ac=
0;this.nj=!f;i=g/c;this.ac+=this.Qh*i*(c/1E3);if(this.ac>i)this.ac=i;g=this.ac*c}else if(this.jf==0)this.ac=0;else{i=g/Number(c);this.ac-=this.jf*i*(c/1E3);if(this.ac<0)this.ac=0;g=this.ac*c}x(b,g);if(j||f||this.vh&&this.ac!=0){d=b.e();if(f||!(j||f)&&!this.nj)z(d,-1);a.f.ra(d);this.Yi=d=true}if(j||f){this.Sc(a,e?3:1,f);d=this.Yi=true}else if(this.Yi){c=false;if(b=N(a,"collisionresponse"))c=b.Ad;c||this.Sc(a,0,false);this.Yi=false}if(this.Eh)if((c=N(a,"collisionresponse"))&&!c.Ad){of(c,this.ne);this.Sc(a,
2,false);d=true}return d};n.Ik=function(a){switch(a){case 0:return this.jd;case 1:return this.od;case 2:return this.ni;case 3:return this.Ji}return""};n.Sc=function(a,b,c){if(!a||a.n()!="animatedmesh")return 0;var d=a.mb;if(!d)return 0;if(d=Fc(d,this.Ik(b))){var e=1*d.Lb;if(c)e*=-1;if(!(a.jb==d.K&&a.Na==d.Wc&&q.P(a.kb,e))){Ce(a,d.Wc,d.K);e&&De(a,e);a.Cb=b==0||b==1||b==3}return(d.K-d.Wc)*d.Lb*1E3}else{Ce(a,1,1);a.Cb=false}return 0};
function hf(a){this.$b=0;this.wa=a;this.hh=-1;this.Bd=15;this.hb=new v;this.Ui=this.hi=0;this.bc=false;this.rf=this.ia=0;this.ke=new v;this.yg=new v;this.Rb=null;this.Ql=false;this.$i=true}hf.prototype=new $;hf.prototype.n=l("3rdpersoncamera");hf.prototype.h=function(){var a=new hf(this.wa);a.hh=this.hh;a.Bd=this.Bd;a.hb=this.hb.e();a.hi=this.hi;a.Ui=this.Ui;a.bc=this.bc;a.ia=this.ia;return a};
hf.prototype.Xa=function(a,b){var c=b-this.$b;if(c>250)c=250;this.$b=b;var d=false;if(a==null)return false;d=a.Y;if(!this.Ql)if(this.hh!=-1)if(d!=null){if((d=M(d,this.hh))&&d!==this.Rb){this.Rb=d;this.$i=true}this.Ql=true}if(!this.Rb)return false;d=false;var e=a.fa.e();a.fa=O(this.Rb);a.fa.ra(this.yg);a.fa.b+=this.Ui;a.fa.P(e)||(d=true);if(this.$i){Q(this.Rb);Q(a);this.yg=Ea(this.Rb.gb());this.yg.b/=2;this.yg.c=0;this.yg.d=0;this.$b=b;this.$i=false}if(a.Y.ga!==a)return false;if(pa(this.ke)){this.ke=
O(this.Rb).substract(O(a));b=new H;ab(b,this.Rb.Q);e=this.ke;var f=e.e();e.c=f.c*b.o+f.b*b.r+f.d*b.s;e.b=f.c*b.t+f.b*b.p+f.d*b.u;e.d=f.c*b.v+f.b*b.w+f.d*b.q}b=this.Rb.Q;e=new H;ab(e,b);b=new H;ab(b,this.hb);e=I(e,b);b=a.f.e();switch(this.hi){case 0:break;case 2:b=O(this.Rb).substract(this.ke);break;case 1:b=this.ke.e();Ra(e,b);b=O(this.Rb).substract(b);e=O(a).qb(b);f=this.ke.getLength();f=e>f*2.2;if(q.P(this.Bd,0)||f)b=b;else{c=Math.sqrt(e)*(c/1E3)*this.Bd;if(c>e)c=e;b=b.substract(a.f);x(b,c);b.ra(a.f);
b=b}break}if(this.bc&&this.ia!=null&&!a.f.P(b)){this.ia.Jh(this.Rb);c=new Aa;c.R=a.fa.e();c.K=b.e();var g=Ba(c);e=g.getLength();f=this.ke.getLength()/10;x(g,f);c.K.ra(g);g=new G;g=this.ia.Yf(c.R,c.K,true,g,true);if(g!=null){b=g.substract(c.R);g=b.getLength();if(g<f)g=f;g-=f;if(g>e)g=e;x(b,g);b=c.R.add(b)}this.ia.Jh(null)}if(!a.f.P(b)){d=true;a.f=b}return d};function kf(a){this.Km=this.Gl=false;this.wa=a;this.m=null}kf.prototype=new $;kf.prototype.n=l("onfirstframe");
kf.prototype.Xa=function(a){if(this.Gl)return false;this.Gl=true;if(this.m){this.m.execute(a);return true}return false};function Ae(a,b,c){this.wa=b;this.na=c;this.Fa=a;this.yf=false;Re(b,this);this.Ej=[];for(a=0;a<255;++a)this.Ej.push(false);this.ef=[];this.ef.push(new Ca(-1,0));this.ef.push(new Ca(0,-1));this.ef.push(new Ca(1,0));this.ef.push(new Ca(0,1))}Ae.prototype=new $;Ae.prototype.n=l("mobileinput");
Ae.prototype.Xa=function(){var a=false;if(this.na.li==1)Cf(this,this.yf&&this.na.yi,this.na.oc);else if(Math.sqrt(this.na.Jb*this.na.Jb+this.na.Kb*this.na.Kb)<0.3||!this.yf){if(!this.yf){a=this.na.Jb!=0&&this.na.Kb!=0;this.na.Jb=0;this.na.Kb=0}Cf(this,false,37);Cf(this,false,38);Cf(this,false,39);Cf(this,false,40)}else for(var b=0;b<4;++b){var c=this.ef[b].c-this.na.Jb,d=this.ef[b].b-this.na.Kb;c=Math.sqrt(c*c+d*d)<1;Cf(this,c,37+b)}return a};
function Cf(a,b,c){if(a.Ej[c]!=b){a.Ej[c]=b;var d={};d.keyCode=c;b?ud(a.Fa,d):vd(a.Fa,d)}}Ae.prototype.Rc=function(){this.yf=false};Ae.prototype.pd=function(){this.yf=true};Ae.prototype.Zd=function(a){if(this.yf&&this.na.yi&&this.na.jk!=0&&this.na.ik!=0){var b=Rd(this.Fa,a)-this.na.Dl;a=Sd(this.Fa,a)-this.na.El;this.na.Jb=b/this.na.jk;this.na.Kb=a/this.na.ik;this.na.Jb=q.Wb(this.na.Jb,0,1);this.na.Kb=q.Wb(this.na.Kb,0,1);this.na.Jb=this.na.Jb*2-1;this.na.Kb=this.na.Kb*2-1}};function vector3d(a,b,c){if(a!==null){this.x=a;this.y=b;this.z=c}else this.z=this.y=this.x=0}n=vector3d.prototype;n.add=function(a){return new vector3d(this.x+a.x,this.y+a.y,this.z+a.z)};n.substract=function(a){return new vector3d(this.x-a.x,this.y-a.y,this.z-a.z)};n.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};n.normalize=function(){var a=this.getLength();if(a!=0){a=1/a;this.x*=a;this.y*=a;this.z*=a}};
n.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};n.x=0;n.y=0;n.z=0;function Df(){this.om=-1;this.Of=[];this.Gg=false;this.Ha=this.S=this.Ta=this.ai=this.cc=null;this.Te=[]}q.$a=null;function Y(){if(q.$a==null)q.$a=new Df;return q.$a}function rd(a,b){a.Ha=b}function Gd(a){return a.Te.length!=0}function mf(a,b){try{eval(b)}catch(c){ia(q.ja,c)}}function Ef(a){++a.om;return a.om}
function Id(a,b){a.Gg=true;if(a.Te.length!=null){a.S=b;for(b=0;b<a.Te.length;++b)a.Te[b]();a.S=null}a.Gg=false}
function Ff(a,b,c){switch(c){case "Position Mode":return b.fd;case "Pos X (percent)":return b.ve*100;case "Pos Y (percent)":return b.we*100;case "Width (percent)":return b.He;case "Height (percent)":return b.Ge;case "Pos X (pixels)":return b.te;case "Pos Y (pixels)":return b.ue;case "Width (pixels)":return b.Je*100;case "Height (pixels)":return b.Ie*100;case "Alpha":return q.Ye(b.nc);case "Image":return b.bb?b.bb.l:null;case "Background Color":return b.nc;case "Draw Text":return b.je;case "TextColor":return b.Ke;
case "Text":return b.Sa}return null}q.ee=function(a){this.Ab=null;this.Ub=[];this.Bk=this.Xl=false;this.ed=-1;this.Zl=false;this.wa=a};q.ee.prototype=new $;function Gf(a,b,c){a.Xl=b;a.Bk=c;if(!a.Zl&&a.wa){b=Y().Ha;if(c){a!=null&&b.Cf.push(a);a!=null&&b.Hi.push(a)}Re(a.wa,a)}}q.ee.prototype.n=l("extensionscript");q.ee.prototype.h=function(a,b,c,d){a=new q.ee(b);a.Ab=this.Ab;for(b=0;b<this.Ub.length;++b){var e=this.Ub[b];e!=null?a.Ub.push(e.h(c,d)):a.Ub.push(null)}return a};
q.ee.prototype.Xa=function(a,b){if(a==null)return false;if(this.Ab==null||this.Ab.length==0)return false;var c=Y();c.ai=this;this.ed==-1&&Hf(this,a,c);if(this.ed!=-1)try{_ccbScriptCache[this.ed].onAnimate(a,b)}catch(d){ia(q.ja,this.Ab+": "+d)}c.ai=null;return true};
function Hf(a,b,c){var d="";a.ed=Ef(c);d+="if (typeof _ccbScriptCache == 'undefined') _ccbScriptCache = new Array(); ";d+="_ccbScriptCache[";d+=a.ed;d+="] = new ";d+=a.Ab;d+="();";mf(c,d);var e="_ccbScriptCache[";e+=a.ed;e+="].";d="try {";d+=If(e,a.Ub);d+="} catch(e) { }";mf(c,d);d=false;if(b.n()=="camera")d=true;a.Zl=d;d="try { ccbRegisterBehaviorEventReceiver(typeof ";d+=e;d+="onMouseEvent != 'undefined', typeof ";d+=e;d+="onKeyEvent != 'undefined'); } catch(e) { }";mf(c,d)}
function Jf(a,b,c){a.Xl&&_ccbScriptCache[a.ed].onMouseEvent(b,c)}n=q.ee.prototype;n.Rc=function(){Jf(this,2,0)};n.bf=function(a){Jf(this,1,a)};n.pd=function(){Jf(this,3,0)};n.Zd=function(){Jf(this,0,0)};n.Xd=function(a){this.Bk&&_ccbScriptCache[this.ed].onKeyEvent(a.keyCode,true)};n.Yd=function(a){this.Bk&&_ccbScriptCache[this.ed].onKeyEvent(a.keyCode,false)};function lf(){this.i=-1;this.Pe=this.vc=this.l=null;this.Nb=this.Mb=0;this.oh=this.hg=null}
lf.prototype.h=function(a,b){var c=new lf;c.i=this.i;c.l=this.l;c.vc=this.vc;c.Pe=this.Pe?this.Pe.e():null;c.Mb=this.Mb;c.Nb=this.Nb;if(this.hg)c.hg=this.hg.h(a,b);c.oh=this.oh;return c};
function If(a,b){for(var c="",d=0;d<b.length;++d){var e=b[d];if(e!=null){c+=a;c+=e.l;c+=" = ";switch(e.i){case 1:c+=e.Mb;c+="; ";break;case 2:c+='"';var f=e.vc.split('"').join('\\"');c+=f;c+='"; ';break;case 3:c+=e.Nb?"true":"false";c+="; ";break;case 6:c+="new vector3d(";c+=e.Pe.c;c+=", ";c+=e.Pe.b;c+=", ";c+=e.Pe.d;c+="); ";break;case 7:c+='"';c+=e.oh?e.oh.l:"";c+='"; ';break;case 8:c+="ccbGetSceneNodeFromId(";c+=e.Nb;c+="); ";break;case 9:a:{f=Y();e=e.hg;for(var g=0;g<f.Of.length;++g)if(f.Of[g]===
e){f=g;break a}f.Of.push(e);f=f.Of.length-1}c+=f;c+="; ";break;case 0:case 5:case 4:default:c+=e.Nb;c+="; ";break}}}return c}function nf(){this.i="ExtensionScript";this.Ub=[];this.Ab=null}nf.prototype.h=function(a,b){var c=new nf;c.Ab=this.Ab;for(var d=0;d<this.Ub.length;++d){var e=this.Ub[d];e!=null?c.Ub.push(e.h(a,b)):c.Ub.push(null)}return c};
nf.prototype.execute=function(a){if(!(this.Ab==null||this.Ab.length==0||a==null)){var b=Y(),c="";c="_ccbScriptTmp = new ";c+=this.Ab;c+="();";mf(b,c);c="try { ";c+=If("_ccbScriptTmp.",this.Ub);c+="} catch(e) { }";mf(b,c);c="try { _ccbScriptTmp.execute(ccbGetSceneNodeFromId(";c+=a.Qa;c+=")); } catch(e) { }";mf(b,c)}};function Kf(a){var b=q.$a.cc;if(b==null)return null;return M(b,a)}
function Lf(a){var b=q.$a.cc;if(a==null)return null;var c=a.Qa,d=qc(b);c=a.h(a.tb,c,d);if(c!=null)c.Qa=d;if((a=a.fb)&&b)if(a=a.h(c)){c.fb=a;b.Yc&&rc(b.Yc,a)}return c}function Mf(){var a=q.$a.cc;if(a==null)return null;return a.ga}function Nf(a){var b=q.$a.cc;b!=null&&a!=null&&a.n()=="camera"&&Le(b,a)}function Of(a,b){if(a==null)return-1;if(b<0||b>=a.aa.length)return null;return a.aa[b]}function Pf(){var a=q.$a.cc;if(a==null)return null;return a.Ma}
function Qf(a){if(a==null)return 0;return a.aa.length}function Rf(a){var b=q.$a.cc;if(b==null)return null;return Oe(b,a)}function Sf(a){var b=q.$a.cc;b!=null&&oc(b,a,0)}function Tf(a){if(a==null)return 0;return a.Ac()}
function Uf(a,b,c){if(a==null)return null;if(b<0||b>=a.Ac())return null;a=a.lc(b);if(a==null)return null;if(c=="Type")switch(a.i){case 0:return"solid";case 2:return"lightmap";case 3:return"lightmap_add";case 4:return"lightmap_m2";case 5:return"lightmap_m4";case 11:return"reflection_2layer";case 12:return"trans_add";case 13:return"trans_alphach";case 16:return"trans_reflection_2layer"}else if(c=="Texture1")return a.ab==null?"":a.ab.l;else if(c=="Texture2")return a.jc==null?"":a.jc.l;else if(c=="Lighting")return a.Lc;
else if(c=="Backfaceculling")return a.Mm;return null}function Vf(){}
function Wf(a,b,c,d){if(a!=null)if(!(b<0||b>=a.Ac())){a=a.lc(b);if(a!=null){b=typeof d=="string"?d:null;var e=null;e=Y();if(c=="Type")switch(b){case "solid":a.i=0;break;case "lightmap":case "lightmap_add":case "lightmap_m2":case "lightmap_m4":a.i=2;break;case "reflection_2layer":a.i=11;break;case "trans_add":a.i=12;break;case "trans_alphach":a.i=13;break;case "trans_reflection_2layer":a.i=16;break}else if(c=="Texture1"){if(b!=null&&e.Ta!=null){e=Ic(e.Ta,b);if(e!=null)a.ab=e}}else if(c=="Texture2"){if(b!=
null&&e.Ta!=null){e=Ic(e.Ta,b);if(e!=null)a.jc=e}}else if(c=="Lighting")a.Lc=d;else if(c=="Backfaceculling")a.Mm=d}}}
function Xf(a,b,c,d,e){if(a!=null){var f=0,g=0,i=0;if(d==null&&c!=null&&typeof c.x!="undefined"){f=c.x;g=c.y;i=c.z}if(d!=null&&e!=null){f=c;g=d;i=e}var j=e=null,m=null;d=null;var o=a.n();if(o=="camera")e=a;else if(o=="animatedmesh")j=a;else if(o=="light")m=a;else if(o=="2doverlay")d=a;if(b=="Visible")a.T=c;else if(b=="Position"){a.f.c=f;a.f.b=g;a.f.d=i}else if(b=="Rotation"){a.Q.c=f;a.Q.b=g;a.Q.d=i}else if(b=="Scale"){a.oa.c=f;a.oa.b=g;a.oa.d=i}else if(d!=null){a=Y();f=d;switch(b){case "Position Mode":f.fd=
c=="absolute (pixels)";break;case "Pos X (percent)":f.ve=c/100;break;case "Pos Y (percent)":f.we=c/100;break;case "Width (percent)":f.He=c;break;case "Height (percent)":f.Ge=c;break;case "Pos X (pixels)":f.te=c;break;case "Pos Y (pixels)":f.ue=c;break;case "Width (pixels)":f.Je=c/100;break;case "Height (pixels)":f.Ie=c/100;break;case "Alpha":f.nc=(c&255)<<24|f.nc&16777215;break;case "Image":b=Ic(a.Ta,c);f.bb=b;break;case "Background Color":f.nc=c;break;case "Draw Text":f.je=c?true:false;break;case "TextColor":f.Ke=
c;break;case "Text":f.Sa=c;break}}else if(b=="Target")e!=null&&Mb(e,new v(f,g,i));else if(b=="UpVector"){if(e!=null)e.Vb=new v(f,g,i)}else if(b=="FieldOfView_Degrees")e!=null&&ce(e,q.cm(c));else if(b=="AspectRatio")e!=null&&Md(e,c);else if(b=="Animation")j!=null&&Gb(j,c,j.Cb);else if(b=="Looping")j!=null&&Ee(j,c);else if(b=="FramesPerSecond")j!=null&&De(j,c*0.0010);else if(b=="Radius"){if(m!=null)m.Kc.ta=c}else if(b=="Name")a.l=c}}
function Yf(a,b){if(a==null)return null;var c=null,d=null,e=null,f=null,g=a.n();if(g=="camera")c=a;else if(g=="animatedmesh")d=a;else if(g=="light")e=a;else if(g=="2doverlay")f=a;if(b=="Visible")return a.T;else if(b=="Position")return new vector3d(a.f.c,a.f.b,a.f.d);else if(b=="Rotation")return new vector3d(a.Q.c,a.Q.b,a.Q.d);else if(b=="Scale")return new vector3d(a.oa.c,a.oa.b,a.oa.d);else if(f!=null)return Ff(Y(),f,b);else if(b=="Target")return new vector3d(c.fa.c,c.fa.b,c.fa.d);else if(b=="UpVector"){if(c!=
null)return new vector3d(c.Vb.c,c.Vb.b,c.Vb.d)}else if(b=="FieldOfView_Degrees"){if(c!=null)return q.Hh(c.Jc)}else if(b=="AspectRatio"){if(c!=null)return c.mc}else if(b=="Animation")return"";else if(b=="Looping"){if(d!=null)return d.Cb}else if(b=="FramesPerSecond"){if(d!=null)return d.kb*1E3}else if(b=="Radius"){if(e!=null)return e.Kc.ta}else if(b=="Name")return a.l;return null}
function Zf(a,b,c,d){if(a!=null){a.f.c=b;a.f.b=c;a.f.d=d;for(b=0;b<a.ha.length;++b){c=a.ha[b];c!=null&&c.n()=="collisionresponse"&&c.reset()}}}function $f(a){Y().Te.push(a)}function ag(a){var b=Y();a=b.Te.indexOf(a);a!=-1&&b.Te.splice(a,1)}function bg(a,b,c,d,e){var f=Y();!f.Gg||f.S==null||Zc(f.S,b,c,d-b,e-c,a,true)}function cg(a,b,c,d,e){a=Y();!a.Gg||a.S==null||Zc(a.S,b,c,d-b,e-c,4278190080,true)}function dg(a,b,c,d,e){a=Y();!a.Gg||a.S==null||Zc(a.S,b,c,d-b,e-c,4278190080,true)}
function eg(a,b){var c=Y().Ha;a=Ud(c,a,b);if(a!=null)return new vector3d(a.c,a.b,a.d);return null}function fg(a,b,c){var d=Y().Ha;a=Vd(d,new v(a,b,c));return new vector3d(a.c,a.b,0)}function gg(a,b,c,d,e,f){var g=new Aa;g.R=new v(a,b,c);g.K=new v(d,e,f);a=q.$a.cc;a=Tb(Ub.prototype,a,g.R,g.K,a.Yc,true);if(a<999999999){b=Ba(g);x(b,a);g=g.R.add(b);return new vector3d(g.c,g.b,g.d)}return null}
function hg(a,b,c,d,e,f,g){if(a==null)return false;if(a.Z==null)return false;a=new v(b,c,d);e=new v(e,f,g);return Ga(Yd(s),a,e)}function ig(){}function jg(a){var b=Y();a=Hc(b.Ta,a,true);if(a!=null)return a.l;return null}function kg(){var a=Y().Ha;if(a)return a.Pb;return 0}function lg(){var a=Y().Ha;if(a)return a.Qb;return 0}function mg(){var a=Y().Ha;if(a!=null&&a.S)return a.S.Zb();return 0}function ng(){var a=Y().Ha;if(a!=null&&a.S)return a.S.Yb();return 0}function og(){}function pg(){}
function qg(a){var b=Y().Ha;if(b!=null)return Ib(b,a,true);return false}function rg(a){var b=q.We;a=ed(b,a);a!=null&&ec(b,a,false,1)}function sg(a){a=sb(a,true,q.$a.cc);if(a==null)return null;if(a.Hb==0)return tb(a);if(a.Hb==1)return Bf(a);if(a.Hb==2)return R(a);return null}function tg(a,b){var c=q.$a.cc;a=sb(a,true,c);if(a!=null){typeof b=="number"?Zb(a,b):Yb(a,s);ac(a,c)}}function ug(a,b){var c=Y().Ha;c&&Wd(c,a,b)}function vg(){return null}function wg(){}function xg(){return"webgl"}
function yg(a,b){var c=q.$a.cc;if(c!=null){if(b==null)b=c.Ma;if(a>=0&&a<q.$a.Of.length){a=q.$a.Of[a];a!=null&&a.execute(b)}}}function zg(a){ia(q.ja,a)}function Ag(){}function Bg(a,b){q.$a.ai!=null&&Gf(q.$a.ai,a,b)};function md(){this.vg=-1;this.Lm="";this.hc=[];this.yn=2;this.Tl=false;this.wo=320;this.vo=200;this.Wl=function(a){this.hc.push(a)};this.Zf=function(){if(this.vg<0||this.vg>=this.hc.length)return null;return this.hc[this.vg]};this.ym=function(a){for(var b=0;b<this.hc.length;++b)if(this.hc[b]===a){this.vg=b;return}}};q.Cn=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);
q.Dn=function(a){var b,c,d,e,f,g=q.Cn;e=a.length;d=0;for(f="";d<e;){do b=g[a.charCodeAt(d++)&255];while(d<e&&b==-1);if(b==-1)break;do c=g[a.charCodeAt(d++)&255];while(d<e&&c==-1);if(c==-1)break;f+=String.fromCharCode(b<<2|(c&48)>>4);do{b=a.charCodeAt(d++)&255;if(b==61)return f;b=g[b]}while(d<e&&b==-1);if(b==-1)break;f+=String.fromCharCode((c&15)<<4|(b&60)>>2);do{c=a.charCodeAt(d++)&255;if(c==61)return f;c=g[c]}while(d<e&&c==-1);if(c==-1)break;f+=String.fromCharCode((b&3)<<6|c)}return f};function Cg(){}n=Cg.prototype;n.Xe=aa();n.$f=function(a,b,c){this.Xe(b,c)};
n.Yf=function(a,b,c,d,e){if(!a||!b)return null;if(this.Za!=null&&e&&this.Za.T==false)return null;var f=new A;f.I=a.e();f.J=a.e();B(f,b);e=[];this.$f(f,null,e);f=b.substract(a);f.normalize();for(var g,i=9.999999999E8,j=ra(b.substract(a)),m=Math.min(a.c,b.c),o=Math.max(a.c,b.c),p=Math.min(a.b,b.b),h=Math.max(a.b,b.b),u=Math.min(a.d,b.d),r=Math.max(a.d,b.d),J=null,D=0;D<e.length;++D){var w=e[D];if(!(c&&!Ka(La(w),f)))if(!(m>w.M.c&&m>w.V.c&&m>w.X.c))if(!(o<w.M.c&&o<w.V.c&&o<w.X.c))if(!(p>w.M.b&&p>w.V.b&&
p>w.X.b))if(!(h<w.M.b&&h<w.V.b&&h<w.X.b))if(!(u>w.M.d&&u>w.V.d&&u>w.X.d))if(!(r<w.M.d&&r<w.V.d&&r<w.X.d))if(!(qa(a,w.M)>=i&&qa(a,w.V)>=i&&qa(a,w.X)>=i))if(g=w.Jk(a,f)){var C=qa(g,a),E=qa(g,b);if(C<j&&E<j&&C<i){i=C;d&&w.ya(d);J=g}}}if(J)return J.e();return null};n.aj=l(null);n.Jh=aa();n.h=l(null);
function Ue(a,b){if(a){this.Za=b;this.ca=[];if(a!=null)for(b=0;b<a.Ja.length;++b){var c=a.Ja[b];if(c)for(var d=c.$.length,e=0;e<d;e+=3)this.ca.push(new G(c.j[c.$[e]].f,c.j[c.$[e+1]].f,c.j[c.$[e+2]].f))}}}Ue.prototype=new Cg;
Ue.prototype.Xe=function(a,b){if(this.Za.Z){a=a?I(a,this.Za.Z):this.Za.Z;var c;if(Oa(a))for(c=0;c<this.ca.length;++c)b.push(this.ca[c]);else if(Pa(a))for(c=0;c<this.ca.length;++c)b.push(new G(Va(a,this.ca[c].M),Va(a,this.ca[c].V),Va(a,this.ca[c].X)));else for(c=0;c<this.ca.length;++c)b.push(new G(Ta(a,this.ca[c].M),Ta(a,this.ca[c].V),Ta(a,this.ca[c].X)))}};Ue.prototype.$f=function(a,b,c){this.Xe(b,c)};Ue.prototype.aj=k("Za");Ue.prototype.h=function(a){var b=new Ue(null,a);b.Za=a;b.ca=this.ca;return b};
function Se(){this.uc=[];this.Tj=null}Se.prototype=new Cg;Se.prototype.Xe=function(a,b){for(var c=this.Tj,d=0;d<this.uc.length;++d){var e=this.uc[d];c!=null&&c==e.aj()||e.Xe(a,b)}};Se.prototype.$f=function(a,b,c){for(var d=this.Tj,e=0;e<this.uc.length;++e){var f=this.uc[e];d!=null&&d==f.aj()||f.$f(a,b,c)}};function rc(a,b){a.uc.push(b)}function Fd(a,b){for(var c=0;c<a.uc.length;)if(a.uc[c]===b){a.uc.splice(c,1);return}else++c}Se.prototype.clear=function(){this.uc=[]};
Se.prototype.Yf=function(a,b,c,d,e){var f=9.999999999E8,g=null,i=null;if(d)i=new G;for(var j=0;j<this.uc.length;++j){var m=this.uc[j].Yf(a,b,c,i,e);if(m!=null){var o=qa(m,a);if(o<f){g=m.e();f=o;d&&i.ya(d)}}}return g};Se.prototype.Jh=ca("Tj");q.nk=function(){this.ca=[];this.g=new A;this.Fc=[]};
function Te(a,b,c){this.Pm=this.Om=0;this.ql=c==null?64:c;if(a){this.Za=b;this.Md=new q.nk;this.ca=[];for(b=0;b<a.Ja.length;++b)if(c=a.Ja[b])for(var d=c.$.length,e=0;e<d;e+=3){var f=new G(c.j[c.$[e]].f,c.j[c.$[e+1]].f,c.j[c.$[e+2]].f);this.Md.ca.push(f);this.ca.push(f)}Dg(this,this.Md)}}Te.prototype=new Cg;
function Dg(a,b){++a.Om;b.g.I=b.ca[0].M.e();b.g.J=b.g.I.e();for(var c,d=b.ca.length,e=0;e<d;++e){c=b.ca[e];B(b.g,c.M);B(b.g,c.V);B(b.g,c.X)}if(!b.g.I.P(b.g.J)&&d>a.ql){d=Da(b.g);for(var f=Fa(b.g),g=new A,i=0;i<8;++i){var j=[];g.I=d.e();g.J=d.e();B(g,f[i]);b.Fc.push(new q.nk);for(e=0;e<b.ca.length;++e){c=b.ca[e];g.Dh(c.M)&&g.Dh(c.V)&&g.Dh(c.X)?b.Fc[i].ca.push(c):j.push(c)}b.ca=j;if(b.Fc[i].ca.length==0)b.Fc[i]=null;else Dg(a,b.Fc[i])}}a.Pm+=b.ca.length}
Te.prototype.Xe=function(a,b){Ue.prototype.Xe.call(this,a,b)};Te.prototype.$f=function(a,b,c){if(this.Za.Z){var d=new H;a=a.e();if(this.Za){d=this.Za.Z.e();Xa(d);eb(d,a)}var e=d;e.o=1;e.r=0;e.s=0;e.A=0;e.t=0;e.p=1;e.u=0;e.B=0;e.v=0;e.w=0;e.q=1;e.C=0;e.D=0;e.F=0;e.G=0;e.H=1;e.Da=true;if(b)d=b.e();if(this.Za)d=I(d,this.Za.Z);this.Md&&Eg(this,this.Md,c,a,d)}};
function Eg(a,b,c,d,e){if(Ha(b.g,d)){var f=b.ca.length,g;if(Oa(e))for(g=0;g<f;++g)c.push(b.ca[g]);else if(Pa(e))for(g=0;g<f;++g)c.push(new G(Va(e,b.ca[g].M),Va(e,b.ca[g].V),Va(e,b.ca[g].X)));else for(g=0;g<f;++g)c.push(new G(Ta(e,b.ca[g].M),Ta(e,b.ca[g].V),Ta(e,b.ca[g].X)));for(g=0;g<b.Fc.length;++g){f=b.Fc[g];f!=null&&Eg(a,f,c,d,e)}}}Te.prototype.aj=k("Za");
function Fg(a,b){var c=new q.nk;c.ca=b.ca;c.g=b.g.e();for(var d=0;d<b.Fc.length;++d){var e=b.Fc[d],f=null;if(e)f=Fg(a,e);c.Fc.push(f)}return c}Te.prototype.h=function(a){var b=new Te(null,a,this.ql);b.Za=a;b.ca=this.ca;b.Md=null;if(this.Md)b.Md=Fg(this,this.Md);return b};window.startCopperLichtFromFile=function(a,b,c,d){a=new ld(a,true,null,false,c,d);a.load(b);return a};window.CL3D=q;window.ccbGetSceneNodeFromId=Kf;window.ccbCloneSceneNode=Lf;window.ccbGetActiveCamera=Mf;window.ccbSetActiveCamera=Nf;window.ccbGetChildSceneNode=Of;window.ccbGetRootSceneNode=Pf;window.ccbGetSceneNodeChildCount=Qf;window.ccbGetSceneNodeFromName=Rf;window.ccbRemoveSceneNode=Sf;window.ccbGetSceneNodeMaterialCount=Tf;window.ccbGetSceneNodeMaterialProperty=Uf;
window.ccbSetSceneNodeMaterialProperty=Wf;window.ccbSetSceneNodeProperty=Xf;window.ccbGetSceneNodeProperty=Yf;window.ccbSetSceneNodePositionWithoutCollision=Zf;window.ccbRegisterOnFrameEvent=$f;window.ccbDrawColoredRectangle=bg;window.ccbDrawTextureRectangle=cg;window.ccbDrawTextureRectangleWithAlpha=dg;window.ccbGet3DPosFrom2DPos=eg;window.ccbGet2DPosFrom3DPos=fg;window.ccbGetCollisionPointOfWorldWithLine=gg;window.ccbEndProgram=ig;window.ccbDoesLineCollideWithBoundingBoxOfSceneNode=hg;
window.ccbLoadTexture=jg;window.ccbGetMousePosX=kg;window.ccbGetMousePosY=lg;window.ccbGetScreenWidth=mg;window.ccbGetScreenHeight=ng;window.ccbSetCloseOnEscapePressed=og;window.ccbSetCursorVisible=pg;window.ccbSwitchToScene=qg;window.ccbPlaySound=rg;window.ccbGetCopperCubeVariable=sg;window.ccbSetCopperCubeVariable=tg;window.ccbReadFileContent=vg;window.ccbWriteFileContent=wg;window.ccbGetPlatform=xg;window.ccbInvokeAction=yg;window.ccbCleanMemory=Vf;window.print=zg;window.system=Ag;
window.ccbRegisterBehaviorEventReceiver=Bg;window.ccbUnregisterOnFrameEvent=ag;window.ccbSwitchToFullscreen=ug;
